import{_ as j}from"./ModalWarning.vue.c8034d13.js";import{_ as z}from"./ModalAddCashier.vue.5bcea1d9.js";import{_ as G}from"./ButtonOpacity.dc986b85.js";import{_ as M}from"./CurrencyText.e0a25e6b.js";import{f as I,e as V,_ as Q,a as Y,n as U,g as E}from"./entry.67d43b7a.js";import{c as L}from"./cn.a642df04.js";import{k as D,F as x,Q as S,G as T,H as t,Z as F,R as r,U as f,_ as P,V as l,I as o,u,a as d,f as N,a4 as R,a3 as O,a5 as Z,a0 as q,a1 as J,Y as A,l as K}from"./swiper-vue.c2b88c58.js";import X from"./Cross.3d48c9b9.js";import{_ as ee,a as te}from"./ButtonOpacityEdit.78cd0a90.js";import{a as se,b as ne,c as oe}from"./Table.vue.86a68380.js";import{_ as ae}from"./TransitionTableCell.vue.a913062a.js";import{_ as ie}from"./ButtonOpacityDelete.68074b96.js";import{u as B}from"./useDate.d306248e.js";import{_ as le}from"./ProfilePage.vue.284371ff.js";import{u as ce}from"./useSorting.9414d803.js";import"./Modal.vue.0c332ca5.js";import"./ui.config.774b3127.js";import"./ModalTitle.vue.2fdf3e12.js";import"./Header2.700b2c28.js";import"./LabelProfile.vue.10d7d3b4.js";import"./Radio.f44b8754.js";import"./tw-merge.d5dfc584.js";import"./uid.12f507af.js";import"./useFormGroup.807bc207.js";import"./Button.vue.fe528707.js";import"./nuxt-link.8b951553.js";import"./nuxt-icon.4dbfd0d2.js";import"./ButtonOpacityBorderAddItem.9dfc8560.js";import"./CrossInCircle.f892b003.js";import"./Edit.8e1157a5.js";import"./ArrowTop.cc30804c.js";import"./ArrowRight.5c48ce0f.js";import"./ButtonText.4228120b.js";import"./Search.ff849a65.js";import"./Delete.f6467ce9.js";const re=r("span",{class:"w-full h-[1px] md:h-[2px] bg-beige-2 block rotate-[45deg] absolute left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%]"},null,-1),pe=r("span",{class:"w-full h-[1px] md:h-[2px] bg-beige-2 block rotate-[-45deg] absolute left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%]"},null,-1),me={class:"text-[11px] text-black font-medium md:text-[12px] xl:text-[15px]"},ue={class:"text-[22px] mt-[8px] xl:nt-[10px] md:text-[27px] xl:text-[30px] font-semibold"},_e={class:"mt-[12px] xl:mt-[15px] grid grid-cols-2 gap-y-[5px]"},de=r("p",{class:"text-[7px] md:text-[10px]"},"Доходи",-1),fe=r("p",{class:"text-[7px] md:text-[10px]"},"Витрати",-1),he={class:"text-[7px] md:text-[10px] flex items-center gap-[5px]"},xe=r("span",{class:"w-[4px] inline-block h-[4px] rounded-[50%] bg-[#8ED400]"},null,-1),ge={class:"text-[7px] md:text-[10px] flex items-center gap-[5px]"},ve=r("span",{class:"w-[4px] inline-block h-[4px] rounded-[50%] bg-[#E33629]"},null,-1),be=D({__name:"CashierItem",props:{allCashiers:{type:Boolean},cashier:{}},emits:["successDelete"],setup(b,{emit:m}){const _=b,h=m,s=()=>{h("successDelete")},p=()=>{I(`${V()}/delete_cashier`,{body:{cashier_id:_.cashier._id}}).then(n=>{n.message&&s()})};return(n,g)=>{var a,e,i,w,$;const v=G,c=M;return x(),S("div",{class:P(("cn"in n?n.cn:u(L))("bg-beige relative group rounded-[10px] w-full p-[15px] hover:opacity-100 duration-hover pr-[40px] opacity-60 xl:pr-[52px] lg:px-[20px] text-black",{"opacity-60":!n.allCashiers}))},[n.allCashiers?F("",!0):(x(),T(v,{key:0,onClick:p,class:"absolute is-hover:opacity-0 group-hover:opacity-100 duration-hover w-[14px] h-[14px] right-[10%]"},{default:t(()=>[re,pe]),_:1})),r("p",me,f((a=n.cashier)==null?void 0:a.name),1),r("p",{class:P(["text-[7px] md:text-[10px] mt-[5px]",{"opacity-0":n.allCashiers}])},f((e=n.cashier)==null?void 0:e.type),3),r("p",ue,[l(f((i=n.cashier)==null?void 0:i.balance),1),o(c)]),r("div",_e,[de,fe,r("p",he,[xe,l(" "+f((w=n.cashier)==null?void 0:w.incomes)+" ",1),o(c)]),r("p",ge,[ve,l(" "+f(($=n.cashier)==null?void 0:$.expenses)+" ",1),o(c)])])],2)}}}),we={},Ce={class:"bg-beige w-full rounded-[10px] flex flex-col items-center justify-center gap-[5px] self-stretch opacity-60 text-black"},ye=r("p",{class:"text-[11px] text-black font-medium md:text-[12px] xl:text-[15px]"}," Додати касу ",-1);function ke(b,m){const _=X;return x(),S("button",Ce,[o(_,{class:"!w-[21px] !h-[21px] xl:!w-[31px] xl:!h-[31px] stroke-beige-2"}),ye])}const $e=Q(we,[["render",ke]]),Te={class:"mb-[25px] xl:mb-[31px]"},Se=D({__name:"CashierList",setup(b){const m=d([]),_=d(0),h=d(0),s=d(0),p=d(!1),n=c=>{p.value=c},g=()=>{I(`${V()}/cashiers`).then(c=>{console.log(c),m.value=c.cashiers,_.value=c.totalBalance,h.value=c.total_expenses,s.value=c.total_incomes})},v=()=>{n(!1),g()};return g(),(c,a)=>{const e=z,i=be,w=q,$=$e,C=J;return x(),S("div",Te,[o(e,{onSuccessAction:v,modelValue:u(p),"onUpdate:modelValue":a[0]||(a[0]=y=>N(p)?p.value=y:null)},null,8,["modelValue"]),o(C,{class:"swiper_cashiers w-full",modules:["SwiperFreeMode"in c?c.SwiperFreeMode:u(Z)],spaceBetween:30,slidesPerView:"auto",breakpoints:{320:{slidesPerView:2},576:{slidesPerView:3},992:{slidesPerView:2},1100:{slidesPerView:3},1200:{slidesPerView:4},1400:{slidesPerView:5},1600:{slidesPerView:6},1800:{slidesPerView:7}}},{default:t(()=>[o(w,{class:"!h-auto"},{default:t(()=>[o(i,{class:"border-beige-1 border-[2px] h-full !opacity-100",allCashiers:"",cashier:{balance:u(_),expenses:u(h),incomes:u(s),name:"Всі каси",type:"Готівкова"}},null,8,["cashier"])]),_:1}),(x(!0),S(R,null,O(u(m),y=>(x(),T(w,{key:y._id,class:"!h-auto"},{default:t(()=>[o(i,{onSuccessDelete:g,class:"h-full",cashier:y},null,8,["cashier"])]),_:2},1024))),128)),o(w,{class:"!h-auto"},{default:t(()=>[o($,{onClick:a[1]||(a[1]=y=>n(!0)),class:"h-full"})]),_:1})]),_:1},8,["modules"])])}}}),Ie={class:"max-w-[200px] w-full inline-block truncate"},Ve={class:"font-medium leading-[130%] max-w-[200px] inline-block truncate"},De={class:"inline-block max-w-[120px] truncate"},Pe=D({__name:"TableItemTransaction",props:{transaction:{}},emits:["deleteAction"],setup(b,{emit:m}){const _=m,h=()=>{_("deleteAction")};return Y(),(s,p)=>{const n=ae,g=M,v=ee,c=ie,a=se;return x(),T(a,null,{header:t(()=>[r("span",Ie,f(("useDate"in s?s.useDate:u(B))(s.transaction.date)),1)]),elements:t(({active:e})=>[o(n,{vIf:e},{title:t(()=>[l("Дата ")]),value:t(()=>[r("span",Ve,f(("useDate"in s?s.useDate:u(B))(s.transaction.date)),1)]),_:2},1032,["vIf"]),o(n,{vIf:e},{title:t(()=>[l("Сума")]),value:t(()=>{var i;return[r("span",{class:P(("cn"in s?s.cn:u(L))("text-[12px] md:text-[15px] font-medium",{"text-[#8ED400]":String(s.transaction.sum)[0]!=="-","text-[#E33629]":String(s.transaction.sum)[0]==="-"}))},[l(f((i=s.transaction)==null?void 0:i.sum),1),o(g)],2)]}),_:2},1032,["vIf"]),o(n,{vIf:e},{title:t(()=>[l("Контрагент")]),value:t(()=>{var i;return[l(f((i=s.transaction)==null?void 0:i.counterpartie),1)]}),_:2},1032,["vIf"]),o(n,{vIf:e},{title:t(()=>[l("Залишок у касі")]),value:t(()=>{var i;return[l(f((i=s.transaction)==null?void 0:i.total_left),1)]}),_:2},1032,["vIf"]),o(n,{vIf:e},{title:t(()=>[l("Каса")]),value:t(()=>{var i;return[l(f((i=s.transaction)==null?void 0:i.cashier)+" замовлень",1)]}),_:2},1032,["vIf"]),o(n,{vIf:e},{title:t(()=>[l("Коментар ")]),value:t(()=>[r("span",De,f(s.transaction.comment),1)]),_:2},1032,["vIf"])]),"additional-buttons":t(()=>[o(v,{class:"flex-shrink-0",onClick:p[0]||(p[0]=A(e=>("navigateTo"in s?s.navigateTo:u(U))("/profile/edit_transaction/"+s.transaction._id),["stop"]))}),o(c,{class:"flex-shrink-0",onClick:A(h,["stop"])},null,8,["onClick"])]),_:1})}}}),Ae=E("testStore",()=>({finance:d([{_id:1,date:new Date,amount:"+3675₴",counterparty:"Кузьменко А.",cash_balance:"Замовлення",cash_desk:"45800₴",comment:"Lorem ipsum dolor sit amet, consectetur adipisci elit"},{_id:3,date:new Date,amount:"-3675₴",counterparty:"Кузьменко А.",cash_balance:"Замовлення",cash_desk:"45800₴",comment:"Lorem ipsum dolor sit amet, consectetur adipisci elit"},{_id:2,date:new Date,amount:"+3675₴",counterparty:"Кузьменко А.",cash_balance:"Замовлення",cash_desk:"45800₴",comment:"Lorem ipsum dolor sit amet, consectetur adipisci elit"}])})),Be=E("financeStore",()=>{const b=d([]),m=d(1),_=d(""),h=d(1),s=d(""),p=d(!1),n=e=>{ce(e,p,s,a)};function g(e){_.value=e,a()}function v(e){if(e===0)return!1;m.value=e,a()}function c(e){console.log(e),I(`${V()}/transactions`,{body:{transaction_id:e}}).then(i=>{i.message===!0&&a()})}function a(){I(`${V()}/transactions`,{body:{page:m.value,per_page:10,keyword:_.value,sort_by:s.value,reverse_sort:p.value}}).then(e=>{console.log(e),b.value=e.transactions,h.value=e.total_pages}).catch(e=>{console.error(e)})}return{fetchTransactions:a,searchTransactions:g,deleteTransactions:c,setPage:v,transactions:b,endPage:h,keyWord:_,page:m,setSorting:n,sorting:s,reverseSorting:p}}),ht=D({__name:"finance",setup(b){Ae();const m=Be(),_=K(()=>m.transactions),h=()=>{m.fetchTransactions()},s=a=>m.searchTransactions(a),p=d(""),n=d(!1),g=a=>{c(a),v(!0)},v=a=>{n.value=a},c=a=>{p.value=a};return h(),(a,e)=>{const i=j,w=Se,$=te,C=ne,y=Pe,H=oe,W=le;return x(),T(W,{title:"Фінанси"},{content:t(()=>[u(p)?(x(),T(i,{key:0,modelValue:u(n),"onUpdate:modelValue":e[0]||(e[0]=k=>N(n)?n.value=k:null),onCloseModal:e[1]||(e[1]=k=>v(!1))},{default:t(()=>[l("Ви впевнені, що хочете видалити транзакцію?")]),_:1},8,["modelValue"])):F("",!0),o(w),o($,{onSearch:s,onAdd:e[2]||(e[2]=k=>("navigateTo"in a?a.navigateTo:u(U))("new_transaction"))},{add_name:t(()=>[l(" Додати транзакцію")]),_:1}),o(H,null,{headers:t(()=>[o(C,null,{default:t(()=>[l(" Дата ")]),_:1}),o(C,null,{default:t(()=>[l("Сума")]),_:1}),o(C,null,{default:t(()=>[l(" Контрагент ")]),_:1}),o(C,null,{default:t(()=>[l("Залишок у касі")]),_:1}),o(C,null,{default:t(()=>[l("Каса")]),_:1}),o(C,null,{default:t(()=>[l("Коментар")]),_:1})]),items:t(()=>[(x(!0),S(R,null,O(u(_),k=>(x(),T(y,{key:k._id,transaction:k,onDeleteAction:Me=>g(k._id)},null,8,["transaction","onDeleteAction"]))),128))]),_:1})]),_:1})}}});export{ht as default};
