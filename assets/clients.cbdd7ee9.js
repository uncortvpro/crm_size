import{_ as F}from"./ButtonOpacityBorder.2e92b8eb.js";import{_ as W}from"./Modal.vue.dbba1960.js";import{f as T,o as h,j as $,w as e,a as p,n as S,b as t,d as n,q as L,i as w,s as M,v as U,_ as q,g as z,t as I,k as B,l as g,x as A,y,z as H,c as G,A as J,F as K}from"./entry.524c610c.js";import{_ as Q,a as X,b as Y}from"./ButtonOpacityDelete.5dd457d9.js";import{_ as Z,a as ee,b as te,c as ne,d as oe,e as le}from"./Table.vue.5be0f094.js";import se from"./ArrowRight.83aa7bcb.js";import{_ as P}from"./ButtonText.dd7364f9.js";import{_ as ae}from"./ProfilePage.vue.c75d0b90.js";import"./ButtonOpacity.9a4547b2.js";import"./ui.config.11131de5.js";import"./disposables.d200f846.js";import"./CrossInCircle.6dcd038b.js";import"./nuxt-icon.b87310e9.js";import"./Search.dbf858a5.js";import"./Edit.21937573.js";import"./Delete.6d48a672.js";import"./ArrowTop.29203978.js";import"./index.879abb1f.js";import"./index.b78e9366.js";const ie={class:"flex flex-col items-center"},ce=p("div",{class:"border-danger border w-[20px] h-[20px] md:w-[30px] md:h-[30px] text-danger text-[15px] flex items-center justify-center rounded-[50%]"},[p("span",null,"!")],-1),_e={class:"font-medium mt-[15px] md:mt-[15px] text-center text-[15px] md:text-[20px]"},re={class:"flex self-stretch gap-[20px] justify-center mt-[20px]"},me=T({__name:"ModalWarning",props:{ui:{}},emits:["closeModal","confirm"],setup(m,{emit:i}){const c=i,r=()=>{c("closeModal")},_=()=>{c("confirm")};return(u,d)=>{const a=F,l=W;return h(),$(l,{ui:{...u.ui,width:"!max-w-[414px]"}},{default:e(()=>[p("div",ie,[ce,p("p",_e,[S(u.$slots,"default")]),p("div",re,[t(a,{onClick:_,class:"border-gray-1 w-full max-w-[115px] text-gray-1"},{default:e(()=>[n("Так")]),_:1}),t(a,{onClick:r,class:"bg-black w-full max-w-[115px] text-white hover:text-black hover:bg-transparent hover:!opacity-100"},{default:e(()=>[n("Ні ")]),_:1})])])]),_:3},8,["ui"])}}}),R=L("clientsStore",()=>{const m=w([]),i=w(1),c=w(""),r=w(1);function _(l){c.value=l,d()}function u(l){if(l===0)return!1;i.value=l,d()}function d(){M(`${U()}/clients`,{body:{page:i.value,per_page:10,keyword:c.value}}).then(l=>{m.value=l.clients,r.value=l.total_pages}).catch(l=>{console.error(l)})}function a(l){M(`${U()}/delete_client`,{body:{client_id:l}}).then(f=>{f.message==="Client deleted successfully"&&(m.value=m.value.filter(v=>v._id.$oid!==l))})}return{clients:m,fetchClients:d,deleteClient:a,setPage:u,searchClients:_,page:i,keyWord:c,endPage:r}}),ue=T({__name:"RemoveClient",props:{clientId:{}},emits:["switchModal"],setup(m,{emit:i}){const c=m,r=i,_=R(),u=l=>{_.deleteClient(l)},d=l=>{r("switchModal",!1)},a=async()=>{await u(c.clientId),r("switchModal",!1)};return(l,f)=>{const v=me;return h(),$(v,{onCloseModal:f[0]||(f[0]=b=>d()),onConfirm:a},{default:e(()=>[n("Ви впевнені, що хочете видалити клієнта?")]),_:1})}}}),de={};function pe(m,i){const c=se,r=P;return h(),$(r,{class:"!text-[12px] flex gap-[5px]"},{default:e(()=>[p("span",null,[S(m.$slots,"default")]),t(c,{color:"black",class:"rotate-[-90deg]"})]),_:3})}const fe=q(de,[["render",pe]]),ve={class:"max-w-[200px] w-full inline-block truncate"},xe={class:"max-w-[200px] inline-block truncate"},ge=T({__name:"TableItemClients",props:{client:{}},emits:["deleteAction"],setup(m,{emit:i}){const c=i,r=()=>{c("deleteAction")};return z(),(_,u)=>{const d=P,a=Z,l=ee,f=te,v=Q,b=X,k=ne;return h(),$(k,null,{header:e(()=>{var o;return[p("span",ve,I((o=_.client)==null?void 0:o.name),1)]}),elements:e(({active:o})=>[t(a,{vIf:o},{title:e(()=>[n("Ім’я")]),value:e(()=>[t(d,{class:"font-medium leading-[130%]"},{default:e(()=>{var s;return[p("span",xe,I((s=_.client)==null?void 0:s.name),1)]}),_:1})]),_:2},1032,["vIf"]),t(a,{vIf:o},{title:e(()=>[n("Номер телефону")]),value:e(()=>{var s;return[n(I((s=_.client)==null?void 0:s.phone),1)]}),_:2},1032,["vIf"]),t(a,{vIf:o},{title:e(()=>[n("Email")]),value:e(()=>{var s;return[n(I((s=_.client)==null?void 0:s.email),1)]}),_:2},1032,["vIf"]),t(a,{vIf:o},{title:e(()=>[n("Instagram")]),value:e(()=>{var s;return[n(I((s=_.client)==null?void 0:s.instagram),1)]}),_:2},1032,["vIf"]),t(a,{vIf:o},{title:e(()=>[n("Історія покупок ")]),value:e(()=>[n("Історія покупок")]),_:2},1032,["vIf"]),t(a,{vIf:o},{title:e(()=>[n("Тотал сума покупок ")]),value:e(()=>[n("Тотал сума покупок")]),_:2},1032,["vIf"]),t(a,{vIf:o},{title:e(()=>[n("Дата останньої покупки")]),value:e(()=>[n("Дата останньої покупки")]),_:2},1032,["vIf"]),t(a,{vIf:o},{title:e(()=>[n("Статус")]),value:e(()=>[t(l,null,{default:e(()=>{var s;return[n(I((s=_.client)==null?void 0:s.status),1)]}),_:1})]),_:2},1032,["vIf"]),t(a,{vIf:o,class:"3xl:hidden col-span-2"},{title:e(()=>[t(f,null,{default:e(()=>[n("Детальніше")]),_:1})]),_:2},1032,["vIf"])]),"additional-buttons":e(()=>[t(v,{class:"flex-shrink-0",onClick:u[0]||(u[0]=B(o=>("navigateTo"in _?_.navigateTo:g(A))("/profile/edit_client/"+_.client._id.$oid),["stop"]))}),t(b,{class:"flex-shrink-0",onClick:B(r,["stop"])},null,8,["onClick"])]),_:1})}}}),Oe=T({__name:"clients",setup(m){const i=R(),c=w(!1),r=w(""),_=y(()=>i.clients),u=y(()=>i.page),d=y(()=>i.endPage),a=()=>i.fetchClients(),l=o=>i.setPage(o),f=o=>i.searchClients(o),v=o=>{c.value=o},b=o=>{r.value=o},k=o=>{b(o),v(!0)};return a(),(o,s)=>{const V=ue,D=Y,x=oe,E=fe,N=ge,O=le,j=ae;return h(),$(j,{title:"Клієнти"},{content:e(()=>[p("div",null,[t(V,{modelValue:g(c),"onUpdate:modelValue":s[0]||(s[0]=C=>H(c)?c.value=C:null),clientId:g(r),onSwitchModal:v},null,8,["modelValue","clientId"]),t(D,{onAdd:s[1]||(s[1]=C=>("navigateTo"in o?o.navigateTo:g(A))("new_client")),onSearch:f},{add_name:e(()=>[n(" Додати клієнта ")]),_:1}),t(O,{pageTable:g(u),endPage:g(d),onSetPage:l},{headers:e(()=>[t(x,null,{default:e(()=>[n("Ім’я")]),_:1}),t(x,null,{default:e(()=>[n("Номер телефону")]),_:1}),t(x,null,{default:e(()=>[n("Email")]),_:1}),t(x,null,{default:e(()=>[n("Instagram")]),_:1}),t(x,null,{default:e(()=>[n("Історія покупок ")]),_:1}),t(x,null,{default:e(()=>[n("Тотал сума покупок")]),_:1}),t(x,null,{default:e(()=>[t(E,{class:"!font-normal"},{default:e(()=>[n("Дата останньої покупки")]),_:1})]),_:1}),t(x,null,{default:e(()=>[n("Статус")]),_:1})]),items:e(()=>[(h(!0),G(K,null,J(g(_),C=>(h(),$(N,{key:C._id.$oid,client:C,onDeleteAction:he=>k(C._id.$oid)},null,8,["client","onDeleteAction"]))),128))]),_:1},8,["pageTable","endPage"])])]),_:1})}}});export{Oe as default};
