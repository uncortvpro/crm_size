import{_ as O,u as F,a as L,b as j}from"./CurrencyText.aeb0e281.js";import{_ as q,a as H,b as z}from"./ButtonOpacityDelete.da1a0d29.js";import{_ as G,a as J,b as K,c as Q,d as W,e as X}from"./Table.vue.03dd70fe.js";import{_ as Y}from"./ButtonText.b603ff67.js";import{f as y,g as Z,o as b,j as D,w as t,a as P,t as c,b as n,d as o,k as B,l,n as A,i as x,q as v,s as tt,c as et,v as nt,F as ot}from"./entry.c361818e.js";import{_ as lt}from"./ProfilePage.vue.354d9a9a.js";import"./disposables.e76fef56.js";import"./ButtonOpacity.3c07e1f9.js";import"./ArrowRight.d4578cb6.js";import"./nuxt-icon.2cf15c71.js";import"./CrossInCircle.7f523dba.js";import"./Search.8d181fe1.js";import"./Edit.426795d3.js";import"./Delete.a1ca3dbb.js";import"./ui.config.6626e531.js";import"./ArrowTop.e47cc4ac.js";import"./index.5ce1de0e.js";import"./index.42fe7d6f.js";const st={class:"max-w-[200px] w-full inline-block truncate"},at={class:"max-w-[200px] inline-block truncate"},it=y({__name:"TableItemClients",props:{client:{}},emits:["deleteAction"],setup(h,{emit:r}){console.log(h.client);const C=r,w=()=>{C("deleteAction")};return Z(),(s,I)=>{const $=Y,_=G,k=O,u=J,p=K,g=q,T=H,U=Q;return b(),D(U,null,{header:t(()=>{var a;return[P("span",st,c((a=s.client)==null?void 0:a.name),1)]}),elements:t(({active:a})=>[n(_,{vIf:a},{title:t(()=>[o("Ім’я")]),value:t(()=>[n($,{class:"font-medium leading-[130%]"},{default:t(()=>{var e;return[P("span",at,c((e=s.client)==null?void 0:e.name),1)]}),_:1})]),_:2},1032,["vIf"]),n(_,{vIf:a},{title:t(()=>[o("Номер телефону")]),value:t(()=>{var e;return[o(c((e=s.client)==null?void 0:e.phone),1)]}),_:2},1032,["vIf"]),n(_,{vIf:a},{title:t(()=>[o("Email")]),value:t(()=>{var e;return[o(c((e=s.client)==null?void 0:e.email),1)]}),_:2},1032,["vIf"]),n(_,{vIf:a},{title:t(()=>[o("Instagram")]),value:t(()=>{var e;return[o(c((e=s.client)==null?void 0:e.instagram),1)]}),_:2},1032,["vIf"]),n(_,{vIf:a},{title:t(()=>[o("Історія покупок ")]),value:t(()=>[o(c(s.client.orders.length)+" замовлень",1)]),_:2},1032,["vIf"]),n(_,{vIf:a},{title:t(()=>[o("Тотал сума покупок ")]),value:t(()=>{var e;return[o(c((e=s.client)==null?void 0:e.total_price_sum),1),n(k)]}),_:2},1032,["vIf"]),n(_,{vIf:a},{title:t(()=>[o("Дата останньої покупки")]),value:t(()=>{var e;return[o(c((e=s.client)==null?void 0:e.latest_order_date),1)]}),_:2},1032,["vIf"]),n(_,{vIf:a},{title:t(()=>[o("Статус")]),value:t(()=>[n(u,{color:s.client.status.colour},{default:t(()=>{var e,i;return[o(c((i=(e=s.client)==null?void 0:e.status)==null?void 0:i.status),1)]}),_:1},8,["color"])]),_:2},1032,["vIf"]),n(_,{vIf:a,class:"3xl:hidden col-span-2"},{title:t(()=>[n(p,null,{default:t(()=>[o("Детальніше")]),_:1})]),_:2},1032,["vIf"])]),"additional-buttons":t(()=>[n(g,{class:"flex-shrink-0",onClick:I[0]||(I[0]=B(a=>("navigateTo"in s?s.navigateTo:l(A))("/profile/edit_client/"+s.client._id),["stop"]))}),n(T,{class:"flex-shrink-0",onClick:B(w,["stop"])},null,8,["onClick"])]),_:1})}}}),Dt=y({__name:"clients",setup(h){const r=F(),f=x(!1),C=x(""),w=v(()=>r.clients),s=v(()=>r.page),I=v(()=>r.endPage),$=()=>r.fetchClients(),_=e=>r.setPage(e),k=e=>r.searchClients(e),u=v(()=>r.sorting),p=v(()=>r.reverseSorting),g=e=>{r.setSorting(e)},T=e=>{f.value=e},U=e=>{C.value=e},a=e=>{U(e),T(!0)};return $(),(e,i)=>{const R=L,V=z,S=j,d=W,E=it,M=X,N=lt;return b(),D(N,{title:"Клієнти"},{content:t(()=>[P("div",null,[n(R,{modelValue:l(f),"onUpdate:modelValue":i[0]||(i[0]=m=>tt(f)?f.value=m:null),clientId:l(C),onSwitchModal:T},null,8,["modelValue","clientId"]),n(V,{onAdd:i[1]||(i[1]=m=>("navigateTo"in e?e.navigateTo:l(A))("new_client")),onSearch:k},{add_name:t(()=>[o(" Додати клієнта ")]),_:1}),n(M,{pageTable:l(s),endPage:l(I),onSetPage:_},{headers:t(()=>[n(d,null,{default:t(()=>[n(S,{sortingUp:l(u)==="name"&&l(p),sortingDown:l(u)==="name"&&!l(p),onClick:i[2]||(i[2]=m=>g("name")),class:"!font-normal"},{default:t(()=>[o(" Ім’я")]),_:1},8,["sortingUp","sortingDown"])]),_:1}),n(d,null,{default:t(()=>[o("Номер телефону")]),_:1}),n(d,null,{default:t(()=>[o("Email")]),_:1}),n(d,null,{default:t(()=>[o("Instagram")]),_:1}),n(d,null,{default:t(()=>[o("Історія покупок ")]),_:1}),n(d,null,{default:t(()=>[n(S,{sortingUp:l(u)==="total_price_sum"&&l(p),sortingDown:l(u)==="total_price_sum"&&!l(p),onClick:i[3]||(i[3]=m=>g("total_price_sum")),class:"!font-normal"},{default:t(()=>[o(" Тотал сума покупок")]),_:1},8,["sortingUp","sortingDown"])]),_:1}),n(d,null,{default:t(()=>[n(S,{sortingUp:l(u)==="latest_order_date"&&l(p),sortingDown:l(u)==="latest_order_date"&&!l(p),onClick:i[4]||(i[4]=m=>g("latest_order_date")),class:"!font-normal"},{default:t(()=>[o(" Дата останньої покупки")]),_:1},8,["sortingUp","sortingDown"])]),_:1}),n(d,null,{default:t(()=>[o("Статус")]),_:1})]),items:t(()=>[(b(!0),et(ot,null,nt(l(w),m=>(b(),D(E,{key:m._id,client:m,onDeleteAction:rt=>a(m._id)},null,8,["client","onDeleteAction"]))),128))]),_:1},8,["pageTable","endPage"])])]),_:1})}}});export{Dt as default};
