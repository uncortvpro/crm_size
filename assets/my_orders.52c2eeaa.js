import{_ as N,a as P,b as x}from"./ButtonOpacityDelete.7feefd9a.js";import{_ as F}from"./ModalOrderDetails.vue.2cfbcc55.js";import{_ as E,a as L,c as M,d as R,e as j}from"./Table.vue.f2bbacba.js";import{_ as q}from"./CurrencyText.844767cb.js";import{u as $,_ as H}from"./useDate.f9c6639a.js";import{f as B,g as W,o as O,j as C,w as e,a as b,t as p,l as _,b as n,d as t,k as w,n as U,C as z,i as d,B as G,A as J,q as S,s as K,m as Q,c as X,v as Y,F as Z}from"./entry.22f5ca64.js";import{_ as ee}from"./ProfilePage.vue.5a76eb3f.js";import"./CrossInCircle.7d889ebb.js";import"./nuxt-icon.6ed23056.js";import"./ButtonOpacityBorder.6a632c08.js";import"./ButtonOpacity.dfe37caa.js";import"./Search.a1dac41c.js";import"./Edit.d9fdbd70.js";import"./Delete.e043d5f9.js";import"./useBase64.937b19aa.js";import"./ArrowTop.16cebdb4.js";import"./index.52d628e9.js";import"./index.075377b1.js";import"./ArrowRight.16208481.js";import"./ButtonText.5953f646.js";import"./Header2.ec8fd74b.js";import"./Close.e7b09b82.js";import"./tw-merge.c32e9328.js";import"./ui.config.267b1adf.js";import"./Modal.vue.5e6374df.js";import"./disposables.0a18dfc2.js";import"./ThreeDots.7b1cb2b9.js";const oe={class:"max-w-[200px] w-full inline-block truncate"},te={class:"font-medium leading-[130%] max-w-[200px] inline-block truncate"},ne={class:"flex items-center gap-[5px] md:gap-[25px]"},re=B({__name:"TableItemOrders",props:{order:{}},emits:["deleteAction","showDetails"],setup(v,{emit:c}){const u=v,g=c,h=()=>{g("showDetails",u.order._id)};return console.log(u.order),W(),(o,m)=>{const a=E,i=q,k=L,l=H,f=N,D=P,T=M;return O(),C(T,null,{header:e(()=>{var r;return[b("span",oe,p(("useDate"in o?o.useDate:_($))((r=o.order)==null?void 0:r.date.$date)),1)]}),elements:e(({active:r})=>[n(a,{vIf:r},{title:e(()=>[t("№")]),value:e(()=>[t("№")]),_:2},1032,["vIf"]),n(a,{vIf:r},{title:e(()=>[t("Дата")]),value:e(()=>{var s;return[b("span",te,p(("useDate"in o?o.useDate:_($))((s=o.order)==null?void 0:s.date.$date)),1)]}),_:2},1032,["vIf"]),n(a,{vIf:r},{title:e(()=>[t("Клієнт")]),value:e(()=>{var s;return[t(p((s=o.order)==null?void 0:s.client),1)]}),_:2},1032,["vIf"]),n(a,{vIf:r},{title:e(()=>[t("Сума замовлення")]),value:e(()=>{var s;return[t(p((s=o.order)==null?void 0:s.total_sum),1),n(i)]}),_:2},1032,["vIf"]),n(a,{vIf:r},{title:e(()=>[t("Джерело замовлення")]),value:e(()=>{var s;return[t(p((s=o.order)==null?void 0:s.source),1)]}),_:2},1032,["vIf"]),n(a,{vIf:r},{title:e(()=>[t("Статус")]),value:e(()=>[n(k,{color:o.order.status.colour},{default:e(()=>[t(p(o.order.status.status),1)]),_:1},8,["color"])]),_:2},1032,["vIf"]),n(a,{vIf:r},{title:e(()=>[t("Оплата")]),value:e(()=>{var s;return[t(p((s=o.order)==null?void 0:s.payment),1)]}),_:2},1032,["vIf"])]),"additional-buttons":e(()=>[b("div",ne,[n(l,{onClick:w(h,["stop"])},null,8,["onClick"]),n(f,{class:"flex-shrink-0",onClick:m[0]||(m[0]=w(r=>("navigateTo"in o?o.navigateTo:_(U))("/profile/edit_order/"+o.order._id),["stop"]))}),n(D,{class:"flex-shrink-0",onClick:m[1]||(m[1]=w(()=>{},["stop"]))})])]),_:1})}}}),se=z("ordersStore",()=>{const v=d([]),c=d(1),u=d(""),g=d(1),h=d(""),o=d(!1);function m(i){u.value=i,a()}function a(){G(`${J()}/orders`,{body:{page:c.value,per_page:10,keyword:u.value,sort_by:h.value,reverse_sort:o.value}}).then(i=>{console.log(i),v.value=i.orders,g.value=i.total_pages}).catch(i=>{console.error(i)})}return{fetchOrders:a,orders:v,searchOrders:m}}),Ae=B({__name:"my_orders",setup(v){const c=se(),u=S(()=>c.orders),g=()=>c.fetchOrders(),h=l=>c.searchOrders(l),o=d(!1),m=d(""),a=S(()=>u.value.find(l=>l._id===m.value)),i=l=>{m.value=l},k=l=>{i(l),o.value=!0};return g(),(l,f)=>{const D=x,T=F,r=R,s=re,V=j,A=ee;return O(),C(A,{title:"Мої замовлення"},{content:e(()=>{var y;return[n(D,{onSearch:h,onAdd:f[0]||(f[0]=I=>("navigateTo"in l?l.navigateTo:_(U))("new_order"))},{add_name:e(()=>[t(" Додати замовлення")]),_:1}),_(a)?(O(),C(T,{key:0,modelValue:_(o),"onUpdate:modelValue":f[1]||(f[1]=I=>K(o)?o.value=I:null),label:"Деталі замовлення",products:(y=_(a))==null?void 0:y.products},null,8,["modelValue","products"])):Q("",!0),n(V,null,{headers:e(()=>[n(r,null,{default:e(()=>[t("№ ")]),_:1}),n(r,null,{default:e(()=>[t("Дата замовлення")]),_:1}),n(r,null,{default:e(()=>[t("Клієнт")]),_:1}),n(r,null,{default:e(()=>[t("Сума замовлення")]),_:1}),n(r,null,{default:e(()=>[t("Джерело замовлення")]),_:1}),n(r,null,{default:e(()=>[t("Статус")]),_:1}),n(r,null,{default:e(()=>[t("Оплата")]),_:1})]),items:e(()=>[(O(!0),X(Z,null,Y(_(u),I=>(O(),C(s,{key:I._id,order:I,onShowDetails:k},null,8,["order"]))),128))]),_:1})]}),_:1})}}});export{Ae as default};
