import{_ as ce,a as fe}from"./ButtonOpacityEdit.f35bf8c2.js";import{a as me,b as ve,c as be}from"./Table.vue.b8c656f9.js";import{_ as he,a as ge}from"./StatusOutput.vue.804339df.js";import{_ as _e}from"./CurrencyText.07630cf7.js";import{u as ye,_ as we}from"./useDate.aa53c50f.js";import{_ as Ie}from"./ButtonOpacityDelete.c89ddd8e.js";import{f as O,i as w,R as G,q as T,a2 as Z,G as M,y as ne,a0 as Te,F as V,I as le,a3 as X,g as Pe,o as W,j as E,w as i,a as B,t as C,l as D,b,d as g,k as Q,n as oe,C as xe,B as $e,A as Se,c as q,v as J,a5 as ke,a6 as ee,_ as Ce,E as te,a9 as F,Q as N,V as We,K as ae,N as Oe}from"./entry.2c4ac607.js";import{u as Ae}from"./useBase64.937b19aa.js";import{a as Be}from"./index.822b4d9b.js";import{t as Ne,u as He}from"./ui.config.4a5c0603.js";import{a as Ee,f as re,O as L,o as I,H as R,T as De,t as ue,N as se,u as j,b as S,g as z,d as Fe,m as Le,P as H,e as k}from"./micro-task.f2b8702a.js";import{b as Me}from"./use-resolve-button-type.e5dfd55e.js";import{_ as Re}from"./ProfilePage.vue.db57ce06.js";import"./Edit.8532a73b.js";import"./nuxt-icon.a636b460.js";import"./ButtonOpacity.56d0f423.js";import"./nuxt-link.bbe2d9d5.js";import"./ArrowTop.0a5ff5a0.js";import"./ArrowRight.40c2d2b0.js";import"./ButtonText.0e7e3120.js";import"./ThreeDots.f9e164b1.js";import"./CrossInCircle.bc48627f.js";import"./Search.b94ce439.js";import"./cn.a642df04.js";import"./Delete.9566d238.js";import"./index.a6b833fe.js";let Ue=O({props:{onFocus:{type:Function,required:!0}},setup(e){let c=w(!0);return()=>c.value?G(re,{as:"button",type:"button",features:Ee.Focusable,onFocus(v){v.preventDefault();let f,o=50;function t(){var l;if(o--<=0){f&&cancelAnimationFrame(f);return}if((l=e.onFocus)!=null&&l.call(e)){c.value=!1,cancelAnimationFrame(f);return}f=requestAnimationFrame(t)}f=requestAnimationFrame(t)}}):null}});var ze=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(ze||{}),je=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(je||{});let ie=Symbol("TabsContext");function U(e){let c=X(ie,null);if(c===null){let v=new Error(`<${e} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(v,U),v}return c}let Y=Symbol("TabsSSRContext"),Ge=O({name:"TabGroup",emits:{change:e=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:c,attrs:v,emit:f}){var o;let t=w((o=e.selectedIndex)!=null?o:e.defaultIndex),l=w([]),u=w([]),p=T(()=>e.selectedIndex!==null),h=T(()=>p.value?e.selectedIndex:t.value);function d(n){var s;let m=L(a.tabs.value,I),P=L(a.panels.value,I),A=m.filter(x=>{var $;return!(($=I(x))!=null&&$.hasAttribute("disabled"))});if(n<0||n>m.length-1){let x=j(t.value===null?0:Math.sign(n-t.value),{[-1]:()=>1,0:()=>j(Math.sign(n),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),$=j(x,{0:()=>m.indexOf(A[0]),1:()=>m.indexOf(A[A.length-1])});$!==-1&&(t.value=$),a.tabs.value=m,a.panels.value=P}else{let x=m.slice(0,n),$=[...m.slice(n),...x].find(pe=>A.includes(pe));if(!$)return;let K=(s=m.indexOf($))!=null?s:a.selectedIndex.value;K===-1&&(K=a.selectedIndex.value),t.value=K,a.tabs.value=m,a.panels.value=P}}let a={selectedIndex:T(()=>{var n,s;return(s=(n=t.value)!=null?n:e.defaultIndex)!=null?s:null}),orientation:T(()=>e.vertical?"vertical":"horizontal"),activation:T(()=>e.manual?"manual":"auto"),tabs:l,panels:u,setSelectedIndex(n){h.value!==n&&f("change",n),p.value||d(n)},registerTab(n){var s;if(l.value.includes(n))return;let m=l.value[t.value];l.value.push(n),l.value=L(l.value,I);let P=(s=l.value.indexOf(m))!=null?s:t.value;P!==-1&&(t.value=P)},unregisterTab(n){let s=l.value.indexOf(n);s!==-1&&l.value.splice(s,1)},registerPanel(n){u.value.includes(n)||(u.value.push(n),u.value=L(u.value,I))},unregisterPanel(n){let s=u.value.indexOf(n);s!==-1&&u.value.splice(s,1)}};Z(ie,a);let r=w({tabs:[],panels:[]}),y=w(!1);M(()=>{y.value=!0}),Z(Y,T(()=>y.value?null:r.value));let _=T(()=>e.selectedIndex);return M(()=>{ne([_],()=>{var n;return d((n=e.selectedIndex)!=null?n:e.defaultIndex)},{immediate:!0})}),Te(()=>{if(!p.value||h.value==null||a.tabs.value.length<=0)return;let n=L(a.tabs.value,I);n.some((s,m)=>I(a.tabs.value[m])!==I(s))&&a.setSelectedIndex(n.findIndex(s=>I(s)===I(a.tabs.value[h.value])))}),()=>{let n={selectedIndex:t.value};return G(V,[l.value.length<=0&&G(Ue,{onFocus:()=>{for(let s of l.value){let m=I(s);if((m==null?void 0:m.tabIndex)===0)return m.focus(),!0}return!1}}),R({theirProps:{...v,...De(e,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:n,slots:c,attrs:v,name:"TabGroup"})])}}}),Ve=O({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:c,slots:v}){let f=U("TabList");return()=>{let o={selectedIndex:f.selectedIndex.value},t={role:"tablist","aria-orientation":f.orientation.value};return R({ourProps:t,theirProps:e,slot:o,attrs:c,slots:v,name:"TabList"})}}}),qe=O({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-tabs-tab-${ue()}`}},setup(e,{attrs:c,slots:v,expose:f}){let o=U("Tab"),t=w(null);f({el:t,$el:t}),M(()=>o.registerTab(t)),le(()=>o.unregisterTab(t));let l=X(Y),u=T(()=>{if(l.value){let s=l.value.tabs.indexOf(e.id);return s===-1?l.value.tabs.push(e.id)-1:s}return-1}),p=T(()=>{let s=o.tabs.value.indexOf(t);return s===-1?u.value:s}),h=T(()=>p.value===o.selectedIndex.value);function d(s){var m;let P=s();if(P===z.Success&&o.activation.value==="auto"){let A=(m=Le(t))==null?void 0:m.activeElement,x=o.tabs.value.findIndex($=>I($)===A);x!==-1&&o.setSelectedIndex(x)}return P}function a(s){let m=o.tabs.value.map(P=>I(P)).filter(Boolean);if(s.key===S.Space||s.key===S.Enter){s.preventDefault(),s.stopPropagation(),o.setSelectedIndex(p.value);return}switch(s.key){case S.Home:case S.PageUp:return s.preventDefault(),s.stopPropagation(),d(()=>H(m,k.First));case S.End:case S.PageDown:return s.preventDefault(),s.stopPropagation(),d(()=>H(m,k.Last))}if(d(()=>j(o.orientation.value,{vertical(){return s.key===S.ArrowUp?H(m,k.Previous|k.WrapAround):s.key===S.ArrowDown?H(m,k.Next|k.WrapAround):z.Error},horizontal(){return s.key===S.ArrowLeft?H(m,k.Previous|k.WrapAround):s.key===S.ArrowRight?H(m,k.Next|k.WrapAround):z.Error}}))===z.Success)return s.preventDefault()}let r=w(!1);function y(){var s;r.value||(r.value=!0,!e.disabled&&((s=I(t))==null||s.focus({preventScroll:!0}),o.setSelectedIndex(p.value),Fe(()=>{r.value=!1})))}function _(s){s.preventDefault()}let n=Me(T(()=>({as:e.as,type:c.type})),t);return()=>{var s;let m={selected:h.value},{id:P,...A}=e,x={ref:t,onKeydown:a,onMousedown:_,onClick:y,id:P,role:"tab",type:n.value,"aria-controls":(s=I(o.panels.value[p.value]))==null?void 0:s.id,"aria-selected":h.value,tabIndex:h.value?0:-1,disabled:e.disabled?!0:void 0};return R({ourProps:x,theirProps:A,slot:m,attrs:c,slots:v,name:"Tab"})}}}),Ke=O({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:c,attrs:v}){let f=U("TabPanels");return()=>{let o={selectedIndex:f.selectedIndex.value};return R({theirProps:e,ourProps:{},slot:o,attrs:v,slots:c,name:"TabPanels"})}}}),Qe=O({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-tabs-panel-${ue()}`},tabIndex:{type:Number,default:0}},setup(e,{attrs:c,slots:v,expose:f}){let o=U("TabPanel"),t=w(null);f({el:t,$el:t}),M(()=>o.registerPanel(t)),le(()=>o.unregisterPanel(t));let l=X(Y),u=T(()=>{if(l.value){let d=l.value.panels.indexOf(e.id);return d===-1?l.value.panels.push(e.id)-1:d}return-1}),p=T(()=>{let d=o.panels.value.indexOf(t);return d===-1?u.value:d}),h=T(()=>p.value===o.selectedIndex.value);return()=>{var d;let a={selected:h.value},{id:r,tabIndex:y,..._}=e,n={ref:t,id:r,role:"tabpanel","aria-labelledby":(d=I(o.tabs.value[p.value]))==null?void 0:d.id,tabIndex:h.value?y:-1};return!h.value&&e.unmount&&!e.static?G(re,{as:"span",...n}):R({ourProps:n,theirProps:_,slot:a,attrs:c,slots:v,features:se.Static|se.RenderStrategy,visible:h.value,name:"TabPanel"})}}});const Je={class:"max-w-[200px] w-full inline-block truncate"},Xe={class:"font-medium leading-[130%] max-w-[200px] inline-block truncate"},Ye={class:"flex items-center gap-[5px] md:gap-[25px]"},Ze=O({__name:"TableItemWarehouse",props:{product:{}},emits:["deleteAction","showDetails"],setup(e,{emit:c}){const v=e,f=c,o=()=>{f("showDetails",v.product._id)};return Pe(),(t,l)=>{const u=he,p=ge,h=_e,d=we,a=ce,r=Ie,y=me;return W(),E(y,null,{header:i(()=>{var _;return[B("span",Je,C(("useDate"in t?t.useDate:D(ye))((_=t.product)==null?void 0:_.name)),1)]}),elements:i(({active:_})=>[b(u,{vIf:_},{title:i(()=>[]),value:i(()=>{var n;return[g(C(("useBase64"in t?t.useBase64:D(Ae))((n=t.product)==null?void 0:n.variations[0].photos[0])),1)]}),_:2},1032,["vIf"]),b(u,{vIf:_},{title:i(()=>[g("Товар")]),value:i(()=>{var n;return[B("span",Xe,C((n=t.product)==null?void 0:n.name),1)]}),_:2},1032,["vIf"]),b(u,{vIf:_},{title:i(()=>[g("Статус")]),value:i(()=>[b(p,{color:t.product.status.colour},{default:i(()=>[g(C(t.product.status.status),1)]),_:1},8,["color"])]),_:2},1032,["vIf"]),b(u,{vIf:_},{title:i(()=>[g("Кількість")]),value:i(()=>{var n;return[g(C((n=t.product)==null?void 0:n.pieces),1),b(h)]}),_:2},1032,["vIf"]),b(u,{vIf:_},{title:i(()=>[g("Джерело замовлення")]),value:i(()=>[g(C("product?.source"),1)]),_:2},1032,["vIf"]),b(u,{vIf:_},{title:i(()=>[g("Статус")]),value:i(()=>[b(p,{color:t.product.status.colour},{default:i(()=>[g(C(t.product.status.status),1)]),_:1},8,["color"])]),_:2},1032,["vIf"]),b(u,{vIf:_},{title:i(()=>[g("Оплата")]),value:i(()=>[g(C("product?.payment"),1)]),_:2},1032,["vIf"])]),"additional-buttons":i(()=>[B("div",Ye,[b(d,{onClick:Q(o,["stop"])},null,8,["onClick"]),b(a,{class:"flex-shrink-0",onClick:l[0]||(l[0]=Q(_=>("navigateTo"in t?t.navigateTo:D(oe))("/profile/edit_product/"+t.product._id),["stop"]))}),b(r,{class:"flex-shrink-0",onClick:l[1]||(l[1]=Q(()=>{},["stop"]))})])]),_:1})}}}),de=xe("warehousesStore",()=>{const e=[{id:1,name:"Склад готової продукції",secondName:"finishedWarehouse"},{id:2,name:"Склад дистриб’ютора",secondName:"distributorWarehouse"},{id:3,name:"Склад матеріалів",secondName:"warehouseMaterials"}],c=w({finishedWarehouse:[],distributorWarehouse:[],warehouseMaterials:[]}),v=w({finishedWarehouse:1,distributorWarehouse:1,warehouseMaterials:1}),f=w({finishedWarehouse:"",distributorWarehouse:"",warehouseMaterials:""}),o=w({finishedWarehouse:1,distributorWarehouse:1,warehouseMaterials:1}),t=(a,r)=>{c.value[u(r)]=a},l=(a,r)=>{o.value[u(r)]=a};function u(a){const r=e.find(y=>y.id===a);return(r==null?void 0:r.secondName)||e[0].secondName}function p(a){const r=e.find(y=>y.id===a);return(r==null?void 0:r.name)||e[0].name}function h(a,r){f.value=a,d(r)}function d(a){$e(`${Se()}/products`,{body:{page:v.value[u(a)],per_page:10,keyword:f.value[u(a)],warehouse:p(a)}}).then(r=>{t(r.products,a),l(r.total_pages,a),console.log(c.value)}).catch(r=>{console.error(r)})}return{finishedWarehouse:c.value.finishedWarehouse,distributorWarehouse:c.value.distributorWarehouse,warehouseMaterials:c.value.warehouseMaterials,fetchProducts:d,searchOrders:h,warehouses:e}}),et=O({__name:"warehouses",props:{warehouseId:{}},setup(e){const c=e,v=de(),f=T(()=>v.finishedWarehouse);return(()=>v.fetchProducts(c.warehouseId))(),(t,l)=>{const u=fe,p=ve,h=Ze,d=be;return W(),q("div",null,[b(u,{onSearch:l[0]||(l[0]=()=>{}),onAdd:l[1]||(l[1]=a=>("navigateTo"in t?t.navigateTo:D(oe))("new_order"))},{add_name:i(()=>[g(" Додати товар")]),_:1}),b(d,null,{headers:i(()=>[b(p),b(p,null,{default:i(()=>[g("Товар")]),_:1}),b(p,null,{default:i(()=>[g("Статус")]),_:1}),b(p,null,{default:i(()=>[g("Кількість")]),_:1}),b(p,null,{default:i(()=>[g("Склади")]),_:1}),b(p,null,{default:i(()=>[g("Категорія")]),_:1}),b(p,null,{default:i(()=>[g("Коментар")]),_:1})]),items:i(()=>[(W(!0),q(V,null,J(D(f),a=>(W(),E(h,{key:a._id,product:a},null,8,["product"]))),128))]),_:1})])}}}),tt=ke(ee.ui.strategy,ee.ui.tabs,Ne),at=O({components:{HTabGroup:Ge,HTabList:Ve,HTab:qe,HTabPanels:Ke,HTabPanel:Qe},inheritAttrs:!1,props:{modelValue:{type:Number,default:void 0},orientation:{type:String,default:"horizontal",validator:e=>["horizontal","vertical"].includes(e)},defaultIndex:{type:Number,default:0},items:{type:Array,default:()=>[]},class:{type:[String,Object,Array],default:void 0},ui:{type:Object,default:void 0}},emits:["update:modelValue","change"],setup(e,{emit:c}){const{ui:v,attrs:f}=He("tabs",te(e,"ui"),tt,te(e,"class")),o=w(),t=w([]),l=w(),u=w(e.modelValue||e.defaultIndex);function p(d){var r;const a=(r=t.value[d])==null?void 0:r.$el;a&&(l.value.style.top=`${a.offsetTop}px`,l.value.style.left=`${a.offsetLeft}px`,l.value.style.width=`${a.offsetWidth}px`,l.value.style.height=`${a.offsetHeight}px`)}function h(d){u.value=d,c("change",d),e.modelValue!==void 0&&c("update:modelValue",d),p(d)}return Be(o,()=>{p(u.value)}),ne(()=>e.modelValue,d=>{u.value=d,p(d)}),M(()=>p(u.value)),{ui:v,attrs:f,listRef:o,itemRefs:t,markerRef:l,selectedIndex:u,onChange:h}}}),st={class:"truncate"};function nt(e,c,v,f,o,t){const l=F("HTab"),u=F("HTabList"),p=F("HTabPanel"),h=F("HTabPanels"),d=F("HTabGroup");return W(),E(d,Oe({vertical:e.orientation==="vertical","selected-index":e.selectedIndex,as:"div",class:e.ui.wrapper},e.attrs,{onChange:e.onChange}),{default:i(()=>[b(u,{ref:"listRef",class:N([e.ui.list.base,e.ui.list.background,e.ui.list.rounded,e.ui.list.shadow,e.ui.list.padding,e.ui.list.width,e.orientation==="horizontal"&&e.ui.list.height,e.orientation==="horizontal"&&"inline-grid items-center"]),style:We([e.orientation==="horizontal"&&`grid-template-columns: repeat(${e.items.length}, minmax(0, 1fr))`])},{default:i(()=>[B("div",{ref:"markerRef",class:N(e.ui.list.marker.wrapper)},[B("div",{class:N([e.ui.list.marker.base,e.ui.list.marker.background,e.ui.list.marker.rounded,e.ui.list.marker.shadow])},null,2)],2),(W(!0),q(V,null,J(e.items,(a,r)=>(W(),E(l,{key:r,ref_for:!0,ref:"itemRefs",disabled:a.disabled,as:"template"},{default:i(({selected:y,disabled:_})=>[B("button",{class:N([e.ui.list.tab.base,e.ui.list.tab.background,e.ui.list.tab.height,e.ui.list.tab.padding,e.ui.list.tab.size,e.ui.list.tab.font,e.ui.list.tab.rounded,e.ui.list.tab.shadow,y?e.ui.list.tab.active:e.ui.list.tab.inactive])},[ae(e.$slots,"default",{item:a,index:r,selected:y,disabled:_},()=>[B("span",st,C(a.label),1)])],2)]),_:2},1032,["disabled"]))),128))]),_:3},8,["class","style"]),b(h,{class:N(e.ui.container)},{default:i(()=>[(W(!0),q(V,null,J(e.items,(a,r)=>(W(),E(p,{key:r,class:N(e.ui.base),tabindex:"-1"},{default:i(({selected:y})=>[ae(e.$slots,a.slot||"item",{item:a,index:r,selected:y},()=>[g(C(a.content),1)])]),_:2},1032,["class"]))),128))]),_:3},8,["class"])]),_:3},16,["vertical","selected-index","class","onChange"])}const lt=Ce(at,[["render",nt]]),At=O({__name:"warehouses",setup(e){const v=de().warehouses.map(f=>({id:f.id,label:f.name,slot:"warehousesSlot"}));return(f,o)=>{const t=et,l=lt,u=Re;return W(),E(u,{title:"Склади"},{content:i(()=>[b(l,{ui:{container:"!pt-[20px]",list:{base:"bg-transparent h-auto gap-[10px] md:gap-[35px] !p-0 !flex  flex-col !items-start xs:flex-row xs:!items-center",width:"w-fit",marker:{wrapper:"hidden"},tab:{base:"!text-[9px] md:!text-[12px] truncate !inline-flex justify-start lg:!text-[15px] !h-auto w-fit focus:!ring-0 !p-0",active:"!text-black",inactive:"!text-beige-1"}}},items:D(v),"default-index":0},{warehousesSlot:i(({item:p})=>[b(t,{warehouseId:p.id},null,8,["warehouseId"])]),_:1},8,["items"])]),_:1})}}});export{At as default};
