import{_ as le}from"./AlertDanger.e2355836.js";import{_ as ne}from"./AlertSuccess.2999cc75.js";import{_ as L}from"./Header2.ea895c44.js";import{_ as ae,a as se}from"./ModalTitle.vue.5436b0e2.js";import{w as E,_ as j}from"./Button.vue.403d863a.js";import{f as re,e as ue,n as ie}from"./entry.a7db78e0.js";import{o as Q}from"./index.156df155.js";import{k as I,a as U,F as r,Q as h,I as e,u as _,f as M,R as $,a2 as D,a3 as H,G as C,H as t,V as a,U as k,Z as w,l as F,b as ce,Y as de}from"./swiper-vue.6e4b9487.js";import{_ as pe}from"./LabelProfile.vue.3e32a02a.js";import{_ as me}from"./ButtonOpacityBorderAddItem.f6c7cec2.js";import{b as _e,_ as fe,a as ve}from"./SelectVariant.vue.9e1f81d0.js";import{_ as N}from"./DivBorderBg.58473391.js";import{d as Y,f as xe,b as Z,e as Ve,a as be,c as ge}from"./Table.vue.d83bd75d.js";import{_ as he}from"./Checkbox.vue.b2a14ca5.js";import{_ as ye}from"./ButtonOpacityBorder.b20bc0a5.js";import{_ as Ue}from"./SearchBorder.vue.afd1965d.js";import{_ as Ce}from"./InputProfileTable.4eccab86.js";import{_ as ke}from"./CurrencyText.d295505c.js";import{_ as $e}from"./ButtonOpacityDelete.b5df1415.js";import{u as q}from"./useBase64.1efa7b71.js";import{u as Se}from"./ordersStore.9b8aca91.js";const we={key:0,class:"absolute top-[100%] left-0 w-full bg-beige max-h-[300px] overflow-y-scroll scroll_bar"},Te={key:0,class:"text-[9px] md:text-[12px] truncate px-[7px] py-[10px] md:px-[10px] md:pt-[15px] w-full text-left"},Pe=I({__name:"SearchClients",props:{name:{},email:{}},emits:["update:name","update:email"],setup(T,{emit:y}){const i=T,f=y,o=(d,V)=>{f("update:name",d),f("update:email",V)},n=U(null),x=U(!1),u=d=>{x.value=d},l=U(""),c=U([]),m=()=>{l.value=i.name||""},b=()=>{re(`${ue()}/clients`,{body:{keyword:l.value}}).then(d=>{c.value=d.clients}).catch(d=>{console.error(d)})};Q(n,d=>u(!1));const s=(d,V)=>{o(d,V),l.value=d,u(!1)};return E(()=>i.name,()=>{m()}),(d,V)=>{const P=ae,A=j;return r(),h("div",{class:"relative z-50",ref_key:"hiddenOutsideClickElement",ref:n},[e(P,{modelValue:_(l),"onUpdate:modelValue":V[0]||(V[0]=p=>M(l)?l.value=p:null),onFocus:V[1]||(V[1]=p=>u(!0)),onInput:b,class:"w-full"},null,8,["modelValue"]),_(x)?(r(),h("div",we,[$("div",null,[(r(!0),h(D,null,H(_(c),p=>(r(),C(A,{key:p._id,onClick:R=>s(p.name,p.email),class:"text-[9px] md:text-[12px] truncate px-[7px] py-[10px] md:px-[10px] md:pt-[15px] duration-hover hover:bg-beige-1 w-full text-left"},{default:t(()=>[a(k(p.name)+" ("+k(p.email)+") ",1)]),_:2},1032,["onClick"]))),128)),_(c).length===0?(r(),h("p",Te," Не знайдено ")):w("",!0)])])):w("",!0)],512)}}}),Be={class:"border-t border-beige-1"},Ie=I({__name:"TableItemAddVariationToOrder",props:{variation:{},modelValue:{},startItems:{}},emits:["update:modelValue"],setup(T,{emit:y}){const i=T,f=y,o=U(!1),n=F(()=>!!i.startItems.find(l=>l._id===i.variation._id)),x=()=>{o.value=n.value},u=()=>{if(o.value&&!n.value)return f("update:modelValue",[...i.modelValue,i.variation]),!1;if(!o.value){const l=i.modelValue.filter(c=>c._id!==i.variation._id);f("update:modelValue",l)}};return ce(o,()=>{u()}),x(),u(),(l,c)=>{const m=he,b=Y,s=xe;return r(),h("tr",Be,[e(b,null,{default:t(()=>[e(m,{modelValue:_(o),"onUpdate:modelValue":c[0]||(c[0]=d=>M(o)?o.value=d:null),ui:{border:"border-black",rounded:"rounded-[2px]"}},null,8,["modelValue"])]),_:1}),e(b,null,{default:t(()=>[e(s,null,{default:t(()=>[a(k(l.variation.size),1)]),_:1})]),_:1}),e(b,null,{default:t(()=>[e(s,null,{default:t(()=>[a(k(l.variation.colour),1)]),_:1})]),_:1})])}}}),Ae={class:"table-auto w-full"},Oe=I({__name:"ModalAddVariationToOrder",props:{variations:{},selectedVariations:{}},emits:["update:selectedVariations","closeModal"],setup(T,{emit:y}){const i=T,f=y,o=()=>{f("update:selectedVariations",n.value),f("closeModal")},n=U([]),x=()=>{n.value=i.selectedVariations};return E(i.selectedVariations,()=>{x()}),x(),(u,l)=>{const c=Z,m=Ie,b=N,s=ye,d=se;return r(),C(d,{title:"Оберіть варіації"},{default:t(()=>[e(b,null,{default:t(()=>[$("table",Ae,[$("thead",null,[e(c),e(c,null,{default:t(()=>[a("Розмір")]),_:1}),e(c,null,{default:t(()=>[a("Колір")]),_:1})]),$("tbody",null,[(r(!0),h(D,null,H(u.variations,V=>(r(),C(m,{key:V._id,variation:V,modelValue:_(n),"onUpdate:modelValue":l[0]||(l[0]=P=>M(n)?n.value=P:null),startItems:u.selectedVariations},null,8,["variation","modelValue","startItems"]))),128))])])]),_:1}),e(s,{disabled:!1,onClick:o,class:"self-center mt-[25px]"},{default:t(()=>[a("Зберегти")]),_:1})]),_:1})}}}),Me=["src"],De=I({__name:"TableItemOrderProduct",props:{product:{}},emits:["deleteAction"],setup(T,{emit:y}){const i=y,f=()=>{i("deleteAction")};return(o,n)=>{const x=Y,u=Ve,l=Ce,c=ke,m=$e,b=be;return r(),C(b,{isMobileClose:!1,class:"grid-cols-order-details-modal-xs gap-x-[10px] md:grid-cols-order-details-modal-md relative"},{elements:t(()=>[e(x,{class:"!grid-cols-1 !col-span-1 row-span-5"},{default:t(()=>[o.product.photos[0]?(r(),h("img",{key:0,class:"max-w-[40px]",src:("useBase64"in o?o.useBase64:_(q))(o.product.photos[0])||"",alt:""},null,8,Me)):w("",!0)]),_:1}),e(u,{class:"col-span-2"},{title:t(()=>[a("Найменування")]),value:t(()=>[a(k(o.product.name),1)]),_:1}),e(u,{class:"col-span-2"},{title:t(()=>[a("Розмір")]),value:t(()=>{var s;return[a(k((s=o.product)==null?void 0:s.size),1)]}),_:1}),e(u,{class:"col-span-2"},{title:t(()=>[a("Кількість")]),value:t(()=>[e(l,{class:"bg-beige-1",type:"number",modelValue:o.product.amount,"onUpdate:modelValue":n[0]||(n[0]=s=>o.product.amount=s)},null,8,["modelValue"])]),_:1}),e(u,{class:"col-span-2"},{title:t(()=>[a("На складі")]),value:t(()=>{var s;return[a(k((s=o.product)==null?void 0:s.in_stock),1)]}),_:1}),e(u,{class:"col-span-2"},{title:t(()=>[a("Ціна")]),value:t(()=>{var s;return[a(k((s=o.product)==null?void 0:s.price),1),e(c)]}),_:1}),e(u,{class:"col-span-2"},{title:t(()=>[]),value:t(()=>[e(m,{class:"flex-shrink-0 absolute right-0 top-0 3xl:relative",onClick:de(f,["stop"])},null,8,["onClick"])]),_:1})]),_:1})}}}),Fe={key:0,class:"absolute top-[100%] left-0 w-full bg-beige max-h-[300px] overflow-y-scroll scroll_bar"},Ee=["src"],He={key:0,class:"text-[9px] md:text-[12px] truncate px-[7px] py-[10px] md:px-[10px] md:pt-[15px] w-full text-left"},ze=I({__name:"ProductToOrderAdding",props:{modelValue:{}},emits:["update:modelValue"],setup(T,{emit:y}){const i=T,f=y,o=v=>{f("update:modelValue",v)},n=Se(),x=U(!1),u=U(null),l=U([]),c=U(""),m=U(!1),b=F(()=>n.addingProducts),s=F(()=>b.value.find(S=>S._id===c.value)),d=F(()=>s.value.variations),V=v=>{x.value=v},P=v=>{c.value=v},A=v=>{P(v),V(!0)},p=()=>{l.value=i.modelValue},R=async v=>{await n.searchProducts(v),m.value=!0},J=v=>{const S=i.modelValue.filter(O=>O._id!==v),z=l.value.filter(O=>O._id!==v);o(S),l.value=z},K=()=>{m.value=!1};return Q(u,v=>K()),E(l,()=>{o(l.value)}),E(()=>i.modelValue,()=>{p()}),p(),(v,S)=>{const z=L,O=Oe,W=Ue,X=j,B=Z,ee=De,te=ge,oe=N;return r(),C(oe,{class:"w-full flex flex-col"},{default:t(()=>[e(z,{class:"text-center"},{default:t(()=>[a(" Додати товари ")]),_:1}),_(c)?(r(),C(O,{key:0,modelValue:_(x),"onUpdate:modelValue":S[0]||(S[0]=g=>M(x)?x.value=g:null),selectedVariations:_(l),"onUpdate:selectedVariations":S[1]||(S[1]=g=>M(l)?l.value=g:null),variations:_(d),onCloseModal:S[2]||(S[2]=g=>V(!1))},null,8,["modelValue","selectedVariations","variations"])):w("",!0),$("div",{class:"relative",ref_key:"hiddenOutsideClickElement",ref:u},[e(W,{theme:"beige",class:"mt-[15px] xl:mt-[25px]",onSearch:R}),_(m)?(r(),h("div",Fe,[$("div",null,[(r(!0),h(D,null,H(_(b),g=>(r(),C(X,{key:g._id,onClick:G=>A(g._id),class:"text-[9px] md:text-[12px] flex gap-[10px] items-center truncate px-[7px] py-[10px] md:px-[10px] md:pt-[15px] duration-hover hover:bg-beige-1 w-full text-left"},{default:t(()=>[g.photo?(r(),h("img",{key:0,src:("useBase64"in v?v.useBase64:_(q))(g.photo)||void 0,alt:"",class:"w-[23px] h-[28px] object-cover"},null,8,Ee)):w("",!0),a(" "+k(g.name),1)]),_:2},1032,["onClick"]))),128)),_(b).length===0?(r(),h("p",He," Не знайдено ")):w("",!0)])])):w("",!0)],512),$("div",null,[_(l).length>0?(r(),C(te,{key:0,pagination:!1,class:"!mt-[20px]"},{headers:t(()=>[e(B),e(B,null,{default:t(()=>[a("Найменування")]),_:1}),e(B,null,{default:t(()=>[a("Розмір")]),_:1}),e(B,null,{default:t(()=>[a("Кількість")]),_:1}),e(B,null,{default:t(()=>[a("На складі")]),_:1}),e(B,null,{default:t(()=>[a("Ціна")]),_:1})]),items:t(()=>[(r(!0),h(D,null,H(_(l),(g,G)=>(r(),C(ee,{key:G,product:g,onDeleteAction:je=>J(g._id||"")},null,8,["product","onDeleteAction"]))),128))]),_:1})):w("",!0)])]),_:1})}}}),Ne={action:"#"},Re={class:"flex flex-col 3xl:items-start 3xl:flex-row gap-[25px]"},Ge={class:"flex items-center gap-[15px] md:mt-[10px]"},Le=$("span",{class:"text-[9px] md:text-[10px] xl:text-[12px]"},"або",-1),mt=I({__name:"Order",props:{error:{},messageToUser:{},inputs:{}},emits:["updateInputs"],setup(T,{emit:y}){const i=y,f=(o,n)=>{i("updateInputs",o,n)};return(o,n)=>{const x=le,u=ne,l=L,c=Pe,m=pe,b=me,s=_e,d=fe,V=ve,P=N,A=ze;return r(),h(D,null,[o.error?(r(),C(x,{key:0},{default:t(()=>[a(k(o.error),1)]),_:1})):w("",!0),o.messageToUser?(r(),C(u,{key:1},{default:t(()=>[a(k(o.messageToUser),1)]),_:1})):w("",!0),$("form",Ne,[$("div",Re,[e(P,{class:"w-full 3xl:basis-[60%]"},{default:t(()=>[e(V,null,{default:t(()=>[e(l,{class:"col-span-2"},{default:t(()=>[a(" Інформація ")]),_:1}),e(m,{class:"col-span-2 md:col-span-1",label:"Обрати клієнта:"},{default:t(()=>[e(c,{name:o.inputs.client,"onUpdate:name":n[0]||(n[0]=p=>o.inputs.client=p),email:o.inputs.email,"onUpdate:email":n[1]||(n[1]=p=>o.inputs.email=p)},null,8,["name","email"])]),_:1}),$("div",Ge,[Le,e(b,{type:"button",onClick:n[2]||(n[2]=p=>("navigateTo"in o?o.navigateTo:_(ie))("/profile/new_client"))},{default:t(()=>[a("Додати клієнта")]),_:1})]),e(l,{class:"col-span-2 mt-[10px] xl:mt-[20px]"},{default:t(()=>[a(" Додаткова інформація ")]),_:1}),e(m,{class:"col-span-2 md:col-span-1",label:"Доставка:"},{default:t(()=>[e(s,{valueSelect:o.inputs.shipping,typeSelect:"shipping",typeVariant:"shipping",onUpdateValue:f},null,8,["valueSelect"])]),_:1}),e(m,{class:"col-span-2 md:col-span-1",label:"Обрати статус замовлення:"},{default:t(()=>[e(s,{valueSelect:o.inputs.status,typeSelect:"status",typeVariant:"order",onUpdateValue:f},null,8,["valueSelect"])]),_:1}),e(m,{class:"col-span-2 md:col-span-1",label:"Джерело замовлення:"},{default:t(()=>[e(s,{valueSelect:o.inputs.source,typeSelect:"source",typeVariant:"source",onUpdateValue:f},null,8,["valueSelect"])]),_:1}),e(m,{class:"col-span-2 md:col-span-1",label:"Оплата:"},{default:t(()=>[e(s,{valueSelect:o.inputs.payment,typeSelect:"payment",typeVariant:"payment",onUpdateValue:f},null,8,["valueSelect"])]),_:1}),e(m,{class:"col-span-2",label:"Коментар:"},{default:t(()=>[e(d,{modelValue:o.inputs.comment,"onUpdate:modelValue":n[3]||(n[3]=p=>o.inputs.comment=p),class:"min-h-[80px] md:min-h-[105px]"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(A,{modelValue:o.inputs.products,"onUpdate:modelValue":n[4]||(n[4]=p=>o.inputs.products=p),class:"3xl:basis-[40%]"},null,8,["modelValue"])])])],64)}}});export{mt as _};
