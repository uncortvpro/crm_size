import{_ as K}from"./ModalWarning.vue.11f9c02b.js";import{_ as X}from"./ModalAddCashier.vue.4c513a73.js";import{_ as ee}from"./ButtonOpacity.a941fccb.js";import{_ as R}from"./CurrencyText.d295505c.js";import{f as U,e as A,_ as te,a as se,n as L,g as ne}from"./entry.a7db78e0.js";import{c as O}from"./cn.a642df04.js";import{k as B,F as C,Q as V,G as P,H as t,Z as H,R as p,U as v,_ as E,V as l,I as s,u as a,a as g,f as W,a2 as j,a3 as z,a5 as oe,a0 as ae,a1 as ie,Y as F,l as I}from"./swiper-vue.6e4b9487.js";import le from"./Cross.da19ed6d.js";import{_ as re,a as ce}from"./ButtonOpacityEdit.f3faaf3a.js";import{_ as pe}from"./ButtonSortingTable.vue.2e873de5.js";import{a as me,b as ue,c as _e}from"./Table.vue.d83bd75d.js";import{_ as de}from"./TransitionTableCell.vue.8666db8d.js";import{_ as fe}from"./ButtonOpacityDelete.b5df1415.js";import{u as N}from"./useDate.7255fb09.js";import{_ as xe}from"./ProfilePage.vue.e53e23ed.js";import{u as ge}from"./useSorting.9908e62e.js";import"./ButtonOpacityBorder.b20bc0a5.js";import"./Modal.vue.8e19d014.js";import"./ui.config.221b1ad4.js";import"./ModalTitle.vue.5436b0e2.js";import"./Header2.ea895c44.js";import"./LabelProfile.vue.3e32a02a.js";import"./Radio.096c81ae.js";import"./tw-merge.ce19ca2b.js";import"./uid.67695475.js";import"./Button.vue.403d863a.js";import"./nuxt-link.c84a3561.js";import"./nuxt-icon.1ff6c1ea.js";import"./ButtonOpacityBorderAddItem.f6c7cec2.js";import"./CrossInCircle.cc05d1a0.js";import"./SearchBorder.vue.afd1965d.js";import"./Search.9d579821.js";import"./Edit.80bc6d21.js";import"./ArrowRight.222cf0a8.js";import"./ButtonText.40c98744.js";import"./ArrowTop.45e95320.js";import"./index.156df155.js";import"./Delete.21faf37d.js";const he=p("span",{class:"w-full h-[1px] md:h-[2px] bg-beige-2 block rotate-[45deg] absolute left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%]"},null,-1),ve=p("span",{class:"w-full h-[1px] md:h-[2px] bg-beige-2 block rotate-[-45deg] absolute left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%]"},null,-1),be={class:"text-[11px] text-black font-medium md:text-[12px] xl:text-[15px]"},we={class:"text-[22px] mt-[8px] xl:nt-[10px] md:text-[27px] xl:text-[30px] font-semibold"},Ce={class:"mt-[12px] xl:mt-[15px] grid grid-cols-2 gap-y-[5px]"},ye=p("p",{class:"text-[7px] md:text-[10px]"},"Доходи",-1),ke=p("p",{class:"text-[7px] md:text-[10px]"},"Витрати",-1),Te={class:"text-[7px] md:text-[10px] flex items-center gap-[5px]"},$e=p("span",{class:"w-[4px] inline-block h-[4px] rounded-[50%] bg-[#8ED400]"},null,-1),Se={class:"text-[7px] md:text-[10px] flex items-center gap-[5px]"},Pe=p("span",{class:"w-[4px] inline-block h-[4px] rounded-[50%] bg-[#E33629]"},null,-1),De=B({__name:"CashierItem",props:{allCashiers:{type:Boolean},cashier:{}},emits:["successDelete"],setup(k,{emit:i}){const f=k,b=i,o=()=>{b("successDelete")},m=()=>{U(`${A()}/delete_cashier`,{body:{cashier_id:f.cashier._id}}).then(n=>{n.message&&o()})};return(n,u)=>{var _,r,e,d,$;const w=ee,c=R;return C(),V("div",{class:E(("cn"in n?n.cn:a(O))("bg-beige relative group rounded-[10px] w-full p-[15px] hover:opacity-100 duration-hover pr-[40px] opacity-60 xl:pr-[52px] lg:px-[20px] text-black",{"opacity-60":!n.allCashiers}))},[n.allCashiers?H("",!0):(C(),P(w,{key:0,onClick:m,class:"absolute is-hover:opacity-0 group-hover:opacity-100 duration-hover w-[14px] h-[14px] right-[10%]"},{default:t(()=>[he,ve]),_:1})),p("p",be,v((_=n.cashier)==null?void 0:_.name),1),p("p",{class:E(["text-[7px] md:text-[10px] mt-[5px]",{"opacity-0":n.allCashiers}])},v((r=n.cashier)==null?void 0:r.type),3),p("p",we,[l(v((e=n.cashier)==null?void 0:e.balance),1),s(c)]),p("div",Ce,[ye,ke,p("p",Te,[$e,l(" "+v((d=n.cashier)==null?void 0:d.incomes)+" ",1),s(c)]),p("p",Se,[Pe,l(" "+v(($=n.cashier)==null?void 0:$.expenses)+" ",1),s(c)])])],2)}}}),Ie={},Ve={class:"bg-beige w-full rounded-[10px] flex flex-col items-center justify-center gap-[5px] self-stretch opacity-60 text-black"},Ue=p("p",{class:"text-[11px] text-black font-medium md:text-[12px] xl:text-[15px]"}," Додати касу ",-1);function Ae(k,i){const f=le;return C(),V("button",Ve,[s(f,{class:"!w-[21px] !h-[21px] xl:!w-[31px] xl:!h-[31px] stroke-beige-2"}),Ue])}const Be=te(Ie,[["render",Ae]]),Me={class:"mb-[25px] xl:mb-[31px]"},Ee=B({__name:"CashierList",setup(k){const i=g([]),f=g(0),b=g(0),o=g(0),m=g(!1),n=c=>{m.value=c},u=()=>{U(`${A()}/cashiers`).then(c=>{i.value=c.cashiers,f.value=c.total_balance,b.value=c.total_expenses,o.value=c.total_incomes})},w=()=>{n(!1),u()};return u(),(c,_)=>{const r=X,e=De,d=ae,$=Be,D=ie;return C(),V("div",Me,[s(r,{onSuccessAction:w,modelValue:a(m),"onUpdate:modelValue":_[0]||(_[0]=T=>W(m)?m.value=T:null)},null,8,["modelValue"]),s(D,{class:"swiper_cashiers w-full",modules:["SwiperFreeMode"in c?c.SwiperFreeMode:a(oe)],spaceBetween:30,slidesPerView:"auto",breakpoints:{320:{slidesPerView:2},576:{slidesPerView:3},992:{slidesPerView:2},1100:{slidesPerView:3},1200:{slidesPerView:4},1400:{slidesPerView:5},1600:{slidesPerView:6},1800:{slidesPerView:7}}},{default:t(()=>[s(d,{class:"!h-auto"},{default:t(()=>[s(e,{class:"border-beige-1 border-[2px] h-full !opacity-100",allCashiers:"",cashier:{balance:a(f),expenses:a(b),incomes:a(o),name:"Всі каси",type:"Готівкова"}},null,8,["cashier"])]),_:1}),(C(!0),V(j,null,z(a(i),T=>(C(),P(d,{key:T._id,class:"!h-auto"},{default:t(()=>[s(e,{onSuccessDelete:u,class:"h-full",cashier:T},null,8,["cashier"])]),_:2},1024))),128)),s(d,{class:"!h-auto"},{default:t(()=>[s($,{onClick:_[1]||(_[1]=T=>n(!0)),class:"h-full"})]),_:1})]),_:1},8,["modules"])])}}}),Fe={class:"max-w-[200px] w-full inline-block truncate"},Ne={class:"font-medium leading-[130%] max-w-[200px] inline-block truncate"},Re={class:"inline-block max-w-[120px] truncate"},Le=B({__name:"TableItemTransaction",props:{transaction:{}},emits:["deleteAction"],setup(k,{emit:i}){const f=i,b=()=>{f("deleteAction")};return se(),(o,m)=>{const n=de,u=R,w=re,c=fe,_=me;return C(),P(_,null,{header:t(()=>[p("span",Fe,v(("useDate"in o?o.useDate:a(N))(o.transaction.date)),1)]),elements:t(({active:r})=>[s(n,{vIf:r},{title:t(()=>[l("Дата ")]),value:t(()=>[p("span",Ne,v(("useDate"in o?o.useDate:a(N))(o.transaction.date)),1)]),_:2},1032,["vIf"]),s(n,{vIf:r},{title:t(()=>[l("Сума")]),value:t(()=>{var e;return[p("span",{class:E(("cn"in o?o.cn:a(O))("text-[12px] md:text-[15px] font-medium",{"text-[#8ED400]":String(o.transaction.sum)[0]!=="-","text-[#E33629]":String(o.transaction.sum)[0]==="-"}))},[l(v((e=o.transaction)==null?void 0:e.sum),1),s(u)],2)]}),_:2},1032,["vIf"]),s(n,{vIf:r},{title:t(()=>[l("Контрагент")]),value:t(()=>{var e;return[l(v((e=o.transaction)==null?void 0:e.counterpartie),1)]}),_:2},1032,["vIf"]),s(n,{vIf:r},{title:t(()=>[l("Залишок у касі")]),value:t(()=>{var e;return[l(v((e=o.transaction)==null?void 0:e.total_left),1)]}),_:2},1032,["vIf"]),s(n,{vIf:r},{title:t(()=>[l("Каса")]),value:t(()=>{var e;return[l(v((e=o.transaction)==null?void 0:e.cashier)+" замовлень",1)]}),_:2},1032,["vIf"]),s(n,{vIf:r},{title:t(()=>[l("Коментар ")]),value:t(()=>[p("span",Re,v(o.transaction.comment),1)]),_:2},1032,["vIf"])]),"additional-buttons":t(()=>[s(w,{class:"flex-shrink-0",onClick:m[0]||(m[0]=F(r=>("navigateTo"in o?o.navigateTo:a(L))("/profile/edit_transaction/"+o.transaction._id),["stop"]))}),s(c,{class:"flex-shrink-0",onClick:F(b,["stop"])},null,8,["onClick"])]),_:1})}}}),Oe=ne("financeStore",()=>{const k=g([]),i=g(1),f=g(""),b=g(1),o=g(""),m=g(!1),n=e=>{ge(e,m,o,r)};function u(e){return k.value.find(d=>d._id===e)}function w(e){f.value=e,r()}function c(e){if(e===0)return!1;i.value=e,r()}function _(e){U(`${A()}/delete_transaction`,{body:{transaction_id:e}}).then(d=>{d.message===!0&&r()})}function r(){U(`${A()}/transactions`,{body:{page:i.value,per_page:10,keyword:f.value,sort_by:o.value,reverse_sort:m.value}}).then(e=>{k.value=e.transactions,b.value=e.total_pages}).catch(e=>{console.error(e)})}return{fetchTransactions:r,searchTransactions:w,deleteTransactions:_,setPage:c,transactions:k,endPage:b,keyWord:f,page:i,setSorting:n,sorting:o,reverseSorting:m,getTransactionById:u}}),St=B({__name:"finance",setup(k){const i=Oe(),f=I(()=>i.transactions),b=I(()=>i.page),o=I(()=>i.endPage),m=x=>i.setPage(x),n=I(()=>i.sorting),u=I(()=>i.reverseSorting),w=x=>{i.setSorting(x)},c=()=>{i.fetchTransactions()},_=g(""),r=async()=>{i.deleteTransactions(_.value),D(!1)},e=x=>i.searchTransactions(x),d=g(!1),$=x=>{T(x),D(!0)},D=x=>{d.value=x},T=x=>{_.value=x};return c(),(x,h)=>{const G=K,Q=Ee,Y=ce,M=pe,S=ue,Z=Le,q=_e,J=xe;return C(),P(J,{title:"Фінанси"},{content:t(()=>[a(_)?(C(),P(G,{key:0,modelValue:a(d),"onUpdate:modelValue":h[0]||(h[0]=y=>W(d)?d.value=y:null),onCloseModal:h[1]||(h[1]=y=>D(!1)),onConfirm:r},{default:t(()=>[l("Ви впевнені, що хочете видалити транзакцію?")]),_:1},8,["modelValue"])):H("",!0),s(Q),s(Y,{onSearch:e,onAdd:h[2]||(h[2]=y=>("navigateTo"in x?x.navigateTo:a(L))("new_transaction"))},{add_name:t(()=>[l(" Додати транзакцію")]),_:1}),s(q,{pageTable:a(b),endPage:a(o),onSetPage:m},{headers:t(()=>[s(S,null,{default:t(()=>[s(M,{sortingUp:a(n)==="date"&&a(u),sortingDown:a(n)==="date"&&!a(u),onClick:h[3]||(h[3]=y=>w("date")),class:"!font-normal"},{default:t(()=>[l(" Дата")]),_:1},8,["sortingUp","sortingDown"])]),_:1}),s(S,null,{default:t(()=>[s(M,{sortingUp:a(n)==="sum"&&a(u),sortingDown:a(n)==="sum"&&!a(u),onClick:h[4]||(h[4]=y=>w("sum")),class:"!font-normal"},{default:t(()=>[l(" Сума")]),_:1},8,["sortingUp","sortingDown"])]),_:1}),s(S,null,{default:t(()=>[l(" Контрагент ")]),_:1}),s(S,null,{default:t(()=>[s(M,{sortingUp:a(n)==="total_left"&&a(u),sortingDown:a(n)==="total_left"&&!a(u),onClick:h[5]||(h[5]=y=>w("total_left")),class:"!font-normal"},{default:t(()=>[l(" Залишок у касі")]),_:1},8,["sortingUp","sortingDown"])]),_:1}),s(S,null,{default:t(()=>[l("Каса")]),_:1}),s(S,null,{default:t(()=>[l("Коментар")]),_:1})]),items:t(()=>[(C(!0),V(j,null,z(a(f),y=>(C(),P(Z,{key:y._id,transaction:y,onDeleteAction:He=>$(y._id)},null,8,["transaction","onDeleteAction"]))),128))]),_:1},8,["pageTable","endPage"])]),_:1})}}});export{St as default};
