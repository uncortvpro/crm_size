import{u as O,_ as F}from"./RemoveClient.vue.bdaf3c25.js";import{_ as L,a as j,b as q}from"./ButtonOpacityDelete.c7ad1d9a.js";import{_ as H}from"./ButtonSortingTable.vue.a53c6079.js";import{_ as z,a as G,b as J,c as K,d as Q,e as W}from"./Table.vue.78a9058a.js";import{_ as X}from"./CurrencyText.2a14458a.js";import{f as y,g as Y,o as $,j as D,w as t,a as P,t as u,b as e,d as n,k as h,l,n as A,i as B,q as C,s as Z,c as tt,v as et,F as nt}from"./entry.ad253c89.js";import{_ as ot}from"./ProfilePage.vue.ab422e31.js";import"./useSorting.545b79bc.js";import"./ButtonOpacityBorder.118ed6ff.js";import"./ButtonOpacity.5662e7b3.js";import"./Modal.vue.e0e0aebd.js";import"./ui.config.512a62ad.js";import"./CrossInCircle.188bfecb.js";import"./nuxt-icon.6754b23a.js";import"./Search.34a49a72.js";import"./Edit.1a66a103.js";import"./Delete.c18c5634.js";import"./ArrowRight.68b73360.js";import"./ButtonText.03577fca.js";import"./cn.a642df04.js";import"./ArrowTop.39ccaa63.js";import"./index.665de362.js";import"./index.674746b4.js";const lt={class:"max-w-[200px] w-full inline-block truncate"},st={class:"font-medium leading-[130%] max-w-[200px] inline-block truncate"},at=y({__name:"TableItemClients",props:{client:{}},emits:["deleteAction"],setup(R,{emit:r}){const g=r,I=()=>{g("deleteAction")};return Y(),(a,T)=>{const m=z,b=X,k=G,U=J,p=L,d=j,v=K;return $(),D(v,null,{header:t(()=>{var s;return[P("span",lt,u((s=a.client)==null?void 0:s.name),1)]}),elements:t(({active:s})=>[e(m,{vIf:s},{title:t(()=>[n("Ім’я")]),value:t(()=>{var o;return[P("span",st,u((o=a.client)==null?void 0:o.name),1)]}),_:2},1032,["vIf"]),e(m,{vIf:s},{title:t(()=>[n("Номер телефону")]),value:t(()=>{var o;return[n(u((o=a.client)==null?void 0:o.phone),1)]}),_:2},1032,["vIf"]),e(m,{vIf:s},{title:t(()=>[n("Email")]),value:t(()=>{var o;return[n(u((o=a.client)==null?void 0:o.email),1)]}),_:2},1032,["vIf"]),e(m,{vIf:s},{title:t(()=>[n("Instagram")]),value:t(()=>{var o;return[n(u((o=a.client)==null?void 0:o.instagram),1)]}),_:2},1032,["vIf"]),e(m,{vIf:s},{title:t(()=>[n("Історія покупок ")]),value:t(()=>[n(u(a.client.orders.length)+" замовлень",1)]),_:2},1032,["vIf"]),e(m,{vIf:s},{title:t(()=>[n("Тотал сума покупок ")]),value:t(()=>{var o;return[n(u((o=a.client)==null?void 0:o.total_price_sum),1),e(b)]}),_:2},1032,["vIf"]),e(m,{vIf:s},{title:t(()=>[n("Дата останньої покупки")]),value:t(()=>{var o;return[n(u((o=a.client)==null?void 0:o.latest_order_date),1)]}),_:2},1032,["vIf"]),e(m,{vIf:s},{title:t(()=>[n("Статус")]),value:t(()=>[e(k,{color:a.client.status.colour},{default:t(()=>{var o,w;return[n(u((w=(o=a.client)==null?void 0:o.status)==null?void 0:w.status),1)]}),_:1},8,["color"])]),_:2},1032,["vIf"]),e(m,{vIf:s,class:"3xl:hidden col-span-2"},{title:t(()=>[e(U,null,{default:t(()=>[n("Детальніше")]),_:1})]),_:2},1032,["vIf"])]),"additional-buttons":t(()=>[e(p,{class:"flex-shrink-0",onClick:T[0]||(T[0]=h(s=>("navigateTo"in a?a.navigateTo:l(A))("/profile/edit_client/"+a.client._id),["stop"]))}),e(d,{class:"flex-shrink-0",onClick:h(I,["stop"])},null,8,["onClick"])]),_:1})}}}),yt=y({__name:"clients",setup(R){const r=O(),g=B(!1),I=B(""),a=C(()=>r.clients),T=C(()=>r.page),m=C(()=>r.endPage),b=()=>r.fetchClients(),k=i=>r.setPage(i),U=i=>r.searchClients(i),p=C(()=>r.sorting),d=C(()=>r.reverseSorting),v=i=>{r.setSorting(i)},s=i=>{g.value=i},o=i=>{I.value=i},w=i=>{o(i),s(!0)};return b(),(i,_)=>{const V=F,x=q,S=H,f=Q,E=at,M=W,N=ot;return $(),D(N,{title:"Клієнти"},{content:t(()=>[P("div",null,[e(V,{modelValue:l(g),"onUpdate:modelValue":_[0]||(_[0]=c=>Z(g)?g.value=c:null),clientId:l(I),onSwitchModal:s},null,8,["modelValue","clientId"]),e(x,{onAdd:_[1]||(_[1]=c=>("navigateTo"in i?i.navigateTo:l(A))("new_client")),onSearch:U},{add_name:t(()=>[n(" Додати клієнта ")]),_:1}),e(M,{pageTable:l(T),endPage:l(m),onSetPage:k},{headers:t(()=>[e(f,null,{default:t(()=>[e(S,{sortingUp:l(p)==="name"&&l(d),sortingDown:l(p)==="name"&&!l(d),onClick:_[2]||(_[2]=c=>v("name")),class:"!font-normal"},{default:t(()=>[n(" Ім’я")]),_:1},8,["sortingUp","sortingDown"])]),_:1}),e(f,null,{default:t(()=>[n("Номер телефону")]),_:1}),e(f,null,{default:t(()=>[n("Email")]),_:1}),e(f,null,{default:t(()=>[n("Instagram")]),_:1}),e(f,null,{default:t(()=>[n("Історія покупок ")]),_:1}),e(f,null,{default:t(()=>[e(S,{sortingUp:l(p)==="total_price_sum"&&l(d),sortingDown:l(p)==="total_price_sum"&&!l(d),onClick:_[3]||(_[3]=c=>v("total_price_sum")),class:"!font-normal"},{default:t(()=>[n(" Тотал сума покупок")]),_:1},8,["sortingUp","sortingDown"])]),_:1}),e(f,null,{default:t(()=>[e(S,{sortingUp:l(p)==="latest_order_date"&&l(d),sortingDown:l(p)==="latest_order_date"&&!l(d),onClick:_[4]||(_[4]=c=>v("latest_order_date")),class:"!font-normal"},{default:t(()=>[n(" Дата останньої покупки")]),_:1},8,["sortingUp","sortingDown"])]),_:1}),e(f,null,{default:t(()=>[n("Статус")]),_:1})]),items:t(()=>[($(!0),tt(nt,null,et(l(a),c=>($(),D(E,{key:c._id,client:c,onDeleteAction:it=>w(c._id)},null,8,["client","onDeleteAction"]))),128))]),_:1},8,["pageTable","endPage"])])]),_:1})}}});export{yt as default};
