import{a as k}from"./SelectProfile.vue.5c9b5c98.js";import{u as B}from"./useSorting.9908e62e.js";import{g as O,f as U,e as M}from"./entry.898c0673.js";import{a as l,k as $,l as x,F as N,G as C,u as i,H as g,I as w,f as P,V as T,Q as E}from"./swiper-vue.36f73e51.js";import{_ as F}from"./LabelProfile.vue.6b6d5235.js";import{_ as I,a as D}from"./ModalTitle.vue.c57cba72.js";import{_ as G}from"./ButtonOpacityBorder.1f2ac977.js";import{w as H}from"./Button.vue.e3fb8d91.js";const L=O("warehousesStore",()=>{const d=[{id:1,name:"Склад готової продукції",secondName:"finishedWarehouse"},{id:2,name:"Склад дистриб’ютора",secondName:"distributorWarehouse"},{id:3,name:"Склад матеріалів",secondName:"warehouseMaterials"}],m=l({finishedWarehouse:"",distributorWarehouse:"",warehouseMaterials:""}),u=l({finishedWarehouse:[],distributorWarehouse:[],warehouseMaterials:[]}),r=l({finishedWarehouse:1,distributorWarehouse:1,warehouseMaterials:1}),t=l({finishedWarehouse:"",distributorWarehouse:"",warehouseMaterials:""}),n=l({finishedWarehouse:1,distributorWarehouse:1,warehouseMaterials:1}),h=(e,o)=>{m.value[s(o)]=e,p(o)},b=(e,o)=>{u.value[s(o)]=e},c=(e,o)=>{if(e===0)return!1;r.value[s(o)]=e,p(o)},W=(e,o)=>{n.value[s(o)]=e};function s(e){const o=d.find(V=>V.id===e);return(o==null?void 0:o.secondName)||d[0].secondName}function v(e){const o=d.find(V=>V.id===e);return(o==null?void 0:o.name)||d[0].name}const f=l({finishedWarehouse:"",distributorWarehouse:"",warehouseMaterials:""}),_=l({finishedWarehouse:!1,distributorWarehouse:!1,warehouseMaterials:!1}),a=(e,o)=>{B(e,_,f,p,o,s)};function S(e,o){U(`${M()}/delete_product`,{body:{product_id:e}}).then(V=>{V.message===!0&&p(o)})}function y(e,o){t.value[s(o)]=e,p(o)}function p(e){U(`${M()}/products`,{body:{page:r.value[s(e)],per_page:10,keyword:t.value[s(e)],warehouse:v(e),subwarehouse:m.value[s(e)],sort_by:f.value[s(e)],reverse_sort:_.value[s(e)]}}).then(o=>{b(o.products,e),W(o.total_pages,e)}).catch(o=>{console.error(o)})}return{warehouseProducts:u,fetchProducts:p,searchProducts:y,warehouses:d,warehouseType:s,setSubwarehouse:h,deleteProducts:S,page:r,endPage:n,setPage:c,setSorting:a,sorting:f,reverseSorting:_}}),Q=$({__name:"SelectWarehouse",setup(d){const m=L(),u=x(()=>m.warehouses),r=x(()=>u.value.map(t=>t.name));return(t,n)=>{const h=k;return N(),C(h,{options:i(r)},null,8,["options"])}}}),R=$({__name:"ModalAddSubwarehouse",emits:["actionSuccess"],setup(d,{emit:m}){const u=m,r=()=>{u("actionSuccess")},t=l(""),n=l(""),h=()=>{U(`${M()}/add_subwarehouse`,{body:{warehouse:n.value,subwarehouse:t.value}}).then(b=>{b.message&&r()})};return(b,c)=>{const W=Q,s=F,v=I,f=G,_=D;return N(),C(_,{title:"Додати підсклад",ui:{width:"!max-w-[414px]"}},{default:g(()=>[w(s,{class:"mt-[15px] md:mt-[20px] col-span-2 md:col-span-1",label:"Склад:"},{default:g(()=>[w(W,{modelValue:i(n),"onUpdate:modelValue":c[0]||(c[0]=a=>P(n)?n.value=a:null),valueSelect:i(n)},null,8,["modelValue","valueSelect"])]),_:1}),w(s,{class:"mt-[15px] md:mt-[20px]",label:"Введіть підсклад:"},{default:g(()=>[w(v,{modelValue:i(t),"onUpdate:modelValue":c[1]||(c[1]=a=>P(t)?t.value=a:null)},null,8,["modelValue"])]),_:1}),w(f,{disabled:!i(t)||!i(n),onClick:h,class:"self-center mt-[25px]"},{default:g(()=>[T("Зберегти")]),_:1},8,["disabled"])]),_:1})}}}),A="+ Додати інший підсклад",ee=$({__name:"SelectSubwarehouse",props:{modelValue:{},placeholder:{type:Boolean}},emits:["actionUpdate","update:modelValue"],setup(d,{emit:m}){const u=l(""),r=l(!1),t=a=>{r.value=a},n=m,h=()=>{n("actionUpdate")},b=()=>{n("update:modelValue",u.value)},c=l([]),W=x(()=>c.value.map(a=>a.subwarehouse)),s=x(()=>[...W.value,A]),v=()=>{U(`${M()}/subwarehouses`).then(a=>{c.value=a.subwarehouses})},f=a=>{if(a===A)return t(!0),!1;b(),h()};v(),H(()=>u.value,()=>{f(u.value)});const _=async()=>{await v(),t(!1)};return(a,S)=>{const y=k,p=R;return N(),E("div",null,[w(y,{placeholder:a.placeholder?"Оберіть склад":void 0,modelValue:i(u),"onUpdate:modelValue":S[0]||(S[0]=e=>P(u)?u.value=e:null),options:i(s),valueSelect:a.modelValue},null,8,["placeholder","modelValue","options","valueSelect"]),w(p,{modelValue:i(r),"onUpdate:modelValue":S[1]||(S[1]=e=>P(r)?r.value=e:null),onActionSuccess:_},null,8,["modelValue"])])}}});export{Q as _,ee as a,L as u};
