import{_ as K}from"./ModalWarning.vue.cf3f70e6.js";import{_ as X}from"./ModalAddCashier.vue.be57b6f6.js";import{_ as ee}from"./ButtonOpacity.1ca87902.js";import{_ as R}from"./CurrencyText.3d61b5e4.js";import{f as U,e as A,_ as te,a as se,n as L,g as ne}from"./entry.e567a446.js";import{c as O}from"./cn.a642df04.js";import{k as B,F as C,Q as V,G as P,H as e,Z as H,R as m,U as h,_ as E,V as r,I as t,u as a,a as x,f as W,a4 as j,a3 as z,a5 as oe,a0 as ae,a1 as ie,Y as F,l as I}from"./swiper-vue.c2b88c58.js";import le from"./Cross.a6152998.js";import{_ as re,a as ce}from"./ButtonOpacityEdit.29d9cdbe.js";import{_ as pe}from"./ButtonSortingTable.vue.fee2665a.js";import{a as me,b as ue,c as _e}from"./Table.vue.bc21cef9.js";import{_ as de}from"./TransitionTableCell.vue.58c62f12.js";import{_ as fe}from"./ButtonOpacityDelete.d230a659.js";import{u as N}from"./useDate.d306248e.js";import{_ as xe}from"./ProfilePage.vue.e06eb2c8.js";import{u as ge}from"./useSorting.9414d803.js";import"./Modal.vue.684dd50f.js";import"./ui.config.28a3590b.js";import"./ModalTitle.vue.dd0c4a1d.js";import"./Header2.aa18153b.js";import"./LabelProfile.vue.29b0aa91.js";import"./Radio.447f2dd6.js";import"./tw-merge.c375e922.js";import"./uid.12f507af.js";import"./useFormGroup.a119c6c7.js";import"./Button.vue.09b0195d.js";import"./nuxt-link.793ce550.js";import"./nuxt-icon.c7004446.js";import"./ButtonOpacityBorderAddItem.b84c969b.js";import"./CrossInCircle.b520091a.js";import"./Edit.193524a1.js";import"./ArrowRight.e5c2102e.js";import"./ButtonText.e961c12d.js";import"./ArrowTop.abb4671e.js";import"./Search.ca21635d.js";import"./Delete.477f669b.js";const he=m("span",{class:"w-full h-[1px] md:h-[2px] bg-beige-2 block rotate-[45deg] absolute left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%]"},null,-1),ve=m("span",{class:"w-full h-[1px] md:h-[2px] bg-beige-2 block rotate-[-45deg] absolute left-[50%] top-[50%] translate-x-[-50%] translate-y-[-50%]"},null,-1),be={class:"text-[11px] text-black font-medium md:text-[12px] xl:text-[15px]"},we={class:"text-[22px] mt-[8px] xl:nt-[10px] md:text-[27px] xl:text-[30px] font-semibold"},Ce={class:"mt-[12px] xl:mt-[15px] grid grid-cols-2 gap-y-[5px]"},ke=m("p",{class:"text-[7px] md:text-[10px]"},"Доходи",-1),ye=m("p",{class:"text-[7px] md:text-[10px]"},"Витрати",-1),$e={class:"text-[7px] md:text-[10px] flex items-center gap-[5px]"},Te=m("span",{class:"w-[4px] inline-block h-[4px] rounded-[50%] bg-[#8ED400]"},null,-1),Se={class:"text-[7px] md:text-[10px] flex items-center gap-[5px]"},Pe=m("span",{class:"w-[4px] inline-block h-[4px] rounded-[50%] bg-[#E33629]"},null,-1),De=B({__name:"CashierItem",props:{allCashiers:{type:Boolean},cashier:{}},emits:["successDelete"],setup(y,{emit:i}){const d=y,v=i,o=()=>{v("successDelete")},u=()=>{U(`${A()}/delete_cashier`,{body:{cashier_id:d.cashier._id}}).then(s=>{s.message&&o()})};return(s,_)=>{var p,n,l,w,T;const b=ee,c=R;return C(),V("div",{class:E(("cn"in s?s.cn:a(O))("bg-beige relative group rounded-[10px] w-full p-[15px] hover:opacity-100 duration-hover pr-[40px] opacity-60 xl:pr-[52px] lg:px-[20px] text-black",{"opacity-60":!s.allCashiers}))},[s.allCashiers?H("",!0):(C(),P(b,{key:0,onClick:u,class:"absolute is-hover:opacity-0 group-hover:opacity-100 duration-hover w-[14px] h-[14px] right-[10%]"},{default:e(()=>[he,ve]),_:1})),m("p",be,h((p=s.cashier)==null?void 0:p.name),1),m("p",{class:E(["text-[7px] md:text-[10px] mt-[5px]",{"opacity-0":s.allCashiers}])},h((n=s.cashier)==null?void 0:n.type),3),m("p",we,[r(h((l=s.cashier)==null?void 0:l.balance),1),t(c)]),m("div",Ce,[ke,ye,m("p",$e,[Te,r(" "+h((w=s.cashier)==null?void 0:w.incomes)+" ",1),t(c)]),m("p",Se,[Pe,r(" "+h((T=s.cashier)==null?void 0:T.expenses)+" ",1),t(c)])])],2)}}}),Ie={},Ve={class:"bg-beige w-full rounded-[10px] flex flex-col items-center justify-center gap-[5px] self-stretch opacity-60 text-black"},Ue=m("p",{class:"text-[11px] text-black font-medium md:text-[12px] xl:text-[15px]"}," Додати касу ",-1);function Ae(y,i){const d=le;return C(),V("button",Ve,[t(d,{class:"!w-[21px] !h-[21px] xl:!w-[31px] xl:!h-[31px] stroke-beige-2"}),Ue])}const Be=te(Ie,[["render",Ae]]),Me={class:"mb-[25px] xl:mb-[31px]"},Ee=B({__name:"CashierList",setup(y){const i=x([]),d=x(0),v=x(0),o=x(0),u=x(!1),s=c=>{u.value=c},_=()=>{U(`${A()}/cashiers`).then(c=>{console.log(c),i.value=c.cashiers,d.value=c.totalBalance,v.value=c.total_expenses,o.value=c.total_incomes})},b=()=>{s(!1),_()};return _(),(c,p)=>{const n=X,l=De,w=ae,T=Be,D=ie;return C(),V("div",Me,[t(n,{onSuccessAction:b,modelValue:a(u),"onUpdate:modelValue":p[0]||(p[0]=$=>W(u)?u.value=$:null)},null,8,["modelValue"]),t(D,{class:"swiper_cashiers w-full",modules:["SwiperFreeMode"in c?c.SwiperFreeMode:a(oe)],spaceBetween:30,slidesPerView:"auto",breakpoints:{320:{slidesPerView:2},576:{slidesPerView:3},992:{slidesPerView:2},1100:{slidesPerView:3},1200:{slidesPerView:4},1400:{slidesPerView:5},1600:{slidesPerView:6},1800:{slidesPerView:7}}},{default:e(()=>[t(w,{class:"!h-auto"},{default:e(()=>[t(l,{class:"border-beige-1 border-[2px] h-full !opacity-100",allCashiers:"",cashier:{balance:a(d),expenses:a(v),incomes:a(o),name:"Всі каси",type:"Готівкова"}},null,8,["cashier"])]),_:1}),(C(!0),V(j,null,z(a(i),$=>(C(),P(w,{key:$._id,class:"!h-auto"},{default:e(()=>[t(l,{onSuccessDelete:_,class:"h-full",cashier:$},null,8,["cashier"])]),_:2},1024))),128)),t(w,{class:"!h-auto"},{default:e(()=>[t(T,{onClick:p[1]||(p[1]=$=>s(!0)),class:"h-full"})]),_:1})]),_:1},8,["modules"])])}}}),Fe={class:"max-w-[200px] w-full inline-block truncate"},Ne={class:"font-medium leading-[130%] max-w-[200px] inline-block truncate"},Re={class:"inline-block max-w-[120px] truncate"},Le=B({__name:"TableItemTransaction",props:{transaction:{}},emits:["deleteAction"],setup(y,{emit:i}){const d=i,v=()=>{d("deleteAction")};return se(),(o,u)=>{const s=de,_=R,b=re,c=fe,p=me;return C(),P(p,null,{header:e(()=>[m("span",Fe,h(("useDate"in o?o.useDate:a(N))(o.transaction.date)),1)]),elements:e(({active:n})=>[t(s,{vIf:n},{title:e(()=>[r("Дата ")]),value:e(()=>[m("span",Ne,h(("useDate"in o?o.useDate:a(N))(o.transaction.date)),1)]),_:2},1032,["vIf"]),t(s,{vIf:n},{title:e(()=>[r("Сума")]),value:e(()=>{var l;return[m("span",{class:E(("cn"in o?o.cn:a(O))("text-[12px] md:text-[15px] font-medium",{"text-[#8ED400]":String(o.transaction.sum)[0]!=="-","text-[#E33629]":String(o.transaction.sum)[0]==="-"}))},[r(h((l=o.transaction)==null?void 0:l.sum),1),t(_)],2)]}),_:2},1032,["vIf"]),t(s,{vIf:n},{title:e(()=>[r("Контрагент")]),value:e(()=>{var l;return[r(h((l=o.transaction)==null?void 0:l.counterpartie),1)]}),_:2},1032,["vIf"]),t(s,{vIf:n},{title:e(()=>[r("Залишок у касі")]),value:e(()=>{var l;return[r(h((l=o.transaction)==null?void 0:l.total_left),1)]}),_:2},1032,["vIf"]),t(s,{vIf:n},{title:e(()=>[r("Каса")]),value:e(()=>{var l;return[r(h((l=o.transaction)==null?void 0:l.cashier)+" замовлень",1)]}),_:2},1032,["vIf"]),t(s,{vIf:n},{title:e(()=>[r("Коментар ")]),value:e(()=>[m("span",Re,h(o.transaction.comment),1)]),_:2},1032,["vIf"])]),"additional-buttons":e(()=>[t(b,{class:"flex-shrink-0",onClick:u[0]||(u[0]=F(n=>("navigateTo"in o?o.navigateTo:a(L))("/profile/edit_transaction/"+o.transaction._id),["stop"]))}),t(c,{class:"flex-shrink-0",onClick:F(v,["stop"])},null,8,["onClick"])]),_:1})}}}),Oe=ne("financeStore",()=>{const y=x([]),i=x(1),d=x(""),v=x(1),o=x(""),u=x(!1),s=n=>{ge(n,u,o,p)};function _(n){d.value=n,p()}function b(n){if(n===0)return!1;i.value=n,p()}function c(n){console.log(n),U(`${A()}/delete_transaction`,{body:{transaction_id:n}}).then(l=>{l.message===!0&&p()})}function p(){U(`${A()}/transactions`,{body:{page:i.value,per_page:10,keyword:d.value,sort_by:o.value,reverse_sort:u.value}}).then(n=>{console.log(n),y.value=n.transactions,v.value=n.total_pages}).catch(n=>{console.error(n)})}return{fetchTransactions:p,searchTransactions:_,deleteTransactions:c,setPage:b,transactions:y,endPage:v,keyWord:d,page:i,setSorting:s,sorting:o,reverseSorting:u}}),$t=B({__name:"finance",setup(y){const i=Oe(),d=I(()=>i.transactions),v=I(()=>i.page),o=I(()=>i.endPage),u=f=>i.setPage(f),s=I(()=>i.sorting),_=I(()=>i.reverseSorting),b=f=>{i.setSorting(f)},c=()=>{i.fetchTransactions()},p=x(""),n=async()=>{i.deleteTransactions(p.value),D(!1)},l=f=>i.searchTransactions(f),w=x(!1),T=f=>{$(f),D(!0)},D=f=>{w.value=f},$=f=>{p.value=f};return c(),(f,g)=>{const G=K,Q=Ee,Y=ce,M=pe,S=ue,Z=Le,q=_e,J=xe;return C(),P(J,{title:"Фінанси"},{content:e(()=>[a(p)?(C(),P(G,{key:0,modelValue:a(w),"onUpdate:modelValue":g[0]||(g[0]=k=>W(w)?w.value=k:null),onCloseModal:g[1]||(g[1]=k=>D(!1)),onConfirm:n},{default:e(()=>[r("Ви впевнені, що хочете видалити транзакцію?")]),_:1},8,["modelValue"])):H("",!0),t(Q),t(Y,{onSearch:l,onAdd:g[2]||(g[2]=k=>("navigateTo"in f?f.navigateTo:a(L))("new_transaction"))},{add_name:e(()=>[r(" Додати транзакцію")]),_:1}),t(q,{pageTable:a(v),endPage:a(o),onSetPage:u},{headers:e(()=>[t(S,null,{default:e(()=>[t(M,{sortingUp:a(s)==="date"&&a(_),sortingDown:a(s)==="date"&&!a(_),onClick:g[3]||(g[3]=k=>b("date")),class:"!font-normal"},{default:e(()=>[r(" Дата")]),_:1},8,["sortingUp","sortingDown"])]),_:1}),t(S,null,{default:e(()=>[t(M,{sortingUp:a(s)==="sum"&&a(_),sortingDown:a(s)==="sum"&&!a(_),onClick:g[4]||(g[4]=k=>b("sum")),class:"!font-normal"},{default:e(()=>[r(" Сума")]),_:1},8,["sortingUp","sortingDown"])]),_:1}),t(S,null,{default:e(()=>[r(" Контрагент ")]),_:1}),t(S,null,{default:e(()=>[t(M,{sortingUp:a(s)==="total_left"&&a(_),sortingDown:a(s)==="total_left"&&!a(_),onClick:g[5]||(g[5]=k=>b("total_left")),class:"!font-normal"},{default:e(()=>[r(" Залишок у касі")]),_:1},8,["sortingUp","sortingDown"])]),_:1}),t(S,null,{default:e(()=>[r("Каса")]),_:1}),t(S,null,{default:e(()=>[r("Коментар")]),_:1})]),items:e(()=>[(C(!0),V(j,null,z(a(d),k=>(C(),P(Z,{key:k._id,transaction:k,onDeleteAction:He=>T(k._id)},null,8,["transaction","onDeleteAction"]))),128))]),_:1},8,["pageTable","endPage"])]),_:1})}}});export{$t as default};
