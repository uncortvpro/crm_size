import{_ as te}from"./disposables.c5f77ac8.js";import oe from"./Delete.604d9d28.js";import{_ as ne}from"./DivBorderBg.3e832f6e.js";import{_ as N,b as ae,u as se,a as le}from"./CurrencyText.f2a59851.js";import{_ as re}from"./AlertDanger.41b4b8e2.js";import{_ as ie}from"./AlertSuccess.a53bbbe6.js";import{u as ue,_ as pe,a as me}from"./useDateToString.60620365.js";import{_ as ce}from"./Header2.b9fe70ca.js";import{f as _e,g as de,c as L,d as z,e as j,_ as fe,a as ge,b as ve}from"./Table.vue.df6ca90d.js";import{f as U,o as d,j as b,w as e,b as t,a as H,l as i,d as n,t as g,c as x,F as q,v as E,m as B,i as f,q as G,s as J,x as he,y as Ce,z as be,A as F,B as ye}from"./entry.b22a8ab3.js";import{_ as Se,u as R,a as Ie}from"./useDate.0c3e76ad.js";import{_ as De}from"./ProfilePage.vue.4b88ce31.js";import"./ButtonOpacity.d72ea513.js";import"./nuxt-icon.e66fe507.js";import"./tw-merge.697a18e2.js";import"./ui.config.3c363c2b.js";import"./index.3760395d.js";import"./index.3a8df508.js";import"./useFormGroup.99024774.js";import"./Calendar.f3c9ecc3.js";import"./nuxt-link.0fe9cd25.js";import"./ArrowRight.704dfd26.js";import"./ButtonText.03633c44.js";import"./Photo.e2d0bb25.js";import"./User.2b7b0ea5.js";import"./ArrowTop.fe2b2d44.js";import"./Close.1934dd2d.js";import"./ThreeDots.dd4c50fc.js";const $e=["src"],Te=U({__name:"TableItemOrderDetails",props:{product:{}},setup(T){return(m,y)=>{const o=_e,c=de,r=N,v=L;return d(),b(v,{isMobileClose:!1,class:"grid-cols-order-details-modal-xs gap-x-[10px] md:grid-cols-order-details-modal-md"},{elements:e(()=>[t(o,{class:"!grid-cols-1 !col-span-1 row-span-5"},{default:e(()=>[H("img",{class:"max-w-[40px]",src:("useBase64"in m?m.useBase64:i(ue))(m.product.picture)||"",alt:""},null,8,$e)]),_:1}),t(c,{class:"col-span-2"},{title:e(()=>[n("Найменування")]),value:e(()=>{var s;return[n(g((s=m.product)==null?void 0:s.name),1)]}),_:1}),t(c,{class:"col-span-2"},{title:e(()=>[n("Розмір")]),value:e(()=>{var s;return[n(g((s=m.product)==null?void 0:s.size),1)]}),_:1}),t(c,{class:"col-span-2"},{title:e(()=>[n("Кількість")]),value:e(()=>{var s;return[n(g((s=m.product)==null?void 0:s.amount),1)]}),_:1}),t(c,{class:"col-span-2"},{title:e(()=>[n("Ціна")]),value:e(()=>{var s;return[n(g((s=m.product)==null?void 0:s.price),1),t(r)]}),_:1})]),_:1})}}}),we=U({__name:"ModalOrderDetails",props:{products:{},isOpen:{type:Boolean},ui:{},label:{}},setup(T){return(m,y)=>{const o=z,c=Te,r=j,v=Se;return d(),b(v,{ui:{width:"!max-w-[923px]"},label:m.label},{default:e(()=>[t(r,{pagination:!1,class:"!mt-[20px]"},{headers:e(()=>[t(o),t(o,null,{default:e(()=>[n("Найменування")]),_:1}),t(o,null,{default:e(()=>[n("Розмір")]),_:1}),t(o,null,{default:e(()=>[n("Кількість")]),_:1}),t(o,null,{default:e(()=>[n("Ціна")]),_:1})]),items:e(()=>[(d(!0),x(q,null,E(m.products,(s,h)=>(d(),b(c,{key:h,product:s},null,8,["product"]))),128))]),_:1})]),_:1},8,["label"])}}}),Ue=U({__name:"TableItemShoppingHistory",props:{order:{}},emits:["showOrderDetails"],setup(T,{emit:m}){const y=T,o=m,c=()=>{o("showOrderDetails",y.order._id)};return(r,v)=>{const s=fe,h=N,w=ge,S=ve,a=Ie,C=L;return d(),b(C,{isMobileClose:!0},{header:e(()=>{var _;return[n(g(("useDate"in r?r.useDate:i(R))((_=r.order)==null?void 0:_.date)),1)]}),elements:e(({active:_})=>[t(s,{vIf:_},{title:e(()=>[n("Дата покупки")]),value:e(()=>{var u;return[n(g(("useDate"in r?r.useDate:i(R))((u=r.order)==null?void 0:u.date)),1)]}),_:2},1032,["vIf"]),t(s,{vIf:_},{title:e(()=>[n("Сума замовлення")]),value:e(()=>{var u;return[n(g((u=r.order)==null?void 0:u.total_sum),1),t(h)]}),_:2},1032,["vIf"]),t(s,{vIf:_},{title:e(()=>[n("Товари")]),value:e(()=>{var u;return[n(g((u=r.order)==null?void 0:u.products.length),1)]}),_:2},1032,["vIf"]),t(s,{vIf:_},{title:e(()=>[n("Оплата")]),value:e(()=>{var u;return[n(g((u=r.order)==null?void 0:u.payment),1)]}),_:2},1032,["vIf"]),r.order.status?(d(),b(s,{key:0,vIf:_,class:"3xl:w-[12%]"},{title:e(()=>[n("Статус замовлення")]),value:e(()=>[t(w,{color:r.order.status.colour},{default:e(()=>{var u;return[n(g((u=r.order)==null?void 0:u.status.status),1)]}),_:1},8,["color"])]),_:2},1032,["vIf"])):B("",!0),t(s,{vIf:_,class:"3xl:hidden col-span-2"},{title:e(()=>[t(S,{onClick:c},{default:e(()=>[n("Детальніше")]),_:1})]),_:2},1032,["vIf"])]),"additional-buttons":e(()=>[t(a,{onClick:c,class:"hidden 3xl:block"})]),_:1})}}}),ke=U({__name:"ClientShoppingHistory",props:{emailClient:{},shoppingHistoryItems:{},page:{},endPage:{},sorting:{},reverseSorting:{type:Boolean}},emits:["setPage","setSorting"],setup(T,{emit:m}){const y=T,o=m,c=a=>{o("setPage",a)},r=a=>{o("setSorting",a)},v=f(""),s=f(!1),h=a=>{s.value=a},w=a=>{v.value=a,h(!0)},S=G(()=>y.shoppingHistoryItems?y.shoppingHistoryItems.find(a=>a._id===v.value):!1);return(a,C)=>{const _=ce,u=we,k=ae,D=z,$=Ue,O=j;return d(),x("div",null,[t(_,null,{default:e(()=>[n("Історія покупок")]),_:1}),i(S)?(d(),b(u,{key:0,products:i(S).products,modelValue:i(s),"onUpdate:modelValue":C[0]||(C[0]=I=>J(s)?s.value=I:null),label:"Деталі замовлення",onCloseModal:h},null,8,["products","modelValue"])):B("",!0),t(O,{pageTable:a.page,endPage:a.endPage,onSetPage:c},{headers:e(()=>[t(D,null,{default:e(()=>[t(k,{sortingUp:a.sorting==="order_date"&&a.reverseSorting,sortingDown:a.sorting==="order_date"&&!a.reverseSorting,onClick:C[1]||(C[1]=I=>r("order_date")),class:"!font-normal"},{default:e(()=>[n(" Дата покупки")]),_:1},8,["sortingUp","sortingDown"])]),_:1}),t(D,null,{default:e(()=>[t(k,{sortingUp:a.sorting==="total_sum"&&a.reverseSorting,sortingDown:a.sorting==="total_sum"&&!a.reverseSorting,onClick:C[2]||(C[2]=I=>r("total_sum")),class:"!font-normal"},{default:e(()=>[n(" Сума замовлення")]),_:1},8,["sortingUp","sortingDown"])]),_:1}),t(D,null,{default:e(()=>[n("Товари")]),_:1}),t(D,null,{default:e(()=>[n("Оплата")]),_:1}),t(D,null,{default:e(()=>[n("Статус замовлення")]),_:1})]),items:e(()=>[(d(!0),x(q,null,E(a.shoppingHistoryItems,I=>(d(),b($,{key:I._id,order:I,onShowOrderDetails:w},null,8,["order"]))),128))]),_:1},8,["pageTable","endPage"])])}}}),Oe={class:"items-center gap-[40px] hidden lg:flex"},Pe={class:"flex flex-col items-center lg:hidden mt-[25px]"},lt=U({__name:"[client_id]",setup(T){se();const m=he(),y=G(()=>m.params.client_id),o=f({}),c=f({}),r=f(),v=f(""),s=f(""),h=f(1),w=f(1),S=f(""),a=f(!1),C=l=>{if(S.value!==l)return a.value=!0,S.value=l,$(),!1;if(a.value)return a.value=!1,$(),!1;if(!a.value)return a.value=!0,$(),!1},_=l=>{h.value=l};Ce(h,()=>{$()},{deep:!0});const u=(l,p)=>{o.value[p]=l},k=()=>{const l=localStorage.getItem("token"),p=new FormData;p.append("additional_phone",o.value.additional_phone),p.append("email",o.value.email),p.append("gender",o.value.gender),p.append("birthday",me(o.value.birthday)),p.append("instagram",o.value.instagram),p.append("telegram",o.value.telegram),p.append("comment",o.value.comment),p.append("status",o.value.status),p.append("userpic",o.value.userpic),p.append("phone",o.value.phone),p.append("name",o.value.name),p.append("access_token",l||""),r.value=p},D=()=>{k(),be(`${F()}/update_client/${y.value}`,{method:"POST",body:r.value}).then(l=>{l.message==="Client updated successfully"?s.value="Клієнт успішно оновився!":v.value="Щось не вийшло!"})},$=()=>{ye(`${F()}/client_info`,{body:{client_id:y.value,page:h.value,per_page:5,sort_by:S.value,reverse_sort:a.value}}).then(l=>{console.log(l),w.value=l.total_pages,c.value=l.client_info,o.value.additional_phone=l.client_info.additional_phone,o.value.birthday=l.client_info.birthday,o.value.comment=l.client_info.comment,o.value.email=l.client_info.email,o.value.gender=l.client_info.gender,o.value.instagram=l.client_info.instagram,o.value.name=l.client_info.name,o.value.phone=l.client_info.phone,o.value.status=l.client_info.status.status,o.value.telegram=l.client_info.telegram,o.value.userpic=l.client_info.userpic})},O=l=>{P.value=l},I=l=>{O(!0)},P=f(!1);return $(),(l,p)=>{const V=te,M=oe,A=ne,K=le,Q=re,W=ie,X=pe,Y=ke,Z=De;return d(),b(Z,{title:"Редагувати клієнта"},{header:e(()=>[H("div",Oe,[t(V,{onClick:D},{default:e(()=>[n(" Оновити ")]),_:1}),t(A,{onClick:I,value:"Видалити",class:"w-fit"},{default:e(()=>[t(M,{class:"-order-10"})]),_:1})])]),content:e(()=>[t(K,{modelValue:i(P),"onUpdate:modelValue":p[0]||(p[0]=ee=>J(P)?P.value=ee:null),clientId:i(c)._id,onSwitchModal:O},null,8,["modelValue","clientId"]),i(v)?(d(),b(Q,{key:0},{default:e(()=>[n(g(i(v)),1)]),_:1})):B("",!0),i(s)?(d(),b(W,{key:1},{default:e(()=>[n(g(i(s)),1)]),_:1})):B("",!0),t(X,{labelStatus:"Змінити статус клієнта:",inputs:i(o),onUpdateInputs:u},null,8,["inputs"]),t(Y,{shoppingHistoryItems:i(c).orders,emailClient:i(c).email,page:i(h),endPage:i(w),sorting:i(S),reverseSorting:i(a),onSetSorting:C,onSetPage:_,class:"mt-[25px] xl:mt-[40px]"},null,8,["shoppingHistoryItems","emailClient","page","endPage","sorting","reverseSorting"]),H("div",Pe,[t(V,{disabled:""},{default:e(()=>[n(" Оновити ")]),_:1}),t(A,{onClick:I,value:"Видалити",class:"w-fit mt-[17px]"},{default:e(()=>[t(M,{class:"-order-10"})]),_:1})])]),_:1})}}});export{lt as default};
