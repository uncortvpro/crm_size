import{_ as le}from"./AlertDanger.303d1d16.js";import{_ as ne}from"./AlertSuccess.cf665faf.js";import{_ as L}from"./Header2.8e3d71ae.js";import{_ as ae,a as se}from"./ModalTitle.vue.942312dc.js";import{w as E,_ as j}from"./Button.vue.36206765.js";import{f as re,e as ue,n as ie}from"./entry.db39ecf4.js";import{o as Q}from"./index.8b734fbc.js";import{k as I,a as U,F as r,Q as y,I as e,u as f,f as M,R as $,a2 as D,a3 as H,G as C,H as t,V as a,U as k,Z as w,l as F,b as ce,Y as de}from"./swiper-vue.7d7207a4.js";import{_ as pe}from"./LabelProfile.vue.94dd0ab6.js";import{_ as me}from"./ButtonOpacityBorderAddItem.6696c7f7.js";import{a as _e,_ as fe}from"./SelectVariant.vue.0c9bdf14.js";import{_ as ve}from"./TextareaProfile.vue.42abf356.js";import{_ as N}from"./DivBorderBg.2c756f65.js";import{d as Y,f as xe,b as Z,e as Ve,a as ge,c as be}from"./Table.vue.751726a5.js";import{_ as ye}from"./Checkbox.vue.25143191.js";import{_ as he}from"./ButtonOpacityBorder.7535ad40.js";import{_ as Ue}from"./SearchBorder.vue.50db874d.js";import{_ as Ce}from"./InputProfileTable.1441ec10.js";import{_ as ke}from"./CurrencyText.960908c6.js";import{_ as $e}from"./ButtonOpacityDelete.6393d0c7.js";import{u as q}from"./useBase64.1efa7b71.js";import{u as Se}from"./ordersStore.b8c1de82.js";const we={key:0,class:"absolute top-[100%] left-0 w-full bg-beige max-h-[300px] overflow-y-scroll scroll_bar"},Te={key:0,class:"text-[9px] md:text-[12px] truncate px-[7px] py-[10px] md:px-[10px] md:pt-[15px] w-full text-left"},Pe=I({__name:"SearchClients",props:{name:{},email:{}},emits:["update:name","update:email"],setup(T,{emit:h}){const i=T,v=h,o=(d,V)=>{v("update:name",d),v("update:email",V)},n=U(null),x=U(!1),u=d=>{x.value=d},l=U(""),c=U([]),_=()=>{l.value=i.name||""},g=()=>{re(`${ue()}/clients`,{body:{keyword:l.value}}).then(d=>{c.value=d.clients}).catch(d=>{console.error(d)})};Q(n,d=>u(!1));const s=(d,V)=>{o(d,V),l.value=d,u(!1)};return E(()=>i.name,()=>{_()}),(d,V)=>{const P=ae,A=j;return r(),y("div",{class:"relative z-50",ref_key:"hiddenOutsideClickElement",ref:n},[e(P,{modelValue:f(l),"onUpdate:modelValue":V[0]||(V[0]=p=>M(l)?l.value=p:null),onFocus:V[1]||(V[1]=p=>u(!0)),onInput:g,class:"w-full"},null,8,["modelValue"]),f(x)?(r(),y("div",we,[$("div",null,[(r(!0),y(D,null,H(f(c),p=>(r(),C(A,{key:p._id,onClick:R=>s(p.name,p.email),class:"text-[9px] md:text-[12px] truncate px-[7px] py-[10px] md:px-[10px] md:pt-[15px] duration-hover hover:bg-beige-1 w-full text-left"},{default:t(()=>[a(k(p.name)+" ("+k(p.email)+") ",1)]),_:2},1032,["onClick"]))),128)),f(c).length===0?(r(),y("p",Te," Не знайдено ")):w("",!0)])])):w("",!0)],512)}}}),Be={class:"border-t border-beige-1"},Ie=I({__name:"TableItemAddVariationToOrder",props:{variation:{},modelValue:{},startItems:{}},emits:["update:modelValue"],setup(T,{emit:h}){const i=T,v=h,o=U(!1),n=F(()=>!!i.startItems.find(l=>l._id===i.variation._id)),x=()=>{o.value=n.value},u=()=>{if(o.value&&!n.value)return v("update:modelValue",[...i.modelValue,i.variation]),!1;if(!o.value){const l=i.modelValue.filter(c=>c._id!==i.variation._id);v("update:modelValue",l)}};return ce(o,()=>{u()}),x(),u(),(l,c)=>{const _=ye,g=Y,s=xe;return r(),y("tr",Be,[e(g,null,{default:t(()=>[e(_,{modelValue:f(o),"onUpdate:modelValue":c[0]||(c[0]=d=>M(o)?o.value=d:null),ui:{border:"border-black",rounded:"rounded-[2px]"}},null,8,["modelValue"])]),_:1}),e(g,null,{default:t(()=>[e(s,null,{default:t(()=>[a(k(l.variation.size),1)]),_:1})]),_:1}),e(g,null,{default:t(()=>[e(s,null,{default:t(()=>[a(k(l.variation.colour),1)]),_:1})]),_:1})])}}}),Ae={class:"table-auto w-full"},Oe=I({__name:"ModalAddVariationToOrder",props:{variations:{},selectedVariations:{}},emits:["update:selectedVariations","closeModal"],setup(T,{emit:h}){const i=T,v=h,o=()=>{v("update:selectedVariations",n.value),v("closeModal")},n=U([]),x=()=>{n.value=i.selectedVariations};return E(()=>i.selectedVariations,()=>{x()}),x(),(u,l)=>{const c=Z,_=Ie,g=N,s=he,d=se;return r(),C(d,{title:"Оберіть варіації"},{default:t(()=>[e(g,null,{default:t(()=>[$("table",Ae,[$("thead",null,[e(c),e(c,null,{default:t(()=>[a("Розмір")]),_:1}),e(c,null,{default:t(()=>[a("Колір")]),_:1})]),$("tbody",null,[(r(!0),y(D,null,H(u.variations,V=>(r(),C(_,{key:V._id,variation:V,modelValue:f(n),"onUpdate:modelValue":l[0]||(l[0]=P=>M(n)?n.value=P:null),startItems:u.selectedVariations},null,8,["variation","modelValue","startItems"]))),128))])])]),_:1}),e(s,{disabled:!1,onClick:o,class:"self-center mt-[25px]"},{default:t(()=>[a("Зберегти")]),_:1})]),_:1})}}}),Me=["src"],De=I({__name:"TableItemOrderProduct",props:{product:{}},emits:["deleteAction"],setup(T,{emit:h}){const i=h,v=()=>{i("deleteAction")};return(o,n)=>{const x=Y,u=Ve,l=Ce,c=ke,_=$e,g=ge;return r(),C(g,{isMobileClose:!1,class:"grid-cols-order-details-modal-xs gap-x-[10px] md:grid-cols-order-details-modal-md relative"},{elements:t(()=>[e(x,{class:"!grid-cols-1 !col-span-1 row-span-5"},{default:t(()=>[o.product.photos[0]?(r(),y("img",{key:0,class:"max-w-[40px]",src:("useBase64"in o?o.useBase64:f(q))(o.product.photos[0])||"",alt:""},null,8,Me)):w("",!0)]),_:1}),e(u,{class:"col-span-2"},{title:t(()=>[a("Найменування")]),value:t(()=>[a(k(o.product.name),1)]),_:1}),e(u,{class:"col-span-2"},{title:t(()=>[a("Розмір")]),value:t(()=>{var s;return[a(k((s=o.product)==null?void 0:s.size),1)]}),_:1}),e(u,{class:"col-span-2"},{title:t(()=>[a("Кількість")]),value:t(()=>[e(l,{class:"bg-beige-1",type:"number",modelValue:o.product.amount,"onUpdate:modelValue":n[0]||(n[0]=s=>o.product.amount=s)},null,8,["modelValue"])]),_:1}),e(u,{class:"col-span-2"},{title:t(()=>[a("На складі")]),value:t(()=>{var s;return[a(k((s=o.product)==null?void 0:s.in_stock),1)]}),_:1}),e(u,{class:"col-span-2"},{title:t(()=>[a("Ціна")]),value:t(()=>{var s;return[a(k((s=o.product)==null?void 0:s.price),1),e(c)]}),_:1}),e(u,{class:"col-span-2"},{title:t(()=>[]),value:t(()=>[e(_,{class:"flex-shrink-0 absolute right-0 top-0 3xl:relative",onClick:de(v,["stop"])},null,8,["onClick"])]),_:1})]),_:1})}}}),Fe={key:0,class:"absolute top-[100%] left-0 w-full bg-beige max-h-[300px] overflow-y-scroll scroll_bar"},Ee=["src"],He={key:0,class:"text-[9px] md:text-[12px] truncate px-[7px] py-[10px] md:px-[10px] md:pt-[15px] w-full text-left"},ze=I({__name:"ProductToOrderAdding",props:{modelValue:{}},emits:["update:modelValue"],setup(T,{emit:h}){const i=T,v=h,o=m=>{v("update:modelValue",m)},n=Se(),x=U(!1),u=U(null),l=U([]),c=U(""),_=U(!1),g=F(()=>n.addingProducts),s=F(()=>g.value.find(S=>S._id===c.value)),d=F(()=>s.value.variations.map(m=>({...m,category:s.value.category}))),V=m=>{x.value=m},P=m=>{c.value=m},A=m=>{P(m),V(!0)},p=()=>{l.value=i.modelValue},R=async m=>{await n.searchProducts(m),_.value=!0},J=m=>{const S=i.modelValue.filter(O=>O._id!==m),z=l.value.filter(O=>O._id!==m);o(S),l.value=z},K=()=>{_.value=!1};return Q(u,m=>K()),E(l,()=>{o(l.value)}),E(()=>i.modelValue,()=>{p()}),p(),(m,S)=>{const z=L,O=Oe,W=Ue,X=j,B=Z,ee=De,te=be,oe=N;return r(),C(oe,{class:"w-full flex flex-col"},{default:t(()=>[e(z,{class:"text-center"},{default:t(()=>[a(" Додати товари ")]),_:1}),f(c)?(r(),C(O,{key:0,modelValue:f(x),"onUpdate:modelValue":S[0]||(S[0]=b=>M(x)?x.value=b:null),selectedVariations:f(l),"onUpdate:selectedVariations":S[1]||(S[1]=b=>M(l)?l.value=b:null),variations:f(d),onCloseModal:S[2]||(S[2]=b=>V(!1))},null,8,["modelValue","selectedVariations","variations"])):w("",!0),$("div",{class:"relative z-50",ref_key:"hiddenOutsideClickElement",ref:u},[e(W,{theme:"beige",class:"mt-[15px] xl:mt-[25px]",onSearch:R}),f(_)?(r(),y("div",Fe,[$("div",null,[(r(!0),y(D,null,H(f(g),b=>(r(),C(X,{key:b._id,onClick:G=>A(b._id),class:"text-[9px] md:text-[12px] flex gap-[10px] items-center truncate px-[7px] py-[10px] md:px-[10px] md:pt-[15px] duration-hover hover:bg-beige-1 w-full text-left"},{default:t(()=>[b.photo?(r(),y("img",{key:0,src:("useBase64"in m?m.useBase64:f(q))(b.photo)||void 0,alt:"",class:"w-[23px] h-[28px] object-cover"},null,8,Ee)):w("",!0),a(" "+k(b.name),1)]),_:2},1032,["onClick"]))),128)),f(g).length===0?(r(),y("p",He," Не знайдено ")):w("",!0)])])):w("",!0)],512),$("div",null,[f(l).length>0?(r(),C(te,{key:0,pagination:!1,class:"!mt-[20px]"},{headers:t(()=>[e(B),e(B,null,{default:t(()=>[a("Найменування")]),_:1}),e(B,null,{default:t(()=>[a("Розмір")]),_:1}),e(B,null,{default:t(()=>[a("Кількість")]),_:1}),e(B,null,{default:t(()=>[a("На складі")]),_:1}),e(B,null,{default:t(()=>[a("Ціна")]),_:1})]),items:t(()=>[(r(!0),y(D,null,H(f(l),(b,G)=>(r(),C(ee,{key:G,product:b,onDeleteAction:je=>J(b._id||"")},null,8,["product","onDeleteAction"]))),128))]),_:1})):w("",!0)])]),_:1})}}}),Ne={action:"#"},Re={class:"flex flex-col 3xl:items-start 3xl:flex-row gap-[25px]"},Ge={class:"flex items-center gap-[15px] md:mt-[10px]"},Le=$("span",{class:"text-[9px] md:text-[10px] xl:text-[12px]"},"або",-1),_t=I({__name:"Order",props:{error:{},messageToUser:{},inputs:{}},emits:["updateInputs"],setup(T,{emit:h}){const i=h,v=(o,n)=>{i("updateInputs",o,n)};return(o,n)=>{const x=le,u=ne,l=L,c=Pe,_=pe,g=me,s=_e,d=ve,V=fe,P=N,A=ze;return r(),y(D,null,[o.error?(r(),C(x,{key:0},{default:t(()=>[a(k(o.error),1)]),_:1})):w("",!0),o.messageToUser?(r(),C(u,{key:1},{default:t(()=>[a(k(o.messageToUser),1)]),_:1})):w("",!0),$("form",Ne,[$("div",Re,[e(P,{class:"w-full 3xl:basis-[60%]"},{default:t(()=>[e(V,null,{default:t(()=>[e(l,{class:"col-span-2"},{default:t(()=>[a(" Інформація ")]),_:1}),e(_,{class:"col-span-2 md:col-span-1",label:"Обрати клієнта:"},{default:t(()=>[e(c,{name:o.inputs.client,"onUpdate:name":n[0]||(n[0]=p=>o.inputs.client=p),email:o.inputs.email,"onUpdate:email":n[1]||(n[1]=p=>o.inputs.email=p)},null,8,["name","email"])]),_:1}),$("div",Ge,[Le,e(g,{type:"button",onClick:n[2]||(n[2]=p=>("navigateTo"in o?o.navigateTo:f(ie))("/profile/new_client"))},{default:t(()=>[a("Додати клієнта")]),_:1})]),e(l,{class:"col-span-2 mt-[10px] xl:mt-[20px]"},{default:t(()=>[a(" Додаткова інформація ")]),_:1}),e(_,{class:"col-span-2 md:col-span-1",label:"Доставка:"},{default:t(()=>[e(s,{valueSelect:o.inputs.shipping,typeSelect:"shipping",typeVariant:"shipping",onUpdateValue:v},null,8,["valueSelect"])]),_:1}),e(_,{class:"col-span-2 md:col-span-1",label:"Обрати статус замовлення:"},{default:t(()=>[e(s,{valueSelect:o.inputs.status,typeSelect:"status",typeVariant:"order",onUpdateValue:v},null,8,["valueSelect"])]),_:1}),e(_,{class:"col-span-2 md:col-span-1",label:"Джерело замовлення:"},{default:t(()=>[e(s,{valueSelect:o.inputs.source,typeSelect:"source",typeVariant:"source",onUpdateValue:v},null,8,["valueSelect"])]),_:1}),e(_,{class:"col-span-2 md:col-span-1",label:"Оплата:"},{default:t(()=>[e(s,{valueSelect:o.inputs.payment,typeSelect:"payment",typeVariant:"payment",onUpdateValue:v},null,8,["valueSelect"])]),_:1}),e(_,{class:"col-span-2",label:"Коментар:"},{default:t(()=>[e(d,{modelValue:o.inputs.comment,"onUpdate:modelValue":n[3]||(n[3]=p=>o.inputs.comment=p),class:"min-h-[80px] md:min-h-[105px]"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(A,{modelValue:o.inputs.products,"onUpdate:modelValue":n[4]||(n[4]=p=>o.inputs.products=p),class:"3xl:basis-[40%]"},null,8,["modelValue"])])])],64)}}});export{_t as _};
