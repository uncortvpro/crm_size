import{_ as Y,a as Z,b as ee}from"./ButtonOpacityDelete.7feefd9a.js";import{_ as te}from"./useSorting.ac000306.js";import{_ as oe,o as p,c as w,a as h,N as F,f as A,j as b,w as e,b as o,d as t,t as r,l,F as N,v as R,m as x,q as D,g as ne,k as V,n as q,i as M,s as L}from"./entry.22f5ca64.js";import{a as H,_ as se,c as ae,d as ie,e as le}from"./Table.vue.f2bbacba.js";import{u as B,a as ce,_ as re}from"./useDate.f9c6639a.js";import{_ as me}from"./ButtonSortingTable.vue.508667e0.js";import{_ as pe}from"./ParticipantItem.vue.fe4d425b.js";import{_ as ue}from"./ProfilePage.vue.5a76eb3f.js";import{u as de}from"./objectivesStore.1bee2491.js";import"./CrossInCircle.7d889ebb.js";import"./nuxt-icon.6ed23056.js";import"./ButtonOpacityBorder.6a632c08.js";import"./ButtonOpacity.dfe37caa.js";import"./Search.a1dac41c.js";import"./Edit.d9fdbd70.js";import"./Delete.e043d5f9.js";import"./Modal.vue.5e6374df.js";import"./ui.config.267b1adf.js";import"./disposables.0a18dfc2.js";import"./ArrowTop.16cebdb4.js";import"./index.52d628e9.js";import"./index.075377b1.js";import"./ArrowRight.16208481.js";import"./ButtonText.5953f646.js";import"./Header2.ec8fd74b.js";import"./Close.e7b09b82.js";import"./tw-merge.c32e9328.js";import"./ThreeDots.7b1cb2b9.js";import"./cn.a642df04.js";const _e={},ve={class:"grid grid-cols-3 sm:grid-cols-4 gap-[20px] md:px-[10px] py-[15px] border-beige-1 border-b"},fe={class:"text-[9px] md:text-[12px] font-normal text-black"},be={class:"text-[9px] col-span-2 sm:col-span-3 md:text-[12px] font-normal text-black"};function ge(C,n){return p(),w("div",ve,[h("p",fe,[F(C.$slots,"header")]),h("p",be,[F(C.$slots,"content")])])}const je=oe(_e,[["render",ge]]),he={class:"bg-beige rounded-[3px] mt-[15px] md:mt-[20px] px-[10px] md:px-[0px]"},$e=A({__name:"ModalObjectivesDetails",props:{objective:{}},setup(C){return(n,$)=>{const u=je,I=H,g=ce;return p(),b(g,{ui:{width:"!max-w-[730px]"},label:"Деталі завдання"},{default:e(()=>[h("div",he,[o(u,null,{header:e(()=>[t(" Заголовок: ")]),content:e(()=>{var s;return[t(r((s=n.objective)==null?void 0:s.headline),1)]}),_:1}),o(u,null,{header:e(()=>[t(" Опис завдання: ")]),content:e(()=>{var s;return[t(r((s=n.objective)==null?void 0:s.description),1)]}),_:1}),o(u,null,{header:e(()=>[t(" Відповідальний: ")]),content:e(()=>{var s;return[t(r((s=n.objective)==null?void 0:s.responsible),1)]}),_:1}),o(u,null,{header:e(()=>[t(" Дедлайн: ")]),content:e(()=>{var s;return[t(r(("useDate"in n?n.useDate:l(B))((s=n.objective)==null?void 0:s.deadline.$date)),1)]}),_:1}),o(u,null,{header:e(()=>[t(" Створив: ")]),content:e(()=>{var s;return[t(r((s=n.objective)==null?void 0:s.creator),1)]}),_:1}),n.objective.participants?(p(),b(u,{key:0},{header:e(()=>[t(" Учасники: ")]),content:e(()=>[(p(!0),w(N,null,R(n.objective.participants,s=>(p(),w("span",null,r(s+", "),1))),256))]),_:1})):x("",!0),o(u,null,{header:e(()=>[t(" Статус: ")]),content:e(()=>[o(I,{color:n.objective.status.colour},{default:e(()=>[t(r(n.objective.status.status),1)]),_:1},8,["color"])]),_:1}),o(u,{class:"border-none"},{header:e(()=>[t(" Коментар: ")]),content:e(()=>{var s;return[t(r((s=n.objective)==null?void 0:s.comment),1)]}),_:1})])]),_:1})}}}),De={class:"max-w-[200px] w-full inline-block truncate"},Ce={class:"font-medium leading-[130%] max-w-[200px] inline-block truncate"},ke={class:"flex items-center gap-[5px]"},Ie={class:"max-w-[120px] inline-block truncate"},Oe={class:"flex items-center gap-[5px] md:gap-[25px]"},we=A({__name:"TableItemObjectives",props:{objective:{}},emits:["deleteAction","showDetails"],setup(C,{emit:n}){const $=C,u=n,I=()=>{u("deleteAction")},g=()=>{u("showDetails",$.objective._id)},s=D(()=>$.objective.participants.filter((a,f)=>f<3)||[]);return console.log($.objective),ne(),(a,f)=>{const d=se,O=pe,S=H,U=re,y=Y,P=Z,k=ae;return p(),b(k,null,{header:e(()=>{var m;return[h("span",De,r((m=a.objective)==null?void 0:m.headline),1)]}),elements:e(({active:m})=>[o(d,{vIf:m},{title:e(()=>[t("Дата")]),value:e(()=>{var i;return[t(r(("useDate"in a?a.useDate:l(B))((i=a.objective)==null?void 0:i.date.$date)),1)]}),_:2},1032,["vIf"]),o(d,{vIf:m},{title:e(()=>[t("Завдання")]),value:e(()=>{var i;return[h("span",Ce,r((i=a.objective)==null?void 0:i.headline),1)]}),_:2},1032,["vIf"]),o(d,{vIf:m},{title:e(()=>[t("Відповідальний")]),value:e(()=>{var i;return[t(r((i=a.objective)==null?void 0:i.responsible),1)]}),_:2},1032,["vIf"]),o(d,{vIf:m},{title:e(()=>[t("Дедлайн")]),value:e(()=>{var i;return[t(r(("useDate"in a?a.useDate:l(B))((i=a.objective)==null?void 0:i.deadline)),1)]}),_:2},1032,["vIf"]),o(d,{vIf:m},{title:e(()=>[t("Створив")]),value:e(()=>{var i;return[t(r((i=a.objective)==null?void 0:i.creator),1)]}),_:2},1032,["vIf"]),o(d,{vIf:m},{title:e(()=>[t("Учасники")]),value:e(()=>[h("div",ke,[(p(!0),w(N,null,R(l(s),(i,T)=>(p(),b(O,{disabled:"",key:T,name:i[0]},null,8,["name"]))),128)),a.objective.participants.length>3?(p(),b(O,{key:0,output:`+${a.objective.participants.length-3}`,disabled:""},null,8,["output"])):x("",!0)])]),_:2},1032,["vIf"]),o(d,{vIf:m},{title:e(()=>[t("Статус")]),value:e(()=>[o(S,{color:a.objective.status.colour},{default:e(()=>[t(r(a.objective.status.status),1)]),_:1},8,["color"])]),_:2},1032,["vIf"]),o(d,{vIf:m},{title:e(()=>[t("Коментар")]),value:e(()=>{var i;return[h("span",Ie,r((i=a.objective)==null?void 0:i.comment),1)]}),_:2},1032,["vIf"])]),"additional-buttons":e(()=>[h("div",Oe,[o(U,{onClick:V(g,["stop"])},null,8,["onClick"]),o(y,{class:"flex-shrink-0",onClick:f[0]||(f[0]=V(m=>("navigateTo"in a?a.navigateTo:l(q))("/profile/edit_objective/"+a.objective._id),["stop"]))}),o(P,{class:"flex-shrink-0",onClick:V(I,["stop"])},null,8,["onClick"])])]),_:1})}}}),st=A({__name:"objectives",setup(C){const n=de(),$=D(()=>n.objectives),u=()=>n.fetchObjectives(),I=c=>n.searchObjectives(c),g=M(!1),s=M(""),a=D(()=>$.value.find(c=>c._id===s.value)),f=D(()=>n.sorting),d=D(()=>n.reverseSorting),O=c=>{n.setSorting(c)},S=D(()=>n.page),U=D(()=>n.endPage),y=c=>n.setPage(c),P=async()=>{n.deleteObjectives(s.value),i(!1)},k=M(!1),m=c=>{T(c),i(!0)},i=c=>{k.value=c},T=c=>{s.value=c},W=c=>{T(c),g.value=!0};return u(),(c,_)=>{const z=ee,G=te,J=$e,E=me,j=ie,K=we,Q=le,X=ue;return p(),b(X,{title:"Задачі"},{content:e(()=>[o(z,{onSearch:I,onAdd:_[0]||(_[0]=v=>("navigateTo"in c?c.navigateTo:l(q))("new_objectives"))},{add_name:e(()=>[t(" Додати завдання")]),_:1}),l(a)?(p(),b(G,{key:0,modelValue:l(k),"onUpdate:modelValue":_[1]||(_[1]=v=>L(k)?k.value=v:null),onCloseModal:_[2]||(_[2]=v=>i(!1)),onConfirm:P},{default:e(()=>[t("Ви впевнені, що хочете видалити завдання?")]),_:1},8,["modelValue"])):x("",!0),l(a)?(p(),b(J,{key:1,modelValue:l(g),"onUpdate:modelValue":_[3]||(_[3]=v=>L(g)?g.value=v:null),objective:l(a)},null,8,["modelValue","objective"])):x("",!0),o(Q,{pageTable:l(S),endPage:l(U),onSetPage:y},{headers:e(()=>[o(j,null,{default:e(()=>[o(E,{sortingUp:l(f)==="date"&&l(d),sortingDown:l(f)==="date"&&!l(d),onClick:_[4]||(_[4]=v=>O("date")),class:"!font-normal"},{default:e(()=>[t(" Дата")]),_:1},8,["sortingUp","sortingDown"])]),_:1}),o(j,null,{default:e(()=>[t("Завдання")]),_:1}),o(j,null,{default:e(()=>[t("Відповідальний")]),_:1}),o(j,null,{default:e(()=>[o(E,{sortingUp:l(f)==="deadline"&&l(d),sortingDown:l(f)==="deadline"&&!l(d),onClick:_[5]||(_[5]=v=>O("deadline")),class:"!font-normal"},{default:e(()=>[t(" Дедлайн")]),_:1},8,["sortingUp","sortingDown"])]),_:1}),o(j,null,{default:e(()=>[t("Створив")]),_:1}),o(j,null,{default:e(()=>[t("Учасники")]),_:1}),o(j,null,{default:e(()=>[t("Статус")]),_:1}),o(j,null,{default:e(()=>[t("Коментар")]),_:1})]),items:e(()=>[(p(!0),w(N,null,R(l($),v=>(p(),b(K,{key:v._id,objective:v,onShowDetails:W,onDeleteAction:Te=>m(v._id)},null,8,["objective","onDeleteAction"]))),128))]),_:1},8,["pageTable","endPage"])]),_:1})}}});export{st as default};
