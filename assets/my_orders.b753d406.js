import{_ as P,a as x,b as F}from"./ButtonOpacityDelete.3419dae0.js";import{_ as M}from"./ModalOrderDetails.vue.2a04bee3.js";import{_ as E,a as L,c as R,d as j,e as q}from"./Table.vue.ac336591.js";import{_ as H}from"./CurrencyText.914ce709.js";import{u as y,_ as W}from"./useDate.1f771fc1.js";import{f as B,g as z,o as I,j as k,w as e,a as T,t as f,l as c,b as s,d as n,k as $,n as U,C as G,i as _,B as J,A as K,q as S,s as Q,m as X,c as Y,v as Z,F as ee}from"./entry.31d0978f.js";import{_ as oe}from"./ProfilePage.vue.53f05f42.js";import"./CrossInCircle.9056d5c9.js";import"./nuxt-icon.6b0be2fd.js";import"./ButtonOpacityBorder.fc460d2a.js";import"./ButtonOpacity.d9907053.js";import"./Search.7f0e5429.js";import"./Edit.be6078df.js";import"./Delete.dea2cc57.js";import"./useBase64.937b19aa.js";import"./ArrowTop.e4af0138.js";import"./index.71be1b6d.js";import"./index.20cc672b.js";import"./ArrowRight.77f4d53b.js";import"./ButtonText.59dc3dc8.js";import"./Header2.23941664.js";import"./Close.c480ddcc.js";import"./tw-merge.02720c62.js";import"./ui.config.5a70c403.js";import"./Modal.vue.cead7fb6.js";import"./disposables.5d182bf3.js";import"./ThreeDots.6ad6a307.js";const te={class:"max-w-[200px] w-full inline-block truncate"},ne={class:"font-medium leading-[130%] max-w-[200px] inline-block truncate"},se={class:"flex items-center gap-[5px] md:gap-[25px]"},re=B({__name:"TableItemOrders",props:{order:{}},emits:["deleteAction","showDetails"],setup(g,{emit:p}){const d=g,h=p,O=()=>{h("showDetails",d.order._id)};return console.log(d.order),z(),(o,m)=>{const a=E,i=H,C=L,D=W,r=P,u=x,w=R;return I(),k(w,null,{header:e(()=>{var l;return[T("span",te,f(("useDate"in o?o.useDate:c(y))((l=o.order)==null?void 0:l.date.$date)),1)]}),elements:e(({active:l})=>[s(a,{vIf:l},{title:e(()=>[n("№")]),value:e(()=>[n("№")]),_:2},1032,["vIf"]),s(a,{vIf:l},{title:e(()=>[n("Дата")]),value:e(()=>{var t;return[T("span",ne,f(("useDate"in o?o.useDate:c(y))((t=o.order)==null?void 0:t.date.$date)),1)]}),_:2},1032,["vIf"]),s(a,{vIf:l},{title:e(()=>[n("Клієнт")]),value:e(()=>{var t;return[n(f((t=o.order)==null?void 0:t.client),1)]}),_:2},1032,["vIf"]),s(a,{vIf:l},{title:e(()=>[n("Сума замовлення")]),value:e(()=>{var t;return[n(f((t=o.order)==null?void 0:t.total_sum),1),s(i)]}),_:2},1032,["vIf"]),s(a,{vIf:l},{title:e(()=>[n("Джерело замовлення")]),value:e(()=>{var t;return[n(f((t=o.order)==null?void 0:t.source),1)]}),_:2},1032,["vIf"]),s(a,{vIf:l},{title:e(()=>[n("Статус")]),value:e(()=>[s(C,{color:o.order.status.colour},{default:e(()=>[n(f(o.order.status.status),1)]),_:1},8,["color"])]),_:2},1032,["vIf"]),s(a,{vIf:l},{title:e(()=>[n("Оплата")]),value:e(()=>{var t;return[n(f((t=o.order)==null?void 0:t.payment),1)]}),_:2},1032,["vIf"])]),"additional-buttons":e(()=>[T("div",se,[s(D,{onClick:$(O,["stop"])},null,8,["onClick"]),s(r,{class:"flex-shrink-0",onClick:m[0]||(m[0]=$(l=>("navigateTo"in o?o.navigateTo:c(U))("/profile/edit_order/"+o.order._id),["stop"]))}),s(u,{class:"flex-shrink-0",onClick:m[1]||(m[1]=$(()=>{},["stop"]))})])]),_:1})}}}),ae=G("ordersStore",()=>{const g=_([]),p=_(1),d=_(""),h=_(1),O=_(""),o=_(!1);function m(i){d.value=i,a()}function a(){J(`${K()}/orders`,{body:{page:p.value,per_page:10,keyword:d.value,sort_by:O.value,reverse_sort:o.value}}).then(i=>{console.log(i),g.value=i.orders,h.value=i.total_pages}).catch(i=>{console.error(i)})}return{fetchOrders:a,orders:g,searchOrders:m}}),Ne=B({__name:"my_orders",setup(g){const p=ae(),d=S(()=>p.orders),h=()=>p.fetchOrders(),O=r=>p.searchOrders(r),o=_(!1),m=_(""),a=S(()=>d.value.find(r=>r._id===m.value)),i=r=>{m.value=r},C=r=>{o.value=r},D=r=>{i(r),C(!0)};return h(),(r,u)=>{const w=F,l=M,t=j,V=re,A=q,N=oe;return I(),k(N,{title:"Мої замовлення"},{content:e(()=>{var b;return[s(w,{onSearch:O,onAdd:u[0]||(u[0]=v=>("navigateTo"in r?r.navigateTo:c(U))("new_order"))},{add_name:e(()=>[n(" Додати замовлення")]),_:1}),c(a)?(I(),k(l,{key:0,modelValue:c(o),"onUpdate:modelValue":u[1]||(u[1]=v=>Q(o)?o.value=v:null),onCloseModal:u[2]||(u[2]=v=>C(!1)),label:"Деталі замовлення",products:(b=c(a))==null?void 0:b.products},null,8,["modelValue","products"])):X("",!0),s(A,null,{headers:e(()=>[s(t,null,{default:e(()=>[n("№ ")]),_:1}),s(t,null,{default:e(()=>[n("Дата замовлення")]),_:1}),s(t,null,{default:e(()=>[n("Клієнт")]),_:1}),s(t,null,{default:e(()=>[n("Сума замовлення")]),_:1}),s(t,null,{default:e(()=>[n("Джерело замовлення")]),_:1}),s(t,null,{default:e(()=>[n("Статус")]),_:1}),s(t,null,{default:e(()=>[n("Оплата")]),_:1})]),items:e(()=>[(I(!0),Y(ee,null,Z(c(d),v=>(I(),k(V,{key:v._id,order:v,onShowDetails:D},null,8,["order"]))),128))]),_:1})]}),_:1})}}});export{Ne as default};
