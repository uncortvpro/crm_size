import{_ as P}from"./disposables.70b61260.js";import{_ as G,a as J,b as K,c as Q,d as X,e as Y,f as Z}from"./Table.vue.ad4f2c1a.js";import{f as I,o as f,j as x,w as e,a as u,n as S,b as t,d as n,q as ee,i as $,s as U,v as M,_ as k,c as R,x as te,y as ne,l as C,z as O,g as oe,t as b,k as A,A as D,B as T,C as se,F as le}from"./entry.b9692a03.js";import ce from"./CrossInCircle.6cf2cc74.js";import ae from"./Search.2be64730.js";import ie from"./ArrowRight.2a8e5fe0.js";import{_ as E}from"./ButtonText.8e5dedd8.js";import _e from"./Edit.bcde5006.js";import{_ as V}from"./ButtonOpacity.218cfc58.js";import re from"./Delete.372e264c.js";import{_ as pe}from"./ProfilePage.vue.9eee05d3.js";import"./ui.config.326912ea.js";import"./ArrowTop.2e555466.js";import"./nuxt-icon.0c4ce2b5.js";import"./index.97eb10f0.js";import"./index.24f3f10d.js";const me={class:"flex flex-col items-center"},ue=u("div",{class:"border-danger border w-[20px] h-[20px] md:w-[30px] md:h-[30px] text-danger text-[15px] flex items-center justify-center rounded-[50%]"},[u("span",null,"!")],-1),de={class:"font-medium mt-[15px] md:mt-[15px] text-center text-[15px] md:text-[20px]"},fe={class:"flex self-stretch gap-[20px] justify-center mt-[20px]"},xe=I({__name:"ModalWarning",props:{ui:{}},emits:["closeModal","confirm"],setup(p,{emit:a}){const s=a,l=()=>{s("closeModal")},_=()=>{s("confirm")};return(d,m)=>{const i=P,c=G;return f(),x(c,{ui:{...d.ui,width:"!max-w-[414px]"}},{default:e(()=>[u("div",me,[ue,u("p",de,[S(d.$slots,"default")]),u("div",fe,[t(i,{onClick:_,class:"border-gray-1 w-full max-w-[115px] text-gray-1"},{default:e(()=>[n("Так")]),_:1}),t(i,{onClick:l,class:"bg-black w-full max-w-[115px] text-white hover:text-black hover:bg-transparent hover:!opacity-100"},{default:e(()=>[n("Ні ")]),_:1})])])]),_:3},8,["ui"])}}}),j=ee("clientsStore",()=>{const p=$([]),a=$(1),s=$(""),l=$(1);function _(c){s.value=c,m()}function d(c){if(c===0)return!1;a.value=c,m()}function m(){U(`${M()}/clients`,{body:{page:a.value,per_page:10,keyword:s.value}}).then(c=>{p.value=c.clients,l.value=c.total_pages}).catch(c=>{console.error(c)})}function i(c){U(`${M()}/delete_client`,{body:{client_id:c}}).then(h=>{h.message==="Client deleted successfully"&&(p.value=p.value.filter(v=>v._id.$oid!==c))})}return{clients:p,fetchClients:m,deleteClient:i,setPage:d,searchClients:_,page:a,keyWord:s,endPage:l}}),he=I({__name:"RemoveClient",props:{clientId:{}},emits:["switchModal"],setup(p,{emit:a}){const s=p,l=a,_=j(),d=c=>{_.deleteClient(c)},m=c=>{l("switchModal",!1)},i=async()=>{await d(s.clientId),l("switchModal",!1)};return(c,h)=>{const v=xe;return f(),x(v,{onCloseModal:h[0]||(h[0]=y=>m()),onConfirm:i},{default:e(()=>[n("Ви впевнені, що хочете видалити клієнта?")]),_:1})}}}),ve={},ge={class:"text-black font-medium text-[11px] xl:text-[15px]"};function Ce(p,a){const s=ce,l=P;return f(),x(l,{class:"flex items-center gap-[10px]"},{default:e(()=>[t(s,{class:"!mb-0"}),u("span",ge,[S(p.$slots,"default")])]),_:3})}const $e=k(ve,[["render",Ce]]),we={class:"border-[2px] flex items-center justify-between max-w-[182px] xl:max-w-[312px] border-black rounded-[5px]"},be=I({__name:"SearchBorder",emits:["search"],setup(p,{emit:a}){const s=a,l=$(""),_=()=>{s("search",l.value)};return(d,m)=>{const i=ae;return f(),R("div",we,[te(u("input",{"onUpdate:modelValue":m[0]||(m[0]=c=>O(l)?l.value=c:null),type:"text",class:"text-[11px] focus:border-none focus:outline-none py-[8px] px-[16px] xl:py-[12px] xl:px-[24px] bg-transparent xl:text-[15px] w-full font-medium placeholder:text-black",placeholder:"Пошук"},null,512),[[ne,C(l)]]),u("button",{onClick:_,class:"mr-[10px] xl:mr-[12px]"},[t(i,{class:"!w-[12px] !h-[12px] xl:!w-[18px] xl:!h-[18px]"})])])}}}),Ie={};function ye(p,a){const s=ie,l=E;return f(),x(l,{class:"!text-[12px] flex gap-[5px]"},{default:e(()=>[u("span",null,[S(p.$slots,"default")]),t(s,{color:"black",class:"rotate-[-90deg]"})]),_:3})}const ke=k(Ie,[["render",ye]]),Be={};function Te(p,a){const s=_e,l=V;return f(),x(l,{class:"p-[5px] w-[12px] box-content h-[12px] sm:w-[18px] sm:h-[18px]"},{default:e(()=>[t(s,{color:"#C8C8BE",class:"!w-full !h-full"})]),_:1})}const Se=k(Be,[["render",Te]]),Ue={};function Me(p,a){const s=re,l=V;return f(),x(l,{class:"p-[5px] w-[12px] box-content h-[12px] sm:w-[18px] sm:h-[18px]"},{default:e(()=>[t(s,{color:"#C8C8BE",class:"!w-full !h-full"})]),_:1})}const Ae=k(Ue,[["render",Me]]),Pe={class:"max-w-[200px] w-full inline-block truncate"},Re={class:"max-w-[200px] inline-block truncate"},Oe=I({__name:"TableItemClients",props:{client:{}},emits:["deleteAction"],setup(p,{emit:a}){const s=a,l=()=>{s("deleteAction")};return oe(),(_,d)=>{const m=E,i=J,c=K,h=Q,v=Se,y=Ae,B=X;return f(),x(B,null,{header:e(()=>{var o;return[u("span",Pe,b((o=_.client)==null?void 0:o.name),1)]}),elements:e(({active:o})=>[t(i,{vIf:o},{title:e(()=>[n("Ім’я")]),value:e(()=>[t(m,{class:"font-medium leading-[130%]"},{default:e(()=>{var r;return[u("span",Re,b((r=_.client)==null?void 0:r.name),1)]}),_:1})]),_:2},1032,["vIf"]),t(i,{vIf:o},{title:e(()=>[n("Номер телефону")]),value:e(()=>{var r;return[n(b((r=_.client)==null?void 0:r.phone),1)]}),_:2},1032,["vIf"]),t(i,{vIf:o},{title:e(()=>[n("Email")]),value:e(()=>{var r;return[n(b((r=_.client)==null?void 0:r.email),1)]}),_:2},1032,["vIf"]),t(i,{vIf:o},{title:e(()=>[n("Instagram")]),value:e(()=>{var r;return[n(b((r=_.client)==null?void 0:r.instagram),1)]}),_:2},1032,["vIf"]),t(i,{vIf:o},{title:e(()=>[n("Історія покупок ")]),value:e(()=>[n("Історія покупок")]),_:2},1032,["vIf"]),t(i,{vIf:o},{title:e(()=>[n("Тотал сума покупок ")]),value:e(()=>[n("Тотал сума покупок")]),_:2},1032,["vIf"]),t(i,{vIf:o},{title:e(()=>[n("Дата останньої покупки")]),value:e(()=>[n("Дата останньої покупки")]),_:2},1032,["vIf"]),t(i,{vIf:o},{title:e(()=>[n("Статус")]),value:e(()=>[t(c,null,{default:e(()=>{var r;return[n(b((r=_.client)==null?void 0:r.status),1)]}),_:1})]),_:2},1032,["vIf"]),t(i,{vIf:o,class:"3xl:hidden col-span-2"},{title:e(()=>[t(h,null,{default:e(()=>[n("Детальніше")]),_:1})]),_:2},1032,["vIf"])]),"additional-buttons":e(()=>[t(v,{class:"flex-shrink-0",onClick:d[0]||(d[0]=A(o=>("navigateTo"in _?_.navigateTo:C(D))("/profile/edit_client/"+_.client._id.$oid),["stop"]))}),t(y,{class:"flex-shrink-0",onClick:A(l,["stop"])},null,8,["onClick"])]),_:1})}}}),De={class:"mt-[15px] xl:mt-[25px]"},Ee={class:"flex justify-between gap-[15px] items-center"},tt=I({__name:"clients",setup(p){const a=j(),s=$(!1),l=$(""),_=T(()=>a.clients),d=T(()=>a.page),m=T(()=>a.endPage),i=()=>a.fetchClients(),c=o=>a.setPage(o),h=o=>a.searchClients(o),v=o=>{s.value=o},y=o=>{l.value=o},B=o=>{y(o),v(!0)};return i(),(o,r)=>{const F=he,N=$e,W=be,g=Y,L=ke,q=Oe,z=Z,H=pe;return f(),x(H,{title:"Клієнти"},{content:e(()=>[u("div",De,[t(F,{modelValue:C(s),"onUpdate:modelValue":r[0]||(r[0]=w=>O(s)?s.value=w:null),clientId:C(l),onSwitchModal:v},null,8,["modelValue","clientId"]),u("div",Ee,[t(N,{onClick:r[1]||(r[1]=w=>("navigateTo"in o?o.navigateTo:C(D))("new_client")),class:"flex-shrink-0"},{default:e(()=>[n("Додати клієнта")]),_:1}),t(W,{onSearch:h})]),t(z,{pageTable:C(d),endPage:C(m),onSetPage:c},{headers:e(()=>[t(g,null,{default:e(()=>[n("Ім’я")]),_:1}),t(g,null,{default:e(()=>[n("Номер телефону")]),_:1}),t(g,null,{default:e(()=>[n("Email")]),_:1}),t(g,null,{default:e(()=>[n("Instagram")]),_:1}),t(g,null,{default:e(()=>[n("Історія покупок ")]),_:1}),t(g,null,{default:e(()=>[n("Тотал сума покупок")]),_:1}),t(g,null,{default:e(()=>[t(L,{class:"!font-normal"},{default:e(()=>[n("Дата останньої покупки")]),_:1})]),_:1}),t(g,null,{default:e(()=>[n("Статус")]),_:1})]),items:e(()=>[(f(!0),R(le,null,se(C(_),w=>(f(),x(q,{key:w._id.$oid,client:w,onDeleteAction:Ve=>B(w._id.$oid)},null,8,["client","onDeleteAction"]))),128))]),_:1},8,["pageTable","endPage"])])]),_:1})}}});export{tt as default};
