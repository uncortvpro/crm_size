import{_ as K}from"./ModalWarning.vue.23f66d7b.js";import{_ as Q,a as X}from"./ButtonOpacityEdit.2fd942c8.js";import{_ as Y}from"./ModalOrderDetails.vue.1e9f2d5d.js";import{_ as Z}from"./ButtonSortingTable.vue.6bb064cc.js";import{a as ee,b as oe,c as te}from"./Table.vue.66c3bddb.js";import{_ as ne}from"./TransitionTableCell.vue.c0a4eaea.js";import{_ as se}from"./CurrencyText.e8d96bc2.js";import{_ as re}from"./StatusOutput.vue.c3766154.js";import{_ as ae}from"./ButtonOpacityThreeDots.278ad8cc.js";import{_ as le}from"./ButtonOpacityDelete.e1ef6157.js";import{f as E,g as ie,o as C,j as T,w as e,a as V,t as _,l as r,b as t,d as a,k as h,n as F,q as v,i as B,s as R,m as q,c as me,v as de,F as ue}from"./entry.dfedda78.js";import{u as x}from"./useDate.d306248e.js";import{_ as pe}from"./ProfilePage.vue.54fb0795.js";import{u as _e}from"./ordersStore.63f5d6b6.js";import"./disposables.ad6c7304.js";import"./ButtonOpacity.0cf4ae05.js";import"./nuxt-link.5e5b6720.js";import"./Modal.vue.e8d1d47a.js";import"./ui.config.7ec8c32c.js";import"./Edit.25c01ae3.js";import"./nuxt-icon.b1cd0380.js";import"./useBase64.1efa7b71.js";import"./ArrowRight.8c7a07d0.js";import"./ButtonText.1050bde9.js";import"./cn.a642df04.js";import"./ArrowTop.755be385.js";import"./index.95e32d33.js";import"./index.df039bca.js";import"./Header2.0a3f988c.js";import"./Close.6bed1860.js";import"./tw-merge.6d3b0571.js";import"./ThreeDots.3d0a7ae6.js";import"./CrossInCircle.8178a0de.js";import"./Search.b7cb7ff2.js";import"./Delete.97e93849.js";import"./useSorting.9414d803.js";const ce={class:"max-w-[200px] w-full inline-block truncate"},fe={class:"font-medium leading-[130%] max-w-[200px] inline-block truncate"},ge={class:"flex items-center gap-[5px] md:gap-[25px]"},ve=E({__name:"TableItemOrders",props:{order:{}},emits:["deleteAction","showDetails"],setup(M,{emit:m}){const w=M,I=m,$=()=>{I("showDetails",w.order._id)},c=()=>{I("deleteAction",w.order._id)};return ie(),(n,p)=>{const u=ne,b=se,U=re,y=ae,S=Q,f=le,P=ee;return C(),T(P,null,{header:e(()=>{var l;return[V("span",ce,_(("useDate"in n?n.useDate:r(x))((l=n.order)==null?void 0:l.date)),1)]}),elements:e(({active:l})=>[t(u,{vIf:l},{title:e(()=>[a("Дата")]),value:e(()=>{var o;return[V("span",fe,_(("useDate"in n?n.useDate:r(x))((o=n.order)==null?void 0:o.date)),1)]}),_:2},1032,["vIf"]),t(u,{vIf:l},{title:e(()=>[a("Клієнт")]),value:e(()=>{var o;return[a(_((o=n.order)==null?void 0:o.client),1)]}),_:2},1032,["vIf"]),t(u,{vIf:l},{title:e(()=>[a("Сума замовлення")]),value:e(()=>{var o;return[a(_((o=n.order)==null?void 0:o.total_sum),1),t(b)]}),_:2},1032,["vIf"]),t(u,{vIf:l},{title:e(()=>[a("Джерело замовлення")]),value:e(()=>{var o;return[a(_((o=n.order)==null?void 0:o.source),1)]}),_:2},1032,["vIf"]),t(u,{vIf:l},{title:e(()=>[a("Статус")]),value:e(()=>{var o,D;return[t(U,{color:(D=(o=n.order)==null?void 0:o.status)==null?void 0:D.colour},{default:e(()=>{var O,k;return[a(_((k=(O=n.order)==null?void 0:O.status)==null?void 0:k.status),1)]}),_:1},8,["color"])]}),_:2},1032,["vIf"]),t(u,{vIf:l},{title:e(()=>[a("Оплата")]),value:e(()=>{var o;return[a(_((o=n.order)==null?void 0:o.payment),1)]}),_:2},1032,["vIf"])]),"additional-buttons":e(()=>[V("div",ge,[t(y,{onClick:h($,["stop"])},null,8,["onClick"]),t(S,{class:"flex-shrink-0",onClick:p[0]||(p[0]=h(l=>("navigateTo"in n?n.navigateTo:r(F))("/profile/edit_order/"+n.order._id),["stop"]))}),t(f,{class:"flex-shrink-0",onClick:h(c,["stop"])},null,8,["onClick"])])]),_:1})}}}),eo=E({__name:"my_orders",setup(M){const m=_e(),w=v(()=>m.orders),I=()=>m.fetchOrders(),$=s=>m.searchOrders(s),c=B(""),n=v(()=>m.sorting),p=v(()=>m.reverseSorting),u=s=>{m.setSorting(s)},b=v(()=>m.page),U=v(()=>m.endPage),y=s=>m.setPage(s),S=async()=>{m.deleteOrder(c.value),l(!1)},f=B(!1),P=s=>{console.log("qwdqwd"),O(s),l(!0)},l=s=>{f.value=s},o=B(!1),D=v(()=>w.value.find(s=>s._id===c.value)),O=s=>{c.value=s},k=s=>{o.value=s},L=s=>{O(s),k(!0)};return I(),(s,i)=>{const j=K,H=X,W=Y,A=Z,g=oe,z=ve,G=te,J=pe;return C(),T(J,{title:"Мої замовлення"},{content:e(()=>{var N;return[r(c)?(C(),T(j,{key:0,modelValue:r(f),"onUpdate:modelValue":i[0]||(i[0]=d=>R(f)?f.value=d:null),onCloseModal:i[1]||(i[1]=d=>l(!1)),onConfirm:S},{default:e(()=>[a("Ви впевнені, що хочете видалити завдання?")]),_:1},8,["modelValue"])):q("",!0),t(H,{onSearch:$,onAdd:i[2]||(i[2]=d=>("navigateTo"in s?s.navigateTo:r(F))("new_order"))},{add_name:e(()=>[a(" Додати замовлення")]),_:1}),r(D)?(C(),T(W,{key:1,modelValue:r(o),"onUpdate:modelValue":i[3]||(i[3]=d=>R(o)?o.value=d:null),onCloseModal:i[4]||(i[4]=d=>k(!1)),label:"Деталі замовлення",products:(N=r(D))==null?void 0:N.products},null,8,["modelValue","products"])):q("",!0),t(G,{pageTable:r(b),endPage:r(U),onSetPage:y},{headers:e(()=>[t(g,null,{default:e(()=>[t(A,{sortingUp:r(n)==="date"&&r(p),sortingDown:r(n)==="date"&&!r(p),onClick:i[5]||(i[5]=d=>u("date")),class:"!font-normal"},{default:e(()=>[a(" Дата замовлення")]),_:1},8,["sortingUp","sortingDown"])]),_:1}),t(g,null,{default:e(()=>[a("Клієнт")]),_:1}),t(g,null,{default:e(()=>[t(A,{sortingUp:r(n)==="total_sum"&&r(p),sortingDown:r(n)==="total_sum"&&!r(p),onClick:i[6]||(i[6]=d=>u("total_sum")),class:"!font-normal"},{default:e(()=>[a(" Сума замовлення")]),_:1},8,["sortingUp","sortingDown"])]),_:1}),t(g,null,{default:e(()=>[a("Джерело замовлення")]),_:1}),t(g,null,{default:e(()=>[a("Статус")]),_:1}),t(g,null,{default:e(()=>[a("Оплата")]),_:1})]),items:e(()=>[(C(!0),me(ue,null,de(r(w),d=>(C(),T(z,{key:d._id,order:d,onShowDetails:L,onDeleteAction:P},null,8,["order"]))),128))]),_:1},8,["pageTable","endPage"])]}),_:1})}}});export{eo as default};
