import{_ as te}from"./disposables.e43502a6.js";import oe from"./Delete.3503f55b.js";import{_ as ne}from"./DivBorderBg.54795580.js";import{_ as N,b as ae,u as se,c as le,a as re}from"./CurrencyText.b52f41e9.js";import{_ as ie}from"./AlertDanger.51965057.js";import{_ as pe}from"./AlertSuccess.6064e2ce.js";import{u as ue,_ as me,a as ce}from"./useDateToString.9e79c6d5.js";import{_ as _e}from"./Header2.8e05bf54.js";import{f as de,g as ge,c as L,d as z,e as j,_ as fe,a as ve,b as he}from"./Table.vue.9febdc4a.js";import{f as U,o as d,j as b,w as e,b as t,a as H,l as i,d as n,t as f,c as x,F as q,v as E,m as B,i as g,q as G,s as J,x as Ce,y as be,z as ye,A as F,B as Se}from"./entry.a0142ef1.js";import{_ as Ie,u as R,a as De}from"./useDate.2eb2c116.js";import{_ as $e}from"./ProfilePage.vue.163c5b3f.js";import"./ButtonOpacity.d5eb19ed.js";import"./nuxt-icon.b4cdb491.js";import"./tw-merge.b150eb74.js";import"./ui.config.f134f843.js";import"./index.ea2b25d5.js";import"./index.842286eb.js";import"./useFormGroup.caf475e0.js";import"./Calendar.01f4050f.js";import"./nuxt-link.2473991e.js";import"./ArrowRight.5eb99833.js";import"./ButtonText.e873b0e6.js";import"./Photo.f34c065d.js";import"./User.1a06d223.js";import"./ArrowTop.894930ca.js";import"./Close.aa7dd460.js";import"./ThreeDots.4f61b54f.js";const Te=["src"],we=U({__name:"TableItemOrderDetails",props:{product:{}},setup($){return(m,y)=>{const o=de,c=ge,r=N,v=L;return d(),b(v,{isMobileClose:!1,class:"grid-cols-order-details-modal-xs gap-x-[10px] md:grid-cols-order-details-modal-md"},{elements:e(()=>[t(o,{class:"!grid-cols-1 !col-span-1 row-span-5"},{default:e(()=>[H("img",{class:"max-w-[40px]",src:("useBase64"in m?m.useBase64:i(ue))(m.product.picture)||"",alt:""},null,8,Te)]),_:1}),t(c,{class:"col-span-2"},{title:e(()=>[n("Найменування")]),value:e(()=>{var a;return[n(f((a=m.product)==null?void 0:a.name),1)]}),_:1}),t(c,{class:"col-span-2"},{title:e(()=>[n("Розмір")]),value:e(()=>{var a;return[n(f((a=m.product)==null?void 0:a.size),1)]}),_:1}),t(c,{class:"col-span-2"},{title:e(()=>[n("Кількість")]),value:e(()=>{var a;return[n(f((a=m.product)==null?void 0:a.amount),1)]}),_:1}),t(c,{class:"col-span-2"},{title:e(()=>[n("Ціна")]),value:e(()=>{var a;return[n(f((a=m.product)==null?void 0:a.price),1),t(r)]}),_:1})]),_:1})}}}),Ue=U({__name:"ModalOrderDetails",props:{products:{},isOpen:{type:Boolean},ui:{},label:{}},setup($){return(m,y)=>{const o=z,c=we,r=j,v=Ie;return d(),b(v,{ui:{width:"!max-w-[923px]"},label:m.label},{default:e(()=>[t(r,{pagination:!1,class:"!mt-[20px]"},{headers:e(()=>[t(o),t(o,null,{default:e(()=>[n("Найменування")]),_:1}),t(o,null,{default:e(()=>[n("Розмір")]),_:1}),t(o,null,{default:e(()=>[n("Кількість")]),_:1}),t(o,null,{default:e(()=>[n("Ціна")]),_:1})]),items:e(()=>[(d(!0),x(q,null,E(m.products,(a,h)=>(d(),b(c,{key:h,product:a},null,8,["product"]))),128))]),_:1})]),_:1},8,["label"])}}}),ke=U({__name:"TableItemShoppingHistory",props:{order:{}},emits:["showOrderDetails"],setup($,{emit:m}){const y=$,o=m,c=()=>{o("showOrderDetails",y.order._id)};return(r,v)=>{const a=fe,h=N,T=ve,I=he,l=De,C=L;return d(),b(C,{isMobileClose:!0},{header:e(()=>{var _;return[n(f(("useDate"in r?r.useDate:i(R))((_=r.order)==null?void 0:_.date)),1)]}),elements:e(({active:_})=>[t(a,{vIf:_},{title:e(()=>[n("Дата покупки")]),value:e(()=>{var p;return[n(f(("useDate"in r?r.useDate:i(R))((p=r.order)==null?void 0:p.date)),1)]}),_:2},1032,["vIf"]),t(a,{vIf:_},{title:e(()=>[n("Сума замовлення")]),value:e(()=>{var p;return[n(f((p=r.order)==null?void 0:p.total_sum),1),t(h)]}),_:2},1032,["vIf"]),t(a,{vIf:_},{title:e(()=>[n("Товари")]),value:e(()=>{var p;return[n(f((p=r.order)==null?void 0:p.products.length),1)]}),_:2},1032,["vIf"]),t(a,{vIf:_},{title:e(()=>[n("Оплата")]),value:e(()=>{var p;return[n(f((p=r.order)==null?void 0:p.payment),1)]}),_:2},1032,["vIf"]),r.order.status?(d(),b(a,{key:0,vIf:_,class:"3xl:w-[12%]"},{title:e(()=>[n("Статус замовлення")]),value:e(()=>[t(T,{color:r.order.status.colour},{default:e(()=>{var p;return[n(f((p=r.order)==null?void 0:p.status.status),1)]}),_:1},8,["color"])]),_:2},1032,["vIf"])):B("",!0),t(a,{vIf:_,class:"3xl:hidden col-span-2"},{title:e(()=>[t(I,{onClick:c},{default:e(()=>[n("Детальніше")]),_:1})]),_:2},1032,["vIf"])]),"additional-buttons":e(()=>[t(l,{onClick:c,class:"hidden 3xl:block"})]),_:1})}}}),Oe=U({__name:"ClientShoppingHistory",props:{emailClient:{},shoppingHistoryItems:{},page:{},endPage:{},sorting:{},reverseSorting:{type:Boolean}},emits:["setPage","setSorting"],setup($,{emit:m}){const y=$,o=m,c=l=>{o("setPage",l)},r=l=>{o("setSorting",l)},v=g(""),a=g(!1),h=l=>{a.value=l},T=l=>{v.value=l,h(!0)},I=G(()=>y.shoppingHistoryItems?y.shoppingHistoryItems.find(l=>l._id===v.value):!1);return(l,C)=>{const _=_e,p=Ue,k=ae,D=z,w=ke,O=j;return d(),x("div",null,[t(_,null,{default:e(()=>[n("Історія покупок")]),_:1}),i(I)?(d(),b(p,{key:0,products:i(I).products,modelValue:i(a),"onUpdate:modelValue":C[0]||(C[0]=S=>J(a)?a.value=S:null),label:"Деталі замовлення",onCloseModal:h},null,8,["products","modelValue"])):B("",!0),t(O,{pageTable:l.page,endPage:l.endPage,onSetPage:c},{headers:e(()=>[t(D,null,{default:e(()=>[t(k,{sortingUp:l.sorting==="order_date"&&l.reverseSorting,sortingDown:l.sorting==="order_date"&&!l.reverseSorting,onClick:C[1]||(C[1]=S=>r("order_date")),class:"!font-normal"},{default:e(()=>[n(" Дата покупки")]),_:1},8,["sortingUp","sortingDown"])]),_:1}),t(D,null,{default:e(()=>[t(k,{sortingUp:l.sorting==="total_sum"&&l.reverseSorting,sortingDown:l.sorting==="total_sum"&&!l.reverseSorting,onClick:C[2]||(C[2]=S=>r("total_sum")),class:"!font-normal"},{default:e(()=>[n(" Сума замовлення")]),_:1},8,["sortingUp","sortingDown"])]),_:1}),t(D,null,{default:e(()=>[n("Товари")]),_:1}),t(D,null,{default:e(()=>[n("Оплата")]),_:1}),t(D,null,{default:e(()=>[n("Статус замовлення")]),_:1})]),items:e(()=>[(d(!0),x(q,null,E(l.shoppingHistoryItems,S=>(d(),b(w,{key:S._id,order:S,onShowOrderDetails:T},null,8,["order"]))),128))]),_:1},8,["pageTable","endPage"])])}}}),Pe={class:"items-center gap-[40px] hidden lg:flex"},Be={class:"flex flex-col items-center lg:hidden mt-[25px]"},rt=U({__name:"[client_id]",setup($){se();const m=Ce(),y=G(()=>m.params.client_id),o=g({}),c=g({}),r=g(),v=g(""),a=g(""),h=g(1),T=g(1),I=g(""),l=g(!1),C=s=>{le(s,l,I,w)},_=s=>{h.value=s};be(h,()=>{w()},{deep:!0});const p=(s,u)=>{o.value[u]=s},k=()=>{const s=localStorage.getItem("token"),u=new FormData;u.append("additional_phone",o.value.additional_phone),u.append("email",o.value.email),u.append("gender",o.value.gender),u.append("birthday",ce(o.value.birthday)),u.append("instagram",o.value.instagram),u.append("telegram",o.value.telegram),u.append("comment",o.value.comment),u.append("status",o.value.status),u.append("userpic",o.value.userpic),u.append("phone",o.value.phone),u.append("name",o.value.name),u.append("access_token",s||""),r.value=u},D=()=>{k(),ye(`${F()}/update_client/${y.value}`,{method:"POST",body:r.value}).then(s=>{s.message==="Client updated successfully"?a.value="Клієнт успішно оновився!":v.value="Щось не вийшло!"})},w=()=>{Se(`${F()}/client_info`,{body:{client_id:y.value,page:h.value,per_page:5,sort_by:I.value,reverse_sort:l.value}}).then(s=>{console.log(s),T.value=s.total_pages,c.value=s.client_info,o.value.additional_phone=s.client_info.additional_phone,o.value.birthday=s.client_info.birthday,o.value.comment=s.client_info.comment,o.value.email=s.client_info.email,o.value.gender=s.client_info.gender,o.value.instagram=s.client_info.instagram,o.value.name=s.client_info.name,o.value.phone=s.client_info.phone,o.value.status=s.client_info.status.status,o.value.telegram=s.client_info.telegram,o.value.userpic=s.client_info.userpic})},O=s=>{P.value=s},S=s=>{O(!0)},P=g(!1);return w(),(s,u)=>{const V=te,M=oe,A=ne,K=re,Q=ie,W=pe,X=me,Y=Oe,Z=$e;return d(),b(Z,{title:"Редагувати клієнта"},{header:e(()=>[H("div",Pe,[t(V,{onClick:D},{default:e(()=>[n(" Оновити ")]),_:1}),t(A,{onClick:S,value:"Видалити",class:"w-fit"},{default:e(()=>[t(M,{class:"-order-10"})]),_:1})])]),content:e(()=>[t(K,{modelValue:i(P),"onUpdate:modelValue":u[0]||(u[0]=ee=>J(P)?P.value=ee:null),clientId:i(c)._id,onSwitchModal:O},null,8,["modelValue","clientId"]),i(v)?(d(),b(Q,{key:0},{default:e(()=>[n(f(i(v)),1)]),_:1})):B("",!0),i(a)?(d(),b(W,{key:1},{default:e(()=>[n(f(i(a)),1)]),_:1})):B("",!0),t(X,{labelStatus:"Змінити статус клієнта:",inputs:i(o),onUpdateInputs:p},null,8,["inputs"]),t(Y,{shoppingHistoryItems:i(c).orders,emailClient:i(c).email,page:i(h),endPage:i(T),sorting:i(I),reverseSorting:i(l),onSetSorting:C,onSetPage:_,class:"mt-[25px] xl:mt-[40px]"},null,8,["shoppingHistoryItems","emailClient","page","endPage","sorting","reverseSorting"]),H("div",Be,[t(V,{disabled:""},{default:e(()=>[n(" Оновити ")]),_:1}),t(A,{onClick:S,value:"Видалити",class:"w-fit mt-[17px]"},{default:e(()=>[t(M,{class:"-order-10"})]),_:1})])]),_:1})}}});export{rt as default};
