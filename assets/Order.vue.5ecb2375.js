import{_ as G}from"./AlertDanger.0346c101.js";import{_ as J}from"./AlertSuccess.ff0cfa6d.js";import{_ as E}from"./Header2.0a3f988c.js";import{a as K,b as Q}from"./SelectProfile.vue.a29812a6.js";import{_ as F}from"./ButtonOpacity.0cf4ae05.js";import{f as O,i as S,o as u,c as x,b as t,l as _,s as W,a as U,F as A,v as I,j as C,w as e,d as r,t as y,m as b,B as X,A as Y,k as Z,q as ee,n as te}from"./entry.dfedda78.js";import{o as H}from"./index.95e32d33.js";import{w as N}from"./index.df039bca.js";import{_ as oe,a as se,b as ne}from"./ButtonOpacityDelete.e1ef6157.js";import{_ as le}from"./SelectVariant.vue.87423fa9.js";import{b as j,_ as ae,a as re}from"./DivBorderBg.0f014492.js";import{d as ce,e as ue,a as pe,b as ie,c as me}from"./Table.vue.66c3bddb.js";import{_ as de}from"./CurrencyText.e8d96bc2.js";import{u as z}from"./useBase64.1efa7b71.js";import{u as _e}from"./ordersStore.63f5d6b6.js";const fe={key:0,class:"absolute top-[100%] left-0 w-full bg-beige max-h-[300px] overflow-y-scroll scroll_bar"},xe={key:0,class:"text-[9px] md:text-[12px] truncate px-[7px] py-[10px] md:px-[10px] md:pt-[15px] w-full text-left"},ve=O({__name:"SearchClients",props:{name:{},email:{}},emits:["update:name","update:email"],setup($,{emit:V}){const i=$,f=V,o=(p,d)=>{f("update:name",p),f("update:email",d)},s=S(null),k=S(!1),v=p=>{k.value=p},n=S(""),h=S([]),m=()=>{n.value=i.name||""},g=()=>{X(`${Y()}/clients`,{body:{keyword:n.value}}).then(p=>{h.value=p.clients}).catch(p=>{console.error(p)})};H(s,p=>v(!1));const a=(p,d)=>{o(p,d),n.value=p,v(!1)};return N(()=>i.name,()=>{m()}),(p,d)=>{const c=K,P=F;return u(),x("div",{class:"relative z-50",ref_key:"hiddenOutsideClickElement",ref:s},[t(c,{modelValue:_(n),"onUpdate:modelValue":d[0]||(d[0]=l=>W(n)?n.value=l:null),onFocus:d[1]||(d[1]=l=>v(!0)),onInput:g,class:"w-full"},null,8,["modelValue"]),_(k)?(u(),x("div",fe,[U("div",null,[(u(!0),x(A,null,I(_(h),l=>(u(),C(P,{key:l._id,onClick:B=>a(l.name,l.email),class:"text-[9px] md:text-[12px] truncate px-[7px] py-[10px] md:px-[10px] md:pt-[15px] duration-hover hover:bg-beige-1 w-full text-left"},{default:e(()=>[r(y(l.name)+" ("+y(l.email)+") ",1)]),_:2},1032,["onClick"]))),128)),_(h).length===0?(u(),x("p",xe," Не знайдено ")):b("",!0)])])):b("",!0)],512)}}}),he=["src"],ge=O({__name:"TableItemOrderProduct",props:{product:{}},emits:["deleteAction"],setup($,{emit:V}){const i=$,f=V,o=()=>{f("deleteAction",i.product._id)};return(s,k)=>{const v=ce,n=ue,h=de,m=oe,g=pe;return u(),C(g,{isMobileClose:!1,class:"grid-cols-order-details-modal-xs gap-x-[10px] md:grid-cols-order-details-modal-md relative"},{elements:e(()=>[t(v,{class:"!grid-cols-1 !col-span-1 row-span-5"},{default:e(()=>[s.product.photos[0]?(u(),x("img",{key:0,class:"max-w-[40px]",src:("useBase64"in s?s.useBase64:_(z))(s.product.photos[0])||"",alt:""},null,8,he)):b("",!0)]),_:1}),t(n,{class:"col-span-2"},{title:e(()=>[r("Найменування")]),value:e(()=>{var a;return[r(y((a=s.product)==null?void 0:a.name),1)]}),_:1}),t(n,{class:"col-span-2"},{title:e(()=>[r("Розмір")]),value:e(()=>{var a;return[r(y((a=s.product)==null?void 0:a.size),1)]}),_:1}),t(n,{class:"col-span-2"},{title:e(()=>[r("Кількість")]),value:e(()=>{var a;return[r(y((a=s.product)==null?void 0:a.in_stock),1)]}),_:1}),t(n,{class:"col-span-2"},{title:e(()=>[r("Ціна")]),value:e(()=>{var a;return[r(y((a=s.product)==null?void 0:a.price),1),t(h)]}),_:1}),t(n,{class:"col-span-2"},{title:e(()=>[]),value:e(()=>[t(m,{class:"flex-shrink-0 absolute right-0 top-0 3xl:relative",onClick:Z(o,["stop"])},null,8,["onClick"])]),_:1})]),_:1})}}}),ye={key:0,class:"absolute top-[100%] left-0 w-full bg-beige max-h-[300px] overflow-y-scroll scroll_bar"},be=["src"],ke={key:0,class:"text-[9px] md:text-[12px] truncate px-[7px] py-[10px] md:px-[10px] md:pt-[15px] w-full text-left"},Ce=O({__name:"ProductToOrderAdding",props:{modelValue:{},startProducts:{}},emits:["update:modelValue"],setup($,{emit:V}){const i=$,f=V,o=c=>{f("update:modelValue",c)},s=S(null),k=_e(),v=ee(()=>k.addingProducts),n=S([]),h=()=>{if(!i.startProducts)return!1;i.startProducts.forEach(c=>{o([...i.modelValue,c._id])}),n.value=i.startProducts||[]},m=async c=>{await k.searchProducts(c),g.value=!0},g=S(!1),a=()=>{g.value=!1},p=c=>{o([...i.modelValue,c._id]),n.value=[...n.value,c]},d=c=>{const P=i.modelValue.filter(B=>B!==c),l=n.value.filter(B=>B._id!==c);o(P),n.value=l};return H(s,c=>a()),N(()=>i.startProducts,()=>{h()}),(c,P)=>{const l=E,B=se,L=F,T=ie,M=ge,R=me,q=j;return u(),C(q,{class:"w-full flex flex-col"},{default:e(()=>[t(l,{class:"text-center"},{default:e(()=>[r(" Додати товари ")]),_:1}),U("div",{class:"relative",ref_key:"hiddenOutsideClickElement",ref:s},[t(B,{theme:"beige",class:"mt-[15px] xl:mt-[25px]",onSearch:m}),_(g)?(u(),x("div",ye,[U("div",null,[(u(!0),x(A,null,I(_(v),w=>(u(),C(L,{key:w._id,onClick:D=>p(w),class:"text-[9px] md:text-[12px] flex gap-[10px] items-center truncate px-[7px] py-[10px] md:px-[10px] md:pt-[15px] duration-hover hover:bg-beige-1 w-full text-left"},{default:e(()=>[w.photos[0]?(u(),x("img",{key:0,src:("useBase64"in c?c.useBase64:_(z))(w.photos[0])||void 0,alt:"",class:"w-[23px] h-[28px] object-cover"},null,8,be)):b("",!0),r(" "+y(w.name),1)]),_:2},1032,["onClick"]))),128)),_(v).length===0?(u(),x("p",ke," Не знайдено ")):b("",!0)])])):b("",!0)],512),U("div",null,[_(n).length>0?(u(),C(R,{key:0,pagination:!1,class:"!mt-[20px]"},{headers:e(()=>[t(T),t(T,null,{default:e(()=>[r("Найменування")]),_:1}),t(T,null,{default:e(()=>[r("Розмір")]),_:1}),t(T,null,{default:e(()=>[r("Кількість")]),_:1}),t(T,null,{default:e(()=>[r("Ціна")]),_:1})]),items:e(()=>[(u(!0),x(A,null,I(_(n),(w,D)=>(u(),C(M,{key:D,product:w,onDeleteAction:d},null,8,["product"]))),128))]),_:1})):b("",!0)])]),_:1})}}}),Ue={action:"#"},Ve={class:"flex flex-col 3xl:items-start 3xl:flex-row gap-[25px]"},we={class:"flex items-center gap-[15px] md:mt-[10px]"},Se=U("span",{class:"text-[9px] md:text-[10px] xl:text-[12px]"},"або",-1),Me=O({__name:"Order",props:{error:{},messageToUser:{},inputs:{},orderProducts:{}},emits:["updateInputs"],setup($,{emit:V}){const i=V,f=(o,s)=>{i("updateInputs",o,s)};return(o,s)=>{const k=G,v=J,n=E,h=ve,m=Q,g=ne,a=le,p=ae,d=re,c=j,P=Ce;return u(),x(A,null,[o.error?(u(),C(k,{key:0},{default:e(()=>[r(y(o.error),1)]),_:1})):b("",!0),o.messageToUser?(u(),C(v,{key:1},{default:e(()=>[r(y(o.messageToUser),1)]),_:1})):b("",!0),U("form",Ue,[U("div",Ve,[t(c,{class:"w-full 3xl:basis-[60%]"},{default:e(()=>[t(d,null,{default:e(()=>[t(n,{class:"col-span-2"},{default:e(()=>[r(" Інформація ")]),_:1}),t(m,{class:"col-span-2 md:col-span-1",label:"Обрати клієнта:"},{default:e(()=>[t(h,{name:o.inputs.client,"onUpdate:name":s[0]||(s[0]=l=>o.inputs.client=l),email:o.inputs.email,"onUpdate:email":s[1]||(s[1]=l=>o.inputs.email=l)},null,8,["name","email"])]),_:1}),U("div",we,[Se,t(g,{type:"button",onClick:s[2]||(s[2]=l=>("navigateTo"in o?o.navigateTo:_(te))("/profile/new_client"))},{default:e(()=>[r("Додати клієнта")]),_:1})]),t(n,{class:"col-span-2 mt-[10px] xl:mt-[20px]"},{default:e(()=>[r(" Додаткова інформація ")]),_:1}),t(m,{class:"col-span-2 md:col-span-1",label:"Доставка:"},{default:e(()=>[t(a,{valueSelect:o.inputs.shipping,typeSelect:"shipping",typeVariant:"shipping",onUpdateValue:f},null,8,["valueSelect"])]),_:1}),t(m,{class:"col-span-2 md:col-span-1",label:"Обрати статус замовлення:"},{default:e(()=>[t(a,{valueSelect:o.inputs.status,typeSelect:"status",typeVariant:"order",onUpdateValue:f},null,8,["valueSelect"])]),_:1}),t(m,{class:"col-span-2 md:col-span-1",label:"Джерело замовлення:"},{default:e(()=>[t(a,{valueSelect:o.inputs.source,typeSelect:"source",typeVariant:"source",onUpdateValue:f},null,8,["valueSelect"])]),_:1}),t(m,{class:"col-span-2 md:col-span-1",label:"Оплата:"},{default:e(()=>[t(a,{valueSelect:o.inputs.payment,typeSelect:"payment",typeVariant:"payment",onUpdateValue:f},null,8,["valueSelect"])]),_:1}),t(m,{class:"col-span-2",label:"Коментар:"},{default:e(()=>[t(p,{modelValue:o.inputs.comment,"onUpdate:modelValue":s[3]||(s[3]=l=>o.inputs.comment=l),class:"min-h-[80px] md:min-h-[105px]"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(P,{modelValue:o.inputs.products,"onUpdate:modelValue":s[4]||(s[4]=l=>o.inputs.products=l),startProducts:o.orderProducts,class:"3xl:basis-[40%]"},null,8,["modelValue","startProducts"])])])],64)}}});export{Me as _};
