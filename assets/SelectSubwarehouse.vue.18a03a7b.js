import{c as A,b as C,a as B}from"./SelectProfile.vue.0db388dd.js";import{C as k,i as l,B as U,A as x,f as M,q as S,o as g,j as N,l as c,w as v,b as _,s as V,d as O,c as T}from"./entry.3b1b6b86.js";import{_ as E}from"./disposables.7e45f5e4.js";import{_ as j}from"./ModalTitle.vue.4dcffda2.js";import{w as q}from"./index.7c9221c9.js";const D=k("warehousesStore",()=>{const d=[{id:1,name:"Склад готової продукції",secondName:"finishedWarehouse"},{id:2,name:"Склад дистриб’ютора",secondName:"distributorWarehouse"},{id:3,name:"Склад матеріалів",secondName:"warehouseMaterials"}],i=l({finishedWarehouse:"",distributorWarehouse:"",warehouseMaterials:""}),s=l({finishedWarehouse:[],distributorWarehouse:[],warehouseMaterials:[]}),n=l({finishedWarehouse:1,distributorWarehouse:1,warehouseMaterials:1}),a=l({finishedWarehouse:"",distributorWarehouse:"",warehouseMaterials:""}),t=l({finishedWarehouse:1,distributorWarehouse:1,warehouseMaterials:1}),p=(o,e)=>{i.value[u(e)]=o,h(e)},f=(o,e)=>{s.value[u(e)]=o},r=(o,e)=>{t.value[u(e)]=o};function u(o){const e=d.find(m=>m.id===o);return(e==null?void 0:e.secondName)||d[0].secondName}function w(o){const e=d.find(m=>m.id===o);return(e==null?void 0:e.name)||d[0].name}function b(o,e){a.value[u(e)]=o,h(e)}function h(o){U(`${x()}/products`,{body:{page:n.value[u(o)],per_page:10,keyword:a.value[u(o)],warehouse:w(o),subwarehouse:i.value[u(o)]}}).then(e=>{f(e.products,o),r(e.total_pages,o),console.log(s.value)}).catch(e=>{console.error(e)})}return{warehouseProducts:s,fetchProducts:h,searchProducts:b,warehouses:d,warehouseType:u,setSubwarehouse:p}}),F=M({__name:"SelectWarehouse",setup(d){const i=D(),s=S(()=>i.warehouses),n=S(()=>s.value.map(a=>a.name));return(a,t)=>{const p=A;return g(),N(p,{options:c(n)},null,8,["options"])}}}),I=M({__name:"ModalAddSubwarehouse",emits:["actionSuccess"],setup(d,{emit:i}){const s=i,n=()=>{s("actionSuccess")},a=l(""),t=l(""),p=()=>{U(`${x()}/add_subwarehouse`,{body:{warehouse:t.value,subwarehouse:a.value}}).then(f=>{f.message&&n()})};return(f,r)=>{const u=F,w=C,b=B,h=E,o=j;return g(),N(o,{title:"Додати підсклад",ui:{width:"!max-w-[414px]"}},{default:v(()=>[_(w,{class:"mt-[15px] md:mt-[20px] col-span-2 md:col-span-1",label:"Склад:"},{default:v(()=>[_(u,{modelValue:c(t),"onUpdate:modelValue":r[0]||(r[0]=e=>V(t)?t.value=e:null),valueSelect:c(t)},null,8,["modelValue","valueSelect"])]),_:1}),_(w,{class:"mt-[15px] md:mt-[20px]",label:"Введіть підсклад:"},{default:v(()=>[_(b,{modelValue:c(a),"onUpdate:modelValue":r[1]||(r[1]=e=>V(a)?a.value=e:null)},null,8,["modelValue"])]),_:1}),_(h,{disabled:!c(a)||!c(t),onClick:p,class:"self-center mt-[25px]"},{default:v(()=>[O("Зберегти")]),_:1},8,["disabled"])]),_:1})}}}),P="+ Додати інший підсклад",J=M({__name:"SelectSubwarehouse",props:{modelValue:{},placeholder:{type:Boolean}},emits:["actionUpdate","update:modelValue"],setup(d,{emit:i}){const s=l(""),n=l(!1),a=e=>{n.value=e},t=i,p=()=>{t("actionUpdate")},f=()=>{t("update:modelValue",s.value)},r=l([]),u=S(()=>r.value.map(e=>e.subwarehouse)),w=S(()=>[...u.value,P]),b=()=>{U(`${x()}/subwarehouses`).then(e=>{r.value=e.subwarehouses})},h=e=>{if(e===P)return a(!0),!1;f(),p()};b(),q(()=>s.value,()=>{h(s.value)});const o=async()=>{await b(),a(!1)};return(e,m)=>{const $=A,y=I;return g(),T("div",null,[_($,{placeholder:e.placeholder?"Оберіть склад":void 0,modelValue:c(s),"onUpdate:modelValue":m[0]||(m[0]=W=>V(s)?s.value=W:null),options:c(w),valueSelect:e.modelValue},null,8,["placeholder","modelValue","options","valueSelect"]),_(y,{modelValue:c(n),"onUpdate:modelValue":m[1]||(m[1]=W=>V(n)?n.value=W:null),onActionSuccess:o},null,8,["modelValue"])])}}});export{F as _,J as a,D as u};
